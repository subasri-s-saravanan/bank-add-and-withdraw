(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const u of i)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&n(f)}).observe(document,{childList:!0,subtree:!0});function r(i){const u={};return i.integrity&&(u.integrity=i.integrity),i.referrerPolicy&&(u.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?u.credentials="include":i.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function n(i){if(i.ep)return;i.ep=!0;const u=r(i);fetch(i.href,u)}})();var kr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Oc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var mo={},fn={};fn.byteLength=kc;fn.toByteArray=Cc;fn.fromByteArray=Vc;var It=[],lt=[],Mc=typeof Uint8Array<"u"?Uint8Array:Array,Si="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var mr=0,Pc=Si.length;mr<Pc;++mr)It[mr]=Si[mr],lt[Si.charCodeAt(mr)]=mr;lt["-".charCodeAt(0)]=62;lt["_".charCodeAt(0)]=63;function bo(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function kc(t){var e=bo(t),r=e[0],n=e[1];return(r+n)*3/4-n}function $c(t,e,r){return(e+r)*3/4-r}function Cc(t){var e,r=bo(t),n=r[0],i=r[1],u=new Mc($c(t,n,i)),f=0,a=i>0?n-4:n,w;for(w=0;w<a;w+=4)e=lt[t.charCodeAt(w)]<<18|lt[t.charCodeAt(w+1)]<<12|lt[t.charCodeAt(w+2)]<<6|lt[t.charCodeAt(w+3)],u[f++]=e>>16&255,u[f++]=e>>8&255,u[f++]=e&255;return i===2&&(e=lt[t.charCodeAt(w)]<<2|lt[t.charCodeAt(w+1)]>>4,u[f++]=e&255),i===1&&(e=lt[t.charCodeAt(w)]<<10|lt[t.charCodeAt(w+1)]<<4|lt[t.charCodeAt(w+2)]>>2,u[f++]=e>>8&255,u[f++]=e&255),u}function qc(t){return It[t>>18&63]+It[t>>12&63]+It[t>>6&63]+It[t&63]}function Gc(t,e,r){for(var n,i=[],u=e;u<r;u+=3)n=(t[u]<<16&16711680)+(t[u+1]<<8&65280)+(t[u+2]&255),i.push(qc(n));return i.join("")}function Vc(t){for(var e,r=t.length,n=r%3,i=[],u=16383,f=0,a=r-n;f<a;f+=u)i.push(Gc(t,f,f+u>a?a:f+u));return n===1?(e=t[r-1],i.push(It[e>>2]+It[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(It[e>>10]+It[e>>4&63]+It[e<<2&63]+"=")),i.join("")}var ln={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ln.read=function(t,e,r,n,i){var u,f,a=i*8-n-1,w=(1<<a)-1,_=w>>1,x=-7,N=r?i-1:0,M=r?-1:1,T=t[e+N];for(N+=M,u=T&(1<<-x)-1,T>>=-x,x+=a;x>0;u=u*256+t[e+N],N+=M,x-=8);for(f=u&(1<<-x)-1,u>>=-x,x+=n;x>0;f=f*256+t[e+N],N+=M,x-=8);if(u===0)u=1-_;else{if(u===w)return f?NaN:(T?-1:1)*(1/0);f=f+Math.pow(2,n),u=u-_}return(T?-1:1)*f*Math.pow(2,u-n)};ln.write=function(t,e,r,n,i,u){var f,a,w,_=u*8-i-1,x=(1<<_)-1,N=x>>1,M=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,T=n?0:u-1,y=n?1:-1,G=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,f=x):(f=Math.floor(Math.log(e)/Math.LN2),e*(w=Math.pow(2,-f))<1&&(f--,w*=2),f+N>=1?e+=M/w:e+=M*Math.pow(2,1-N),e*w>=2&&(f++,w/=2),f+N>=x?(a=0,f=x):f+N>=1?(a=(e*w-1)*Math.pow(2,i),f=f+N):(a=e*Math.pow(2,N-1)*Math.pow(2,i),f=0));i>=8;t[r+T]=a&255,T+=y,a/=256,i-=8);for(f=f<<i|a,_+=i;_>0;t[r+T]=f&255,T+=y,f/=256,_-=8);t[r+T-y]|=G*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=fn,r=ln,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=K,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=u(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function u(){try{const d=new Uint8Array(1),c={foo:function(){return 42}};return Object.setPrototypeOf(c,Uint8Array.prototype),Object.setPrototypeOf(d,c),d.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function f(d){if(d>i)throw new RangeError('The value "'+d+'" is invalid for option "size"');const c=new Uint8Array(d);return Object.setPrototypeOf(c,a.prototype),c}function a(d,c,l){if(typeof d=="number"){if(typeof c=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return N(d)}return w(d,c,l)}a.poolSize=8192;function w(d,c,l){if(typeof d=="string")return M(d,c);if(ArrayBuffer.isView(d))return y(d);if(d==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d);if(H(d,ArrayBuffer)||d&&H(d.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(H(d,SharedArrayBuffer)||d&&H(d.buffer,SharedArrayBuffer)))return G(d,c,l);if(typeof d=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const A=d.valueOf&&d.valueOf();if(A!=null&&A!==d)return a.from(A,c,l);const k=V(d);if(k)return k;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof d[Symbol.toPrimitive]=="function")return a.from(d[Symbol.toPrimitive]("string"),c,l);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d)}a.from=function(d,c,l){return w(d,c,l)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function _(d){if(typeof d!="number")throw new TypeError('"size" argument must be of type number');if(d<0)throw new RangeError('The value "'+d+'" is invalid for option "size"')}function x(d,c,l){return _(d),d<=0?f(d):c!==void 0?typeof l=="string"?f(d).fill(c,l):f(d).fill(c):f(d)}a.alloc=function(d,c,l){return x(d,c,l)};function N(d){return _(d),f(d<0?0:W(d)|0)}a.allocUnsafe=function(d){return N(d)},a.allocUnsafeSlow=function(d){return N(d)};function M(d,c){if((typeof c!="string"||c==="")&&(c="utf8"),!a.isEncoding(c))throw new TypeError("Unknown encoding: "+c);const l=Z(d,c)|0;let A=f(l);const k=A.write(d,c);return k!==l&&(A=A.slice(0,k)),A}function T(d){const c=d.length<0?0:W(d.length)|0,l=f(c);for(let A=0;A<c;A+=1)l[A]=d[A]&255;return l}function y(d){if(H(d,Uint8Array)){const c=new Uint8Array(d);return G(c.buffer,c.byteOffset,c.byteLength)}return T(d)}function G(d,c,l){if(c<0||d.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(d.byteLength<c+(l||0))throw new RangeError('"length" is outside of buffer bounds');let A;return c===void 0&&l===void 0?A=new Uint8Array(d):l===void 0?A=new Uint8Array(d,c):A=new Uint8Array(d,c,l),Object.setPrototypeOf(A,a.prototype),A}function V(d){if(a.isBuffer(d)){const c=W(d.length)|0,l=f(c);return l.length===0||d.copy(l,0,0,c),l}if(d.length!==void 0)return typeof d.length!="number"||ie(d.length)?f(0):T(d);if(d.type==="Buffer"&&Array.isArray(d.data))return T(d.data)}function W(d){if(d>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return d|0}function K(d){return+d!=d&&(d=0),a.alloc(+d)}a.isBuffer=function(c){return c!=null&&c._isBuffer===!0&&c!==a.prototype},a.compare=function(c,l){if(H(c,Uint8Array)&&(c=a.from(c,c.offset,c.byteLength)),H(l,Uint8Array)&&(l=a.from(l,l.offset,l.byteLength)),!a.isBuffer(c)||!a.isBuffer(l))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(c===l)return 0;let A=c.length,k=l.length;for(let z=0,j=Math.min(A,k);z<j;++z)if(c[z]!==l[z]){A=c[z],k=l[z];break}return A<k?-1:k<A?1:0},a.isEncoding=function(c){switch(String(c).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(c,l){if(!Array.isArray(c))throw new TypeError('"list" argument must be an Array of Buffers');if(c.length===0)return a.alloc(0);let A;if(l===void 0)for(l=0,A=0;A<c.length;++A)l+=c[A].length;const k=a.allocUnsafe(l);let z=0;for(A=0;A<c.length;++A){let j=c[A];if(H(j,Uint8Array))z+j.length>k.length?(a.isBuffer(j)||(j=a.from(j)),j.copy(k,z)):Uint8Array.prototype.set.call(k,j,z);else if(a.isBuffer(j))j.copy(k,z);else throw new TypeError('"list" argument must be an Array of Buffers');z+=j.length}return k};function Z(d,c){if(a.isBuffer(d))return d.length;if(ArrayBuffer.isView(d)||H(d,ArrayBuffer))return d.byteLength;if(typeof d!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof d);const l=d.length,A=arguments.length>2&&arguments[2]===!0;if(!A&&l===0)return 0;let k=!1;for(;;)switch(c){case"ascii":case"latin1":case"binary":return l;case"utf8":case"utf-8":return s(d).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l*2;case"hex":return l>>>1;case"base64":return m(d).length;default:if(k)return A?-1:s(d).length;c=(""+c).toLowerCase(),k=!0}}a.byteLength=Z;function se(d,c,l){let A=!1;if((c===void 0||c<0)&&(c=0),c>this.length||((l===void 0||l>this.length)&&(l=this.length),l<=0)||(l>>>=0,c>>>=0,l<=c))return"";for(d||(d="utf8");;)switch(d){case"hex":return le(this,c,l);case"utf8":case"utf-8":return U(this,c,l);case"ascii":return D(this,c,l);case"latin1":case"binary":return re(this,c,l);case"base64":return B(this,c,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ye(this,c,l);default:if(A)throw new TypeError("Unknown encoding: "+d);d=(d+"").toLowerCase(),A=!0}}a.prototype._isBuffer=!0;function S(d,c,l){const A=d[c];d[c]=d[l],d[l]=A}a.prototype.swap16=function(){const c=this.length;if(c%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let l=0;l<c;l+=2)S(this,l,l+1);return this},a.prototype.swap32=function(){const c=this.length;if(c%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let l=0;l<c;l+=4)S(this,l,l+3),S(this,l+1,l+2);return this},a.prototype.swap64=function(){const c=this.length;if(c%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let l=0;l<c;l+=8)S(this,l,l+7),S(this,l+1,l+6),S(this,l+2,l+5),S(this,l+3,l+4);return this},a.prototype.toString=function(){const c=this.length;return c===0?"":arguments.length===0?U(this,0,c):se.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(c){if(!a.isBuffer(c))throw new TypeError("Argument must be a Buffer");return this===c?!0:a.compare(this,c)===0},a.prototype.inspect=function(){let c="";const l=t.INSPECT_MAX_BYTES;return c=this.toString("hex",0,l).replace(/(.{2})/g,"$1 ").trim(),this.length>l&&(c+=" ... "),"<Buffer "+c+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(c,l,A,k,z){if(H(c,Uint8Array)&&(c=a.from(c,c.offset,c.byteLength)),!a.isBuffer(c))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof c);if(l===void 0&&(l=0),A===void 0&&(A=c?c.length:0),k===void 0&&(k=0),z===void 0&&(z=this.length),l<0||A>c.length||k<0||z>this.length)throw new RangeError("out of range index");if(k>=z&&l>=A)return 0;if(k>=z)return-1;if(l>=A)return 1;if(l>>>=0,A>>>=0,k>>>=0,z>>>=0,this===c)return 0;let j=z-k,ge=A-l;const _e=Math.min(j,ge),me=this.slice(k,z),we=c.slice(l,A);for(let Se=0;Se<_e;++Se)if(me[Se]!==we[Se]){j=me[Se],ge=we[Se];break}return j<ge?-1:ge<j?1:0};function L(d,c,l,A,k){if(d.length===0)return-1;if(typeof l=="string"?(A=l,l=0):l>2147483647?l=2147483647:l<-2147483648&&(l=-2147483648),l=+l,ie(l)&&(l=k?0:d.length-1),l<0&&(l=d.length+l),l>=d.length){if(k)return-1;l=d.length-1}else if(l<0)if(k)l=0;else return-1;if(typeof c=="string"&&(c=a.from(c,A)),a.isBuffer(c))return c.length===0?-1:X(d,c,l,A,k);if(typeof c=="number")return c=c&255,typeof Uint8Array.prototype.indexOf=="function"?k?Uint8Array.prototype.indexOf.call(d,c,l):Uint8Array.prototype.lastIndexOf.call(d,c,l):X(d,[c],l,A,k);throw new TypeError("val must be string, number or Buffer")}function X(d,c,l,A,k){let z=1,j=d.length,ge=c.length;if(A!==void 0&&(A=String(A).toLowerCase(),A==="ucs2"||A==="ucs-2"||A==="utf16le"||A==="utf-16le")){if(d.length<2||c.length<2)return-1;z=2,j/=2,ge/=2,l/=2}function _e(we,Se){return z===1?we[Se]:we.readUInt16BE(Se*z)}let me;if(k){let we=-1;for(me=l;me<j;me++)if(_e(d,me)===_e(c,we===-1?0:me-we)){if(we===-1&&(we=me),me-we+1===ge)return we*z}else we!==-1&&(me-=me-we),we=-1}else for(l+ge>j&&(l=j-ge),me=l;me>=0;me--){let we=!0;for(let Se=0;Se<ge;Se++)if(_e(d,me+Se)!==_e(c,Se)){we=!1;break}if(we)return me}return-1}a.prototype.includes=function(c,l,A){return this.indexOf(c,l,A)!==-1},a.prototype.indexOf=function(c,l,A){return L(this,c,l,A,!0)},a.prototype.lastIndexOf=function(c,l,A){return L(this,c,l,A,!1)};function Q(d,c,l,A){l=Number(l)||0;const k=d.length-l;A?(A=Number(A),A>k&&(A=k)):A=k;const z=c.length;A>z/2&&(A=z/2);let j;for(j=0;j<A;++j){const ge=parseInt(c.substr(j*2,2),16);if(ie(ge))return j;d[l+j]=ge}return j}function q(d,c,l,A){return I(s(c,d.length-l),d,l,A)}function C(d,c,l,A){return I(o(c),d,l,A)}function ee(d,c,l,A){return I(m(c),d,l,A)}function te(d,c,l,A){return I(p(c,d.length-l),d,l,A)}a.prototype.write=function(c,l,A,k){if(l===void 0)k="utf8",A=this.length,l=0;else if(A===void 0&&typeof l=="string")k=l,A=this.length,l=0;else if(isFinite(l))l=l>>>0,isFinite(A)?(A=A>>>0,k===void 0&&(k="utf8")):(k=A,A=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const z=this.length-l;if((A===void 0||A>z)&&(A=z),c.length>0&&(A<0||l<0)||l>this.length)throw new RangeError("Attempt to write outside buffer bounds");k||(k="utf8");let j=!1;for(;;)switch(k){case"hex":return Q(this,c,l,A);case"utf8":case"utf-8":return q(this,c,l,A);case"ascii":case"latin1":case"binary":return C(this,c,l,A);case"base64":return ee(this,c,l,A);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return te(this,c,l,A);default:if(j)throw new TypeError("Unknown encoding: "+k);k=(""+k).toLowerCase(),j=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function B(d,c,l){return c===0&&l===d.length?e.fromByteArray(d):e.fromByteArray(d.slice(c,l))}function U(d,c,l){l=Math.min(d.length,l);const A=[];let k=c;for(;k<l;){const z=d[k];let j=null,ge=z>239?4:z>223?3:z>191?2:1;if(k+ge<=l){let _e,me,we,Se;switch(ge){case 1:z<128&&(j=z);break;case 2:_e=d[k+1],(_e&192)===128&&(Se=(z&31)<<6|_e&63,Se>127&&(j=Se));break;case 3:_e=d[k+1],me=d[k+2],(_e&192)===128&&(me&192)===128&&(Se=(z&15)<<12|(_e&63)<<6|me&63,Se>2047&&(Se<55296||Se>57343)&&(j=Se));break;case 4:_e=d[k+1],me=d[k+2],we=d[k+3],(_e&192)===128&&(me&192)===128&&(we&192)===128&&(Se=(z&15)<<18|(_e&63)<<12|(me&63)<<6|we&63,Se>65535&&Se<1114112&&(j=Se))}}j===null?(j=65533,ge=1):j>65535&&(j-=65536,A.push(j>>>10&1023|55296),j=56320|j&1023),A.push(j),k+=ge}return Y(A)}const $=4096;function Y(d){const c=d.length;if(c<=$)return String.fromCharCode.apply(String,d);let l="",A=0;for(;A<c;)l+=String.fromCharCode.apply(String,d.slice(A,A+=$));return l}function D(d,c,l){let A="";l=Math.min(d.length,l);for(let k=c;k<l;++k)A+=String.fromCharCode(d[k]&127);return A}function re(d,c,l){let A="";l=Math.min(d.length,l);for(let k=c;k<l;++k)A+=String.fromCharCode(d[k]);return A}function le(d,c,l){const A=d.length;(!c||c<0)&&(c=0),(!l||l<0||l>A)&&(l=A);let k="";for(let z=c;z<l;++z)k+=ue[d[z]];return k}function ye(d,c,l){const A=d.slice(c,l);let k="";for(let z=0;z<A.length-1;z+=2)k+=String.fromCharCode(A[z]+A[z+1]*256);return k}a.prototype.slice=function(c,l){const A=this.length;c=~~c,l=l===void 0?A:~~l,c<0?(c+=A,c<0&&(c=0)):c>A&&(c=A),l<0?(l+=A,l<0&&(l=0)):l>A&&(l=A),l<c&&(l=c);const k=this.subarray(c,l);return Object.setPrototypeOf(k,a.prototype),k};function oe(d,c,l){if(d%1!==0||d<0)throw new RangeError("offset is not uint");if(d+c>l)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(c,l,A){c=c>>>0,l=l>>>0,A||oe(c,l,this.length);let k=this[c],z=1,j=0;for(;++j<l&&(z*=256);)k+=this[c+j]*z;return k},a.prototype.readUintBE=a.prototype.readUIntBE=function(c,l,A){c=c>>>0,l=l>>>0,A||oe(c,l,this.length);let k=this[c+--l],z=1;for(;l>0&&(z*=256);)k+=this[c+--l]*z;return k},a.prototype.readUint8=a.prototype.readUInt8=function(c,l){return c=c>>>0,l||oe(c,1,this.length),this[c]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(c,l){return c=c>>>0,l||oe(c,2,this.length),this[c]|this[c+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(c,l){return c=c>>>0,l||oe(c,2,this.length),this[c]<<8|this[c+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(c,l){return c=c>>>0,l||oe(c,4,this.length),(this[c]|this[c+1]<<8|this[c+2]<<16)+this[c+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(c,l){return c=c>>>0,l||oe(c,4,this.length),this[c]*16777216+(this[c+1]<<16|this[c+2]<<8|this[c+3])},a.prototype.readBigUInt64LE=he(function(c){c=c>>>0,F(c,"offset");const l=this[c],A=this[c+7];(l===void 0||A===void 0)&&R(c,this.length-8);const k=l+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24,z=this[++c]+this[++c]*2**8+this[++c]*2**16+A*2**24;return BigInt(k)+(BigInt(z)<<BigInt(32))}),a.prototype.readBigUInt64BE=he(function(c){c=c>>>0,F(c,"offset");const l=this[c],A=this[c+7];(l===void 0||A===void 0)&&R(c,this.length-8);const k=l*2**24+this[++c]*2**16+this[++c]*2**8+this[++c],z=this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+A;return(BigInt(k)<<BigInt(32))+BigInt(z)}),a.prototype.readIntLE=function(c,l,A){c=c>>>0,l=l>>>0,A||oe(c,l,this.length);let k=this[c],z=1,j=0;for(;++j<l&&(z*=256);)k+=this[c+j]*z;return z*=128,k>=z&&(k-=Math.pow(2,8*l)),k},a.prototype.readIntBE=function(c,l,A){c=c>>>0,l=l>>>0,A||oe(c,l,this.length);let k=l,z=1,j=this[c+--k];for(;k>0&&(z*=256);)j+=this[c+--k]*z;return z*=128,j>=z&&(j-=Math.pow(2,8*l)),j},a.prototype.readInt8=function(c,l){return c=c>>>0,l||oe(c,1,this.length),this[c]&128?(255-this[c]+1)*-1:this[c]},a.prototype.readInt16LE=function(c,l){c=c>>>0,l||oe(c,2,this.length);const A=this[c]|this[c+1]<<8;return A&32768?A|4294901760:A},a.prototype.readInt16BE=function(c,l){c=c>>>0,l||oe(c,2,this.length);const A=this[c+1]|this[c]<<8;return A&32768?A|4294901760:A},a.prototype.readInt32LE=function(c,l){return c=c>>>0,l||oe(c,4,this.length),this[c]|this[c+1]<<8|this[c+2]<<16|this[c+3]<<24},a.prototype.readInt32BE=function(c,l){return c=c>>>0,l||oe(c,4,this.length),this[c]<<24|this[c+1]<<16|this[c+2]<<8|this[c+3]},a.prototype.readBigInt64LE=he(function(c){c=c>>>0,F(c,"offset");const l=this[c],A=this[c+7];(l===void 0||A===void 0)&&R(c,this.length-8);const k=this[c+4]+this[c+5]*2**8+this[c+6]*2**16+(A<<24);return(BigInt(k)<<BigInt(32))+BigInt(l+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24)}),a.prototype.readBigInt64BE=he(function(c){c=c>>>0,F(c,"offset");const l=this[c],A=this[c+7];(l===void 0||A===void 0)&&R(c,this.length-8);const k=(l<<24)+this[++c]*2**16+this[++c]*2**8+this[++c];return(BigInt(k)<<BigInt(32))+BigInt(this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+A)}),a.prototype.readFloatLE=function(c,l){return c=c>>>0,l||oe(c,4,this.length),r.read(this,c,!0,23,4)},a.prototype.readFloatBE=function(c,l){return c=c>>>0,l||oe(c,4,this.length),r.read(this,c,!1,23,4)},a.prototype.readDoubleLE=function(c,l){return c=c>>>0,l||oe(c,8,this.length),r.read(this,c,!0,52,8)},a.prototype.readDoubleBE=function(c,l){return c=c>>>0,l||oe(c,8,this.length),r.read(this,c,!1,52,8)};function fe(d,c,l,A,k,z){if(!a.isBuffer(d))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>k||c<z)throw new RangeError('"value" argument is out of bounds');if(l+A>d.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(c,l,A,k){if(c=+c,l=l>>>0,A=A>>>0,!k){const ge=Math.pow(2,8*A)-1;fe(this,c,l,A,ge,0)}let z=1,j=0;for(this[l]=c&255;++j<A&&(z*=256);)this[l+j]=c/z&255;return l+A},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(c,l,A,k){if(c=+c,l=l>>>0,A=A>>>0,!k){const ge=Math.pow(2,8*A)-1;fe(this,c,l,A,ge,0)}let z=A-1,j=1;for(this[l+z]=c&255;--z>=0&&(j*=256);)this[l+z]=c/j&255;return l+A},a.prototype.writeUint8=a.prototype.writeUInt8=function(c,l,A){return c=+c,l=l>>>0,A||fe(this,c,l,1,255,0),this[l]=c&255,l+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(c,l,A){return c=+c,l=l>>>0,A||fe(this,c,l,2,65535,0),this[l]=c&255,this[l+1]=c>>>8,l+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(c,l,A){return c=+c,l=l>>>0,A||fe(this,c,l,2,65535,0),this[l]=c>>>8,this[l+1]=c&255,l+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(c,l,A){return c=+c,l=l>>>0,A||fe(this,c,l,4,4294967295,0),this[l+3]=c>>>24,this[l+2]=c>>>16,this[l+1]=c>>>8,this[l]=c&255,l+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(c,l,A){return c=+c,l=l>>>0,A||fe(this,c,l,4,4294967295,0),this[l]=c>>>24,this[l+1]=c>>>16,this[l+2]=c>>>8,this[l+3]=c&255,l+4};function Ne(d,c,l,A,k){v(c,A,k,d,l,7);let z=Number(c&BigInt(4294967295));d[l++]=z,z=z>>8,d[l++]=z,z=z>>8,d[l++]=z,z=z>>8,d[l++]=z;let j=Number(c>>BigInt(32)&BigInt(4294967295));return d[l++]=j,j=j>>8,d[l++]=j,j=j>>8,d[l++]=j,j=j>>8,d[l++]=j,l}function E(d,c,l,A,k){v(c,A,k,d,l,7);let z=Number(c&BigInt(4294967295));d[l+7]=z,z=z>>8,d[l+6]=z,z=z>>8,d[l+5]=z,z=z>>8,d[l+4]=z;let j=Number(c>>BigInt(32)&BigInt(4294967295));return d[l+3]=j,j=j>>8,d[l+2]=j,j=j>>8,d[l+1]=j,j=j>>8,d[l]=j,l+8}a.prototype.writeBigUInt64LE=he(function(c,l=0){return Ne(this,c,l,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=he(function(c,l=0){return E(this,c,l,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(c,l,A,k){if(c=+c,l=l>>>0,!k){const _e=Math.pow(2,8*A-1);fe(this,c,l,A,_e-1,-_e)}let z=0,j=1,ge=0;for(this[l]=c&255;++z<A&&(j*=256);)c<0&&ge===0&&this[l+z-1]!==0&&(ge=1),this[l+z]=(c/j>>0)-ge&255;return l+A},a.prototype.writeIntBE=function(c,l,A,k){if(c=+c,l=l>>>0,!k){const _e=Math.pow(2,8*A-1);fe(this,c,l,A,_e-1,-_e)}let z=A-1,j=1,ge=0;for(this[l+z]=c&255;--z>=0&&(j*=256);)c<0&&ge===0&&this[l+z+1]!==0&&(ge=1),this[l+z]=(c/j>>0)-ge&255;return l+A},a.prototype.writeInt8=function(c,l,A){return c=+c,l=l>>>0,A||fe(this,c,l,1,127,-128),c<0&&(c=255+c+1),this[l]=c&255,l+1},a.prototype.writeInt16LE=function(c,l,A){return c=+c,l=l>>>0,A||fe(this,c,l,2,32767,-32768),this[l]=c&255,this[l+1]=c>>>8,l+2},a.prototype.writeInt16BE=function(c,l,A){return c=+c,l=l>>>0,A||fe(this,c,l,2,32767,-32768),this[l]=c>>>8,this[l+1]=c&255,l+2},a.prototype.writeInt32LE=function(c,l,A){return c=+c,l=l>>>0,A||fe(this,c,l,4,2147483647,-2147483648),this[l]=c&255,this[l+1]=c>>>8,this[l+2]=c>>>16,this[l+3]=c>>>24,l+4},a.prototype.writeInt32BE=function(c,l,A){return c=+c,l=l>>>0,A||fe(this,c,l,4,2147483647,-2147483648),c<0&&(c=4294967295+c+1),this[l]=c>>>24,this[l+1]=c>>>16,this[l+2]=c>>>8,this[l+3]=c&255,l+4},a.prototype.writeBigInt64LE=he(function(c,l=0){return Ne(this,c,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=he(function(c,l=0){return E(this,c,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ae(d,c,l,A,k,z){if(l+A>d.length)throw new RangeError("Index out of range");if(l<0)throw new RangeError("Index out of range")}function Ie(d,c,l,A,k){return c=+c,l=l>>>0,k||Ae(d,c,l,4),r.write(d,c,l,A,23,4),l+4}a.prototype.writeFloatLE=function(c,l,A){return Ie(this,c,l,!0,A)},a.prototype.writeFloatBE=function(c,l,A){return Ie(this,c,l,!1,A)};function ae(d,c,l,A,k){return c=+c,l=l>>>0,k||Ae(d,c,l,8),r.write(d,c,l,A,52,8),l+8}a.prototype.writeDoubleLE=function(c,l,A){return ae(this,c,l,!0,A)},a.prototype.writeDoubleBE=function(c,l,A){return ae(this,c,l,!1,A)},a.prototype.copy=function(c,l,A,k){if(!a.isBuffer(c))throw new TypeError("argument should be a Buffer");if(A||(A=0),!k&&k!==0&&(k=this.length),l>=c.length&&(l=c.length),l||(l=0),k>0&&k<A&&(k=A),k===A||c.length===0||this.length===0)return 0;if(l<0)throw new RangeError("targetStart out of bounds");if(A<0||A>=this.length)throw new RangeError("Index out of range");if(k<0)throw new RangeError("sourceEnd out of bounds");k>this.length&&(k=this.length),c.length-l<k-A&&(k=c.length-l+A);const z=k-A;return this===c&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(l,A,k):Uint8Array.prototype.set.call(c,this.subarray(A,k),l),z},a.prototype.fill=function(c,l,A,k){if(typeof c=="string"){if(typeof l=="string"?(k=l,l=0,A=this.length):typeof A=="string"&&(k=A,A=this.length),k!==void 0&&typeof k!="string")throw new TypeError("encoding must be a string");if(typeof k=="string"&&!a.isEncoding(k))throw new TypeError("Unknown encoding: "+k);if(c.length===1){const j=c.charCodeAt(0);(k==="utf8"&&j<128||k==="latin1")&&(c=j)}}else typeof c=="number"?c=c&255:typeof c=="boolean"&&(c=Number(c));if(l<0||this.length<l||this.length<A)throw new RangeError("Out of range index");if(A<=l)return this;l=l>>>0,A=A===void 0?this.length:A>>>0,c||(c=0);let z;if(typeof c=="number")for(z=l;z<A;++z)this[z]=c;else{const j=a.isBuffer(c)?c:a.from(c,k),ge=j.length;if(ge===0)throw new TypeError('The value "'+c+'" is invalid for argument "value"');for(z=0;z<A-l;++z)this[z+l]=j[z%ge]}return this};const J={};function ne(d,c,l){J[d]=class extends l{constructor(){super(),Object.defineProperty(this,"message",{value:c.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${d}]`,this.stack,delete this.name}get code(){return d}set code(k){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:k,writable:!0})}toString(){return`${this.name} [${d}]: ${this.message}`}}}ne("ERR_BUFFER_OUT_OF_BOUNDS",function(d){return d?`${d} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ne("ERR_INVALID_ARG_TYPE",function(d,c){return`The "${d}" argument must be of type number. Received type ${typeof c}`},TypeError),ne("ERR_OUT_OF_RANGE",function(d,c,l){let A=`The value of "${d}" is out of range.`,k=l;return Number.isInteger(l)&&Math.abs(l)>2**32?k=g(String(l)):typeof l=="bigint"&&(k=String(l),(l>BigInt(2)**BigInt(32)||l<-(BigInt(2)**BigInt(32)))&&(k=g(k)),k+="n"),A+=` It must be ${c}. Received ${k}`,A},RangeError);function g(d){let c="",l=d.length;const A=d[0]==="-"?1:0;for(;l>=A+4;l-=3)c=`_${d.slice(l-3,l)}${c}`;return`${d.slice(0,l)}${c}`}function b(d,c,l){F(c,"offset"),(d[c]===void 0||d[c+l]===void 0)&&R(c,d.length-(l+1))}function v(d,c,l,A,k,z){if(d>l||d<c){const j=typeof c=="bigint"?"n":"";let ge;throw z>3?c===0||c===BigInt(0)?ge=`>= 0${j} and < 2${j} ** ${(z+1)*8}${j}`:ge=`>= -(2${j} ** ${(z+1)*8-1}${j}) and < 2 ** ${(z+1)*8-1}${j}`:ge=`>= ${c}${j} and <= ${l}${j}`,new J.ERR_OUT_OF_RANGE("value",ge,d)}b(A,k,z)}function F(d,c){if(typeof d!="number")throw new J.ERR_INVALID_ARG_TYPE(c,"number",d)}function R(d,c,l){throw Math.floor(d)!==d?(F(d,l),new J.ERR_OUT_OF_RANGE(l||"offset","an integer",d)):c<0?new J.ERR_BUFFER_OUT_OF_BOUNDS:new J.ERR_OUT_OF_RANGE(l||"offset",`>= ${l?1:0} and <= ${c}`,d)}const P=/[^+/0-9A-Za-z-_]/g;function h(d){if(d=d.split("=")[0],d=d.trim().replace(P,""),d.length<2)return"";for(;d.length%4!==0;)d=d+"=";return d}function s(d,c){c=c||1/0;let l;const A=d.length;let k=null;const z=[];for(let j=0;j<A;++j){if(l=d.charCodeAt(j),l>55295&&l<57344){if(!k){if(l>56319){(c-=3)>-1&&z.push(239,191,189);continue}else if(j+1===A){(c-=3)>-1&&z.push(239,191,189);continue}k=l;continue}if(l<56320){(c-=3)>-1&&z.push(239,191,189),k=l;continue}l=(k-55296<<10|l-56320)+65536}else k&&(c-=3)>-1&&z.push(239,191,189);if(k=null,l<128){if((c-=1)<0)break;z.push(l)}else if(l<2048){if((c-=2)<0)break;z.push(l>>6|192,l&63|128)}else if(l<65536){if((c-=3)<0)break;z.push(l>>12|224,l>>6&63|128,l&63|128)}else if(l<1114112){if((c-=4)<0)break;z.push(l>>18|240,l>>12&63|128,l>>6&63|128,l&63|128)}else throw new Error("Invalid code point")}return z}function o(d){const c=[];for(let l=0;l<d.length;++l)c.push(d.charCodeAt(l)&255);return c}function p(d,c){let l,A,k;const z=[];for(let j=0;j<d.length&&!((c-=2)<0);++j)l=d.charCodeAt(j),A=l>>8,k=l%256,z.push(k),z.push(A);return z}function m(d){return e.toByteArray(h(d))}function I(d,c,l,A){let k;for(k=0;k<A&&!(k+l>=c.length||k>=d.length);++k)c[k+l]=d[k];return k}function H(d,c){return d instanceof c||d!=null&&d.constructor!=null&&d.constructor.name!=null&&d.constructor.name===c.name}function ie(d){return d!==d}const ue=function(){const d="0123456789abcdef",c=new Array(256);for(let l=0;l<16;++l){const A=l*16;for(let k=0;k<16;++k)c[A+k]=d[l]+d[k]}return c}();function he(d){return typeof BigInt>"u"?be:d}function be(){throw new Error("BigInt not supported")}})(mo);var Ki;(function(t){t[t.SysFatal=1]="SysFatal",t[t.SysTransient=2]="SysTransient",t[t.DestinationInvalid=3]="DestinationInvalid",t[t.CanisterReject=4]="CanisterReject",t[t.CanisterError=5]="CanisterError"})(Ki||(Ki={}));const Hc="modulepreload",jc=function(t){return"/"+t},Ts={},zc=function(e,r,n){if(!r||r.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(r.map(u=>{if(u=jc(u),u in Ts)return;Ts[u]=!0;const f=u.endsWith(".css"),a=f?'[rel="stylesheet"]':"";if(!!n)for(let x=i.length-1;x>=0;x--){const N=i[x];if(N.href===u&&(!f||N.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${a}`))return;const _=document.createElement("link");if(_.rel=f?"stylesheet":Hc,f||(_.as="script",_.crossOrigin=""),_.href=u,document.head.appendChild(_),f)return new Promise((x,N)=>{_.addEventListener("load",x),_.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${u}`)))})})).then(()=>e()).catch(u=>{const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u})},Zn="abcdefghijklmnopqrstuvwxyz234567",$r=Object.create(null);for(let t=0;t<Zn.length;t++)$r[Zn[t]]=t;$r[0]=$r.o;$r[1]=$r.i;function Yc(t){let e=0,r=0,n="";function i(u){return e<0?r|=u>>-e:r=u<<e&248,e>3?(e-=8,1):(e<4&&(n+=Zn[r>>3],e+=5),0)}for(let u=0;u<t.length;)u+=i(t[u]);return n+(e<0?Zn[r>>3]:"")}function Kc(t){let e=0,r=0;const n=new Uint8Array(t.length*4/3|0);let i=0;function u(f){let a=$r[f.toLowerCase()];if(a===void 0)throw new Error(`Invalid character: ${JSON.stringify(f)}`);a<<=3,r|=a>>>e,e+=5,e>=8&&(n[i++]=r,e-=8,e>0?r=a<<5-e&255:r=0)}for(const f of t)u(f);return n.slice(0,i)}const Wc=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function Zc(t){const e=new Uint8Array(t);let r=-1;for(let n=0;n<e.length;n++){const u=(e[n]^r)&255;r=Wc[u]^r>>>8}return(r^-1)>>>0}const br=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ls(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Lc(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Je(t,...e){if(!ls(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function vs(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Xc(t,e){Je(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function rn(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Ni(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function xt(t,e){return t<<32-e|t>>>e}const _o=(()=>typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function")(),Jc=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Cr(t){if(Je(t),_o)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=Jc[t[r]];return e}const Ot={_0:48,_9:57,A:65,F:70,a:97,f:102};function Ss(t){if(t>=Ot._0&&t<=Ot._9)return t-Ot._0;if(t>=Ot.A&&t<=Ot.F)return t-(Ot.A-10);if(t>=Ot.a&&t<=Ot.f)return t-(Ot.a-10)}function xo(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(_o)return Uint8Array.fromHex(t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,u=0;i<r;i++,u+=2){const f=Ss(t.charCodeAt(u)),a=Ss(t.charCodeAt(u+1));if(f===void 0||a===void 0){const w=t[u]+t[u+1];throw new Error('hex string expected, got non-hex character "'+w+'" at index '+u)}n[i]=f*16+a}return n}function ii(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Eo(t){return typeof t=="string"&&(t=ii(t)),Je(t),t}function $e(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];Je(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const u=t[n];r.set(u,i),i+=u.length}return r}class Qc{}function hs(t){const e=n=>t().update(Eo(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Bo(t=32){if(br&&typeof br.getRandomValues=="function")return br.getRandomValues(new Uint8Array(t));if(br&&typeof br.randomBytes=="function")return Uint8Array.from(br.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function Dc(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),u=BigInt(4294967295),f=Number(r>>i&u),a=Number(r&u),w=n?4:0,_=n?0:4;t.setUint32(e+w,f,n),t.setUint32(e+_,a,n)}function eu(t,e,r){return t&e^~t&r}function tu(t,e,r){return t&e^t&r^e&r}class Ao extends Qc{constructor(e,r,n,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.buffer=new Uint8Array(e),this.view=Ni(this.buffer)}update(e){vs(this),e=Eo(e),Je(e);const{view:r,buffer:n,blockLen:i}=this,u=e.length;for(let f=0;f<u;){const a=Math.min(i-this.pos,u-f);if(a===i){const w=Ni(e);for(;i<=u-f;f+=i)this.process(w,f);continue}n.set(e.subarray(f,f+a),this.pos),this.pos+=a,f+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){vs(this),Xc(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:u}=this;let{pos:f}=this;r[f++]=128,rn(this.buffer.subarray(f)),this.padOffset>i-f&&(this.process(n,0),f=0);for(let N=f;N<i;N++)r[N]=0;Dc(n,i-8,BigInt(this.length*8),u),this.process(n,0);const a=Ni(e),w=this.outputLen;if(w%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const _=w/4,x=this.get();if(_>x.length)throw new Error("_sha2: outputLen bigger than state");for(let N=0;N<_;N++)a.setUint32(4*N,x[N],u)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:u,destroyed:f,pos:a}=this;return e.destroyed=f,e.finished=u,e.length=i,e.pos=a,i%r&&e.buffer.set(n),e}clone(){return this._cloneInto()}}const zt=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Yt=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),Qe=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),mn=BigInt(2**32-1),Ns=BigInt(32);function ru(t,e=!1){return e?{h:Number(t&mn),l:Number(t>>Ns&mn)}:{h:Number(t>>Ns&mn)|0,l:Number(t&mn)|0}}function nu(t,e=!1){const r=t.length;let n=new Uint32Array(r),i=new Uint32Array(r);for(let u=0;u<r;u++){const{h:f,l:a}=ru(t[u],e);[n[u],i[u]]=[f,a]}return[n,i]}const Is=(t,e,r)=>t>>>r,Us=(t,e,r)=>t<<32-r|e>>>r,_r=(t,e,r)=>t>>>r|e<<32-r,xr=(t,e,r)=>t<<32-r|e>>>r,bn=(t,e,r)=>t<<64-r|e>>>r-32,_n=(t,e,r)=>t>>>r-32|e<<64-r;function Mt(t,e,r,n){const i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}const iu=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),su=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,ou=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),au=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,cu=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),uu=(t,e,r,n,i,u)=>e+r+n+i+u+(t/2**32|0)|0,fu=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Kt=new Uint32Array(64);class To extends Ao{constructor(e=32){super(64,e,8,!1),this.A=zt[0]|0,this.B=zt[1]|0,this.C=zt[2]|0,this.D=zt[3]|0,this.E=zt[4]|0,this.F=zt[5]|0,this.G=zt[6]|0,this.H=zt[7]|0}get(){const{A:e,B:r,C:n,D:i,E:u,F:f,G:a,H:w}=this;return[e,r,n,i,u,f,a,w]}set(e,r,n,i,u,f,a,w){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=u|0,this.F=f|0,this.G=a|0,this.H=w|0}process(e,r){for(let N=0;N<16;N++,r+=4)Kt[N]=e.getUint32(r,!1);for(let N=16;N<64;N++){const M=Kt[N-15],T=Kt[N-2],y=xt(M,7)^xt(M,18)^M>>>3,G=xt(T,17)^xt(T,19)^T>>>10;Kt[N]=G+Kt[N-7]+y+Kt[N-16]|0}let{A:n,B:i,C:u,D:f,E:a,F:w,G:_,H:x}=this;for(let N=0;N<64;N++){const M=xt(a,6)^xt(a,11)^xt(a,25),T=x+M+eu(a,w,_)+fu[N]+Kt[N]|0,G=(xt(n,2)^xt(n,13)^xt(n,22))+tu(n,i,u)|0;x=_,_=w,w=a,a=f+T|0,f=u,u=i,i=n,n=T+G|0}n=n+this.A|0,i=i+this.B|0,u=u+this.C|0,f=f+this.D|0,a=a+this.E|0,w=w+this.F|0,_=_+this.G|0,x=x+this.H|0,this.set(n,i,u,f,a,w,_,x)}roundClean(){rn(Kt)}destroy(){this.set(0,0,0,0,0,0,0,0),rn(this.buffer)}}class lu extends To{constructor(){super(28),this.A=Yt[0]|0,this.B=Yt[1]|0,this.C=Yt[2]|0,this.D=Yt[3]|0,this.E=Yt[4]|0,this.F=Yt[5]|0,this.G=Yt[6]|0,this.H=Yt[7]|0}}const vo=(()=>nu(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))))(),hu=(()=>vo[0])(),du=(()=>vo[1])(),Wt=new Uint32Array(80),Zt=new Uint32Array(80);class pu extends Ao{constructor(e=64){super(128,e,16,!1),this.Ah=Qe[0]|0,this.Al=Qe[1]|0,this.Bh=Qe[2]|0,this.Bl=Qe[3]|0,this.Ch=Qe[4]|0,this.Cl=Qe[5]|0,this.Dh=Qe[6]|0,this.Dl=Qe[7]|0,this.Eh=Qe[8]|0,this.El=Qe[9]|0,this.Fh=Qe[10]|0,this.Fl=Qe[11]|0,this.Gh=Qe[12]|0,this.Gl=Qe[13]|0,this.Hh=Qe[14]|0,this.Hl=Qe[15]|0}get(){const{Ah:e,Al:r,Bh:n,Bl:i,Ch:u,Cl:f,Dh:a,Dl:w,Eh:_,El:x,Fh:N,Fl:M,Gh:T,Gl:y,Hh:G,Hl:V}=this;return[e,r,n,i,u,f,a,w,_,x,N,M,T,y,G,V]}set(e,r,n,i,u,f,a,w,_,x,N,M,T,y,G,V){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=u|0,this.Cl=f|0,this.Dh=a|0,this.Dl=w|0,this.Eh=_|0,this.El=x|0,this.Fh=N|0,this.Fl=M|0,this.Gh=T|0,this.Gl=y|0,this.Hh=G|0,this.Hl=V|0}process(e,r){for(let Z=0;Z<16;Z++,r+=4)Wt[Z]=e.getUint32(r),Zt[Z]=e.getUint32(r+=4);for(let Z=16;Z<80;Z++){const se=Wt[Z-15]|0,S=Zt[Z-15]|0,L=_r(se,S,1)^_r(se,S,8)^Is(se,S,7),X=xr(se,S,1)^xr(se,S,8)^Us(se,S,7),Q=Wt[Z-2]|0,q=Zt[Z-2]|0,C=_r(Q,q,19)^bn(Q,q,61)^Is(Q,q,6),ee=xr(Q,q,19)^_n(Q,q,61)^Us(Q,q,6),te=ou(X,ee,Zt[Z-7],Zt[Z-16]),B=au(te,L,C,Wt[Z-7],Wt[Z-16]);Wt[Z]=B|0,Zt[Z]=te|0}let{Ah:n,Al:i,Bh:u,Bl:f,Ch:a,Cl:w,Dh:_,Dl:x,Eh:N,El:M,Fh:T,Fl:y,Gh:G,Gl:V,Hh:W,Hl:K}=this;for(let Z=0;Z<80;Z++){const se=_r(N,M,14)^_r(N,M,18)^bn(N,M,41),S=xr(N,M,14)^xr(N,M,18)^_n(N,M,41),L=N&T^~N&G,X=M&y^~M&V,Q=cu(K,S,X,du[Z],Zt[Z]),q=uu(Q,W,se,L,hu[Z],Wt[Z]),C=Q|0,ee=_r(n,i,28)^bn(n,i,34)^bn(n,i,39),te=xr(n,i,28)^_n(n,i,34)^_n(n,i,39),B=n&u^n&a^u&a,U=i&f^i&w^f&w;W=G|0,K=V|0,G=T|0,V=y|0,T=N|0,y=M|0,{h:N,l:M}=Mt(_|0,x|0,q|0,C|0),_=a|0,x=w|0,a=u|0,w=f|0,u=n|0,f=i|0;const $=iu(C,te,U);n=su($,q,ee,B),i=$|0}({h:n,l:i}=Mt(this.Ah|0,this.Al|0,n|0,i|0)),{h:u,l:f}=Mt(this.Bh|0,this.Bl|0,u|0,f|0),{h:a,l:w}=Mt(this.Ch|0,this.Cl|0,a|0,w|0),{h:_,l:x}=Mt(this.Dh|0,this.Dl|0,_|0,x|0),{h:N,l:M}=Mt(this.Eh|0,this.El|0,N|0,M|0),{h:T,l:y}=Mt(this.Fh|0,this.Fl|0,T|0,y|0),{h:G,l:V}=Mt(this.Gh|0,this.Gl|0,G|0,V|0),{h:W,l:K}=Mt(this.Hh|0,this.Hl|0,W|0,K|0),this.set(n,i,u,f,a,w,_,x,N,M,T,y,G,V,W,K)}roundClean(){rn(Wt,Zt)}destroy(){rn(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const ds=hs(()=>new To),yu=hs(()=>new lu),wu=hs(()=>new pu),gu=ds,mu=yu;function bu(t){return mu.create().update(new Uint8Array(t)).digest()}const xn="__principal__",_u=2,Rs=4,xu="aaaaa-aa",Eu=t=>{var e;return new Uint8Array(((e=t.match(/.{1,2}/g))!==null&&e!==void 0?e:[]).map(r=>parseInt(r,16)))},Bu=t=>t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),"");let xe=class In{constructor(e){this._arr=e,this._isPrincipal=!0}static anonymous(){return new this(new Uint8Array([Rs]))}static managementCanister(){return this.fromText(xu)}static selfAuthenticating(e){const r=bu(e);return new this(new Uint8Array([...r,_u]))}static from(e){if(typeof e=="string")return In.fromText(e);if(Object.getPrototypeOf(e)===Uint8Array.prototype)return new In(e);if(typeof e=="object"&&e!==null&&e._isPrincipal===!0)return new In(e._arr);throw new Error(`Impossible to convert ${JSON.stringify(e)} to Principal.`)}static fromHex(e){return new this(Eu(e))}static fromText(e){let r=e;if(e.includes(xn)){const f=JSON.parse(e);xn in f&&(r=f[xn])}const n=r.toLowerCase().replace(/-/g,"");let i=Kc(n);i=i.slice(4,i.length);const u=new this(i);if(u.toText()!==r)throw new Error(`Principal "${u.toText()}" does not have a valid checksum (original value "${r}" may not be a valid Principal ID).`);return u}static fromUint8Array(e){return new this(e)}isAnonymous(){return this._arr.byteLength===1&&this._arr[0]===Rs}toUint8Array(){return this._arr}toHex(){return Bu(this._arr).toUpperCase()}toText(){const e=new ArrayBuffer(4);new DataView(e).setUint32(0,Zc(this._arr));const n=new Uint8Array(e),i=Uint8Array.from(this._arr),u=new Uint8Array([...n,...i]),a=Yc(u).match(/.{1,5}/g);if(!a)throw new Error;return a.join("-")}toString(){return this.toText()}toJSON(){return{[xn]:this.toText()}}compareTo(e){for(let r=0;r<Math.min(this._arr.length,e._arr.length);r++){if(this._arr[r]<e._arr[r])return"lt";if(this._arr[r]>e._arr[r])return"gt"}return this._arr.length<e._arr.length?"lt":this._arr.length>e._arr.length?"gt":"eq"}ltEq(e){const r=this.compareTo(e);return r=="lt"||r=="eq"}gtEq(e){const r=this.compareTo(e);return r=="gt"||r=="eq"}};function Rt(...t){const e=new Uint8Array(t.reduce((n,i)=>n+i.byteLength,0));let r=0;for(const n of t)e.set(new Uint8Array(n),r),r+=n.byteLength;return e.buffer}function Ke(t){return[...new Uint8Array(t)].map(e=>e.toString(16).padStart(2,"0")).join("")}const Au=new RegExp(/^[0-9a-fA-F]+$/);function Ln(t){if(!Au.test(t))throw new Error("Invalid hexadecimal string.");const e=[...t].reduce((r,n,i)=>(r[i/2|0]=(r[i/2|0]||"")+n,r),[]).map(r=>Number.parseInt(r,16));return new Uint8Array(e).buffer}function So(t,e){if(t.byteLength!==e.byteLength)return t.byteLength-e.byteLength;const r=new Uint8Array(t),n=new Uint8Array(e);for(let i=0;i<r.length;i++)if(r[i]!==n[i])return r[i]-n[i];return 0}function si(t,e){return So(t,e)===0}function Un(t){return new DataView(t.buffer,t.byteOffset,t.byteLength).buffer}function Kr(t){return t instanceof Uint8Array?Un(t):t instanceof ArrayBuffer?t:Array.isArray(t)?Un(new Uint8Array(t)):"buffer"in t?Kr(t.buffer):Un(new Uint8Array(t))}class Pe extends Error{constructor(e){super(e),this.message=e,this.name="AgentError",this.__proto__=Pe.prototype,Object.setPrototypeOf(this,Pe.prototype)}}function Ue(...t){const e=new Uint8Array(t.reduce((n,i)=>n+i.byteLength,0));let r=0;for(const n of t)e.set(new Uint8Array(n),r),r+=n.byteLength;return e}class Hr{constructor(e,r=(e==null?void 0:e.byteLength)||0){this._buffer=Xn(e||new ArrayBuffer(0)),this._view=new Uint8Array(this._buffer,0,r)}save(){return this._view}restore(e){this._view=e}get buffer(){return Xn(this._view.slice())}get byteLength(){return this._view.byteLength}read(e){const r=this._view.subarray(0,e);return this._view=this._view.subarray(e),r.slice().buffer}readUint8(){const e=this._view[0];return this._view=this._view.subarray(1),e}write(e){const r=new Uint8Array(e),n=this._view.byteLength;this._view.byteOffset+this._view.byteLength+r.byteLength>=this._buffer.byteLength?this.alloc(r.byteLength):this._view=new Uint8Array(this._buffer,this._view.byteOffset,this._view.byteLength+r.byteLength),this._view.set(r,n)}get end(){return this._view.byteLength===0}alloc(e){const r=new ArrayBuffer((this._buffer.byteLength+e)*1.2|0),n=new Uint8Array(r,0,this._view.byteLength+e);n.set(this._view),this._buffer=r,this._view=n}}function Ii(t){return new DataView(t.buffer,t.byteOffset,t.byteLength).buffer}function Xn(t){return t instanceof Uint8Array?Ii(t):t instanceof ArrayBuffer?t:Array.isArray(t)?Ii(new Uint8Array(t)):"buffer"in t?Xn(t.buffer):Ii(new Uint8Array(t))}function Tu(t){const r=new TextEncoder().encode(t);let n=0;for(const i of r)n=(n*223+i)%2**32;return n}function Ut(t){if(/^_\d+_$/.test(t)||/^_0x[0-9a-fA-F]+_$/.test(t)){const e=+t.slice(1,-1);if(Number.isSafeInteger(e)&&e>=0&&e<2**32)return e}return Tu(t)}function No(){throw new Error("unexpected end of buffer")}function hr(t,e){return t.byteLength<e&&No(),t.read(e)}function dr(t){const e=t.readUint8();return e===void 0&&No(),e}function ke(t){if(typeof t=="number"&&(t=BigInt(t)),t<BigInt(0))throw new Error("Cannot leb encode negative values.");const e=(t===BigInt(0)?0:Math.ceil(Math.log2(Number(t))))+1,r=new Hr(new ArrayBuffer(e),0);for(;;){const n=Number(t&BigInt(127));if(t/=BigInt(128),t===BigInt(0)){r.write(new Uint8Array([n]));break}else r.write(new Uint8Array([n|128]))}return r.buffer}function Ye(t){let e=BigInt(1),r=BigInt(0),n;do n=dr(t),r+=BigInt(n&127).valueOf()*e,e*=BigInt(128);while(n>=128);return r}function He(t){typeof t=="number"&&(t=BigInt(t));const e=t<BigInt(0);e&&(t=-t-BigInt(1));const r=(t===BigInt(0)?0:Math.ceil(Math.log2(Number(t))))+1,n=new Hr(new ArrayBuffer(r),0);for(;;){const u=i(t);if(t/=BigInt(128),e&&t===BigInt(0)&&u&64||!e&&t===BigInt(0)&&!(u&64)){n.write(new Uint8Array([u]));break}else n.write(new Uint8Array([u|128]))}function i(u){const f=u%BigInt(128);return Number(e?BigInt(128)-f-BigInt(1):f)}return n.buffer}function Xt(t){const e=new Uint8Array(t.buffer);let r=0;for(;r<e.byteLength;r++)if(e[r]<128){if(!(e[r]&64))return Ye(t);break}const n=new Uint8Array(hr(t,r+1));let i=BigInt(0);for(let u=n.byteLength-1;u>=0;u--)i=i*BigInt(128)+BigInt(128-(n[u]&127)-1);return-i-BigInt(1)}function vu(t,e){if(BigInt(t)<BigInt(0))throw new Error("Cannot write negative values.");return Io(t,e)}function Io(t,e){t=BigInt(t);const r=new Hr(new ArrayBuffer(Math.min(1,e)),0);let n=0,i=BigInt(256),u=BigInt(0),f=Number(t%i);for(r.write(new Uint8Array([f]));++n<e;)t<0&&u===BigInt(0)&&f!==0&&(u=BigInt(1)),f=Number((t/i-u)%BigInt(256)),r.write(new Uint8Array([f])),i*=BigInt(256);return r.buffer}function Uo(t,e){let r=BigInt(dr(t)),n=BigInt(1),i=0;for(;++i<e;){n*=BigInt(256);const u=BigInt(dr(t));r=r+n*u}return r}function Su(t,e){let r=Uo(t,e);const n=BigInt(2)**(BigInt(8)*BigInt(e-1)+BigInt(7));return r>=n&&(r-=n*BigInt(2)),r}function Wi(t){const e=BigInt(t);if(t<0)throw new RangeError("Input must be non-negative");return BigInt(1)<<e}const Rn="DIDL",Fs=400;function nn(t,e,r){return t.map((n,i)=>r(n,e[i]))}class Nu{constructor(){this._typs=[],this._idx=new Map}has(e){return this._idx.has(e.name)}add(e,r){const n=this._typs.length;this._idx.set(e.name,n),this._typs.push(r)}merge(e,r){const n=this._idx.get(e.name),i=this._idx.get(r);if(n===void 0)throw new Error("Missing type index for "+e);if(i===void 0)throw new Error("Missing type index for "+r);this._typs[n]=this._typs[i],this._typs.splice(i,1),this._idx.delete(r)}encode(){const e=ke(this._typs.length),r=Ue(...this._typs);return Ue(e,r)}indexOf(e){if(!this._idx.has(e))throw new Error("Missing type index for "+e);return He(this._idx.get(e)||0)}}class Iu{visitType(e,r){throw new Error("Not implemented")}visitPrimitive(e,r){return this.visitType(e,r)}visitEmpty(e,r){return this.visitPrimitive(e,r)}visitBool(e,r){return this.visitPrimitive(e,r)}visitNull(e,r){return this.visitPrimitive(e,r)}visitReserved(e,r){return this.visitPrimitive(e,r)}visitText(e,r){return this.visitPrimitive(e,r)}visitNumber(e,r){return this.visitPrimitive(e,r)}visitInt(e,r){return this.visitNumber(e,r)}visitNat(e,r){return this.visitNumber(e,r)}visitFloat(e,r){return this.visitPrimitive(e,r)}visitFixedInt(e,r){return this.visitNumber(e,r)}visitFixedNat(e,r){return this.visitNumber(e,r)}visitPrincipal(e,r){return this.visitPrimitive(e,r)}visitConstruct(e,r){return this.visitType(e,r)}visitVec(e,r,n){return this.visitConstruct(e,n)}visitOpt(e,r,n){return this.visitConstruct(e,n)}visitRecord(e,r,n){return this.visitConstruct(e,n)}visitTuple(e,r,n){const i=r.map((u,f)=>[`_${f}_`,u]);return this.visitRecord(e,i,n)}visitVariant(e,r,n){return this.visitConstruct(e,n)}visitRec(e,r,n){return this.visitConstruct(r,n)}visitFunc(e,r){return this.visitConstruct(e,r)}visitService(e,r){return this.visitConstruct(e,r)}}class oi{display(){return this.name}valueToString(e){return Ce(e)}buildTypeTable(e){e.has(this)||this._buildTypeTableImpl(e)}}class pt extends oi{checkType(e){if(this.name!==e.name)throw new Error(`type mismatch: type on the wire ${e.name}, expect type ${this.name}`);return e}_buildTypeTableImpl(e){}}class er extends oi{checkType(e){if(e instanceof Ht){const r=e.getType();if(typeof r>"u")throw new Error("type mismatch with uninitialized type");return r}throw new Error(`type mismatch: type on the wire ${e.name}, expect type ${this.name}`)}encodeType(e){return e.indexOf(this.name)}}class Ro extends pt{accept(e,r){return e.visitEmpty(this,r)}covariant(e){throw new Error(`Invalid ${this.display()} argument: ${Ce(e)}`)}encodeValue(){throw new Error("Empty cannot appear as a function argument")}valueToString(){throw new Error("Empty cannot appear as a value")}encodeType(){return He(-17)}decodeValue(){throw new Error("Empty cannot appear as an output")}get name(){return"empty"}}class Fo extends oi{checkType(e){throw new Error("Method not implemented for unknown.")}accept(e,r){throw e.visitType(this,r)}covariant(e){throw new Error(`Invalid ${this.display()} argument: ${Ce(e)}`)}encodeValue(){throw new Error("Unknown cannot appear as a function argument")}valueToString(){throw new Error("Unknown cannot appear as a value")}encodeType(){throw new Error("Unknown cannot be serialized")}decodeValue(e,r){let n=r.decodeValue(e,r);Object(n)!==n&&(n=Object(n));let i;return r instanceof Ht?i=()=>r.getType():i=()=>r,Object.defineProperty(n,"type",{value:i,writable:!0,enumerable:!1,configurable:!0}),n}_buildTypeTableImpl(){throw new Error("Unknown cannot be serialized")}get name(){return"Unknown"}}class Oo extends pt{accept(e,r){return e.visitBool(this,r)}covariant(e){if(typeof e=="boolean")return!0;throw new Error(`Invalid ${this.display()} argument: ${Ce(e)}`)}encodeValue(e){return new Uint8Array([e?1:0])}encodeType(){return He(-2)}decodeValue(e,r){switch(this.checkType(r),dr(e)){case 0:return!1;case 1:return!0;default:throw new Error("Boolean value out of range")}}get name(){return"bool"}}class Jn extends pt{accept(e,r){return e.visitNull(this,r)}covariant(e){if(e===null)return!0;throw new Error(`Invalid ${this.display()} argument: ${Ce(e)}`)}encodeValue(){return new ArrayBuffer(0)}encodeType(){return He(-1)}decodeValue(e,r){return this.checkType(r),null}get name(){return"null"}}class qr extends pt{accept(e,r){return e.visitReserved(this,r)}covariant(e){return!0}encodeValue(){return new ArrayBuffer(0)}encodeType(){return He(-16)}decodeValue(e,r){return r.name!==this.name&&r.decodeValue(e,r),null}get name(){return"reserved"}}class Mo extends pt{accept(e,r){return e.visitText(this,r)}covariant(e){if(typeof e=="string")return!0;throw new Error(`Invalid ${this.display()} argument: ${Ce(e)}`)}encodeValue(e){const r=new TextEncoder().encode(e),n=ke(r.byteLength);return Ue(n,r)}encodeType(){return He(-15)}decodeValue(e,r){this.checkType(r);const n=Ye(e),i=hr(e,Number(n));return new TextDecoder("utf8",{fatal:!0}).decode(i)}get name(){return"text"}valueToString(e){return'"'+e+'"'}}class Po extends pt{accept(e,r){return e.visitInt(this,r)}covariant(e){if(typeof e=="bigint"||Number.isInteger(e))return!0;throw new Error(`Invalid ${this.display()} argument: ${Ce(e)}`)}encodeValue(e){return He(e)}encodeType(){return He(-4)}decodeValue(e,r){return this.checkType(r),Xt(e)}get name(){return"int"}valueToString(e){return e.toString()}}class ko extends pt{accept(e,r){return e.visitNat(this,r)}covariant(e){if(typeof e=="bigint"&&e>=BigInt(0)||Number.isInteger(e)&&e>=0)return!0;throw new Error(`Invalid ${this.display()} argument: ${Ce(e)}`)}encodeValue(e){return ke(e)}encodeType(){return He(-3)}decodeValue(e,r){return this.checkType(r),Ye(e)}get name(){return"nat"}valueToString(e){return e.toString()}}class ps extends pt{constructor(e){if(super(),this._bits=e,e!==32&&e!==64)throw new Error("not a valid float type")}accept(e,r){return e.visitFloat(this,r)}covariant(e){if(typeof e=="number"||e instanceof Number)return!0;throw new Error(`Invalid ${this.display()} argument: ${Ce(e)}`)}encodeValue(e){const r=new ArrayBuffer(this._bits/8),n=new DataView(r);return this._bits===32?n.setFloat32(0,e,!0):n.setFloat64(0,e,!0),r}encodeType(){const e=this._bits===32?-13:-14;return He(e)}decodeValue(e,r){this.checkType(r);const n=hr(e,this._bits/8),i=new DataView(n);return this._bits===32?i.getFloat32(0,!0):i.getFloat64(0,!0)}get name(){return"float"+this._bits}valueToString(e){return e.toString()}}class pr extends pt{constructor(e){super(),this._bits=e}accept(e,r){return e.visitFixedInt(this,r)}covariant(e){const r=Wi(this._bits-1)*BigInt(-1),n=Wi(this._bits-1)-BigInt(1);let i=!1;if(typeof e=="bigint")i=e>=r&&e<=n;else if(Number.isInteger(e)){const u=BigInt(e);i=u>=r&&u<=n}else i=!1;if(i)return!0;throw new Error(`Invalid ${this.display()} argument: ${Ce(e)}`)}encodeValue(e){return Io(e,this._bits/8)}encodeType(){const e=Math.log2(this._bits)-3;return He(-9-e)}decodeValue(e,r){this.checkType(r);const n=Su(e,this._bits/8);return this._bits<=32?Number(n):n}get name(){return`int${this._bits}`}valueToString(e){return e.toString()}}class Dt extends pt{constructor(e){super(),this._bits=e}accept(e,r){return e.visitFixedNat(this,r)}covariant(e){const r=Wi(this._bits);let n=!1;if(typeof e=="bigint"&&e>=BigInt(0)?n=e<r:Number.isInteger(e)&&e>=0?n=BigInt(e)<r:n=!1,n)return!0;throw new Error(`Invalid ${this.display()} argument: ${Ce(e)}`)}encodeValue(e){return vu(e,this._bits/8)}encodeType(){const e=Math.log2(this._bits)-3;return He(-5-e)}decodeValue(e,r){this.checkType(r);const n=Uo(e,this._bits/8);return this._bits<=32?Number(n):n}get name(){return`nat${this._bits}`}valueToString(e){return e.toString()}}class ai extends er{constructor(e){super(),this._type=e,this._blobOptimization=!1,e instanceof Dt&&e._bits===8&&(this._blobOptimization=!0)}accept(e,r){return e.visitVec(this,this._type,r)}covariant(e){const r=this._type instanceof Dt?this._type._bits:this._type instanceof pr?this._type._bits:0;if(ArrayBuffer.isView(e)&&r==e.BYTES_PER_ELEMENT*8||Array.isArray(e)&&e.every((n,i)=>{try{return this._type.covariant(n)}catch(u){throw new Error(`Invalid ${this.display()} argument: 

index ${i} -> ${u.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${Ce(e)}`)}encodeValue(e){const r=ke(e.length);if(this._blobOptimization)return Ue(r,new Uint8Array(e));if(ArrayBuffer.isView(e))return Ue(r,new Uint8Array(e.buffer));const n=new Hr(new ArrayBuffer(r.byteLength+e.length),0);n.write(r);for(const i of e){const u=this._type.encodeValue(i);n.write(new Uint8Array(u))}return n.buffer}_buildTypeTableImpl(e){this._type.buildTypeTable(e);const r=He(-19),n=this._type.encodeType(e);e.add(this,Ue(r,n))}decodeValue(e,r){const n=this.checkType(r);if(!(n instanceof ai))throw new Error("Not a vector type");const i=Number(Ye(e));if(this._type instanceof Dt){if(this._type._bits==8)return new Uint8Array(e.read(i));if(this._type._bits==16)return new Uint16Array(e.read(i*2));if(this._type._bits==32)return new Uint32Array(e.read(i*4));if(this._type._bits==64)return new BigUint64Array(e.read(i*8))}if(this._type instanceof pr){if(this._type._bits==8)return new Int8Array(e.read(i));if(this._type._bits==16)return new Int16Array(e.read(i*2));if(this._type._bits==32)return new Int32Array(e.read(i*4));if(this._type._bits==64)return new BigInt64Array(e.read(i*8))}const u=[];for(let f=0;f<i;f++)u.push(this._type.decodeValue(e,n._type));return u}get name(){return`vec ${this._type.name}`}display(){return`vec ${this._type.display()}`}valueToString(e){return"vec {"+e.map(n=>this._type.valueToString(n)).join("; ")+"}"}}class yr extends er{constructor(e){super(),this._type=e}accept(e,r){return e.visitOpt(this,this._type,r)}covariant(e){try{if(Array.isArray(e)&&(e.length===0||e.length===1&&this._type.covariant(e[0])))return!0}catch(r){throw new Error(`Invalid ${this.display()} argument: ${Ce(e)} 

-> ${r.message}`)}throw new Error(`Invalid ${this.display()} argument: ${Ce(e)}`)}encodeValue(e){return e.length===0?new Uint8Array([0]):Ue(new Uint8Array([1]),this._type.encodeValue(e[0]))}_buildTypeTableImpl(e){this._type.buildTypeTable(e);const r=He(-18),n=this._type.encodeType(e);e.add(this,Ue(r,n))}decodeValue(e,r){if(r instanceof Jn)return[];if(r instanceof qr)return[];let n=r;if(r instanceof Ht){const i=r.getType();if(typeof i>"u")throw new Error("type mismatch with uninitialized type");n=i}if(n instanceof yr)switch(dr(e)){case 0:return[];case 1:{const i=e.save();try{return[this._type.decodeValue(e,n._type)]}catch{return e.restore(i),n._type.decodeValue(e,n._type),[]}}default:throw new Error("Not an option value")}else{if(this._type instanceof Jn||this._type instanceof yr||this._type instanceof qr)return n.decodeValue(e,n),[];{const i=e.save();try{return[this._type.decodeValue(e,r)]}catch{return e.restore(i),n.decodeValue(e,r),[]}}}}get name(){return`opt ${this._type.name}`}display(){return`opt ${this._type.display()}`}valueToString(e){return e.length===0?"null":`opt ${this._type.valueToString(e[0])}`}}class hn extends er{constructor(e={}){super(),this._fields=Object.entries(e).sort((r,n)=>Ut(r[0])-Ut(n[0]))}accept(e,r){return e.visitRecord(this,this._fields,r)}tryAsTuple(){const e=[];for(let r=0;r<this._fields.length;r++){const[n,i]=this._fields[r];if(n!==`_${r}_`)return null;e.push(i)}return e}covariant(e){if(typeof e=="object"&&this._fields.every(([r,n])=>{if(!e.hasOwnProperty(r))throw new Error(`Record is missing key "${r}".`);try{return n.covariant(e[r])}catch(i){throw new Error(`Invalid ${this.display()} argument: 

field ${r} -> ${i.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${Ce(e)}`)}encodeValue(e){const r=this._fields.map(([i])=>e[i]),n=nn(this._fields,r,([,i],u)=>i.encodeValue(u));return Ue(...n)}_buildTypeTableImpl(e){this._fields.forEach(([u,f])=>f.buildTypeTable(e));const r=He(-20),n=ke(this._fields.length),i=this._fields.map(([u,f])=>Ue(ke(Ut(u)),f.encodeType(e)));e.add(this,Ue(r,n,Ue(...i)))}decodeValue(e,r){const n=this.checkType(r);if(!(n instanceof hn))throw new Error("Not a record type");const i={};let u=0,f=0;for(;f<n._fields.length;){const[a,w]=n._fields[f];if(u>=this._fields.length){w.decodeValue(e,w),f++;continue}const[_,x]=this._fields[u],N=Ut(this._fields[u][0]),M=Ut(a);if(N===M)i[_]=x.decodeValue(e,w),u++,f++;else if(M>N)if(x instanceof yr||x instanceof qr)i[_]=[],u++;else throw new Error("Cannot find required field "+_);else w.decodeValue(e,w),f++}for(const[a,w]of this._fields.slice(u))if(w instanceof yr||w instanceof qr)i[a]=[];else throw new Error("Cannot find required field "+a);return i}get name(){return`record {${this._fields.map(([r,n])=>r+":"+n.name).join("; ")}}`}display(){return`record {${this._fields.map(([r,n])=>r+":"+n.display()).join("; ")}}`}valueToString(e){const r=this._fields.map(([i])=>e[i]);return`record {${nn(this._fields,r,([i,u],f)=>i+"="+u.valueToString(f)).join("; ")}}`}}class ci extends hn{constructor(e){const r={};e.forEach((n,i)=>r["_"+i+"_"]=n),super(r),this._components=e}accept(e,r){return e.visitTuple(this,this._components,r)}covariant(e){if(Array.isArray(e)&&e.length>=this._fields.length&&this._components.every((r,n)=>{try{return r.covariant(e[n])}catch(i){throw new Error(`Invalid ${this.display()} argument: 

index ${n} -> ${i.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${Ce(e)}`)}encodeValue(e){const r=nn(this._components,e,(n,i)=>n.encodeValue(i));return Ue(...r)}decodeValue(e,r){const n=this.checkType(r);if(!(n instanceof ci))throw new Error("not a tuple type");if(n._components.length<this._components.length)throw new Error("tuple mismatch");const i=[];for(const[u,f]of n._components.entries())u>=this._components.length?f.decodeValue(e,f):i.push(this._components[u].decodeValue(e,f));return i}display(){return`record {${this._components.map(r=>r.display()).join("; ")}}`}valueToString(e){return`record {${nn(this._components,e,(n,i)=>n.valueToString(i)).join("; ")}}`}}class ui extends er{constructor(e={}){super(),this._fields=Object.entries(e).sort((r,n)=>Ut(r[0])-Ut(n[0]))}accept(e,r){return e.visitVariant(this,this._fields,r)}covariant(e){if(typeof e=="object"&&Object.entries(e).length===1&&this._fields.every(([r,n])=>{try{return!e.hasOwnProperty(r)||n.covariant(e[r])}catch(i){throw new Error(`Invalid ${this.display()} argument: 

variant ${r} -> ${i.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${Ce(e)}`)}encodeValue(e){for(let r=0;r<this._fields.length;r++){const[n,i]=this._fields[r];if(e.hasOwnProperty(n)){const u=ke(r),f=i.encodeValue(e[n]);return Ue(u,f)}}throw Error("Variant has no data: "+e)}_buildTypeTableImpl(e){this._fields.forEach(([,u])=>{u.buildTypeTable(e)});const r=He(-21),n=ke(this._fields.length),i=this._fields.map(([u,f])=>Ue(ke(Ut(u)),f.encodeType(e)));e.add(this,Ue(r,n,...i))}decodeValue(e,r){const n=this.checkType(r);if(!(n instanceof ui))throw new Error("Not a variant type");const i=Number(Ye(e));if(i>=n._fields.length)throw Error("Invalid variant index: "+i);const[u,f]=n._fields[i];for(const[a,w]of this._fields)if(Ut(u)===Ut(a)){const _=w.decodeValue(e,f);return{[a]:_}}throw new Error("Cannot find field hash "+u)}get name(){return`variant {${this._fields.map(([r,n])=>r+":"+n.name).join("; ")}}`}display(){return`variant {${this._fields.map(([r,n])=>r+(n.name==="null"?"":`:${n.display()}`)).join("; ")}}`}valueToString(e){for(const[r,n]of this._fields)if(e.hasOwnProperty(r)){const i=n.valueToString(e[r]);return i==="null"?`variant {${r}}`:`variant {${r}=${i}}`}throw new Error("Variant has no data: "+e)}}class Ht extends er{constructor(){super(...arguments),this._id=Ht._counter++,this._type=void 0}accept(e,r){if(!this._type)throw Error("Recursive type uninitialized.");return e.visitRec(this,this._type,r)}fill(e){this._type=e}getType(){return this._type}covariant(e){if(this._type&&this._type.covariant(e))return!0;throw new Error(`Invalid ${this.display()} argument: ${Ce(e)}`)}encodeValue(e){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.encodeValue(e)}_buildTypeTableImpl(e){if(!this._type)throw Error("Recursive type uninitialized.");e.add(this,new Uint8Array([])),this._type.buildTypeTable(e),e.merge(this,this._type.name)}decodeValue(e,r){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.decodeValue(e,r)}get name(){return`rec_${this._id}`}display(){if(!this._type)throw Error("Recursive type uninitialized.");return`μ${this.name}.${this._type.name}`}valueToString(e){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.valueToString(e)}}Ht._counter=0;function ys(t){if(dr(t)!==1)throw new Error("Cannot decode principal");const r=Number(Ye(t));return xe.fromUint8Array(new Uint8Array(hr(t,r)))}class $o extends pt{accept(e,r){return e.visitPrincipal(this,r)}covariant(e){if(e&&e._isPrincipal)return!0;throw new Error(`Invalid ${this.display()} argument: ${Ce(e)}`)}encodeValue(e){const r=e.toUint8Array(),n=ke(r.byteLength);return Ue(new Uint8Array([1]),n,r)}encodeType(){return He(-24)}decodeValue(e,r){return this.checkType(r),ys(e)}get name(){return"principal"}valueToString(e){return`${this.name} "${e.toText()}"`}}class ws extends er{constructor(e,r,n=[]){super(),this.argTypes=e,this.retTypes=r,this.annotations=n}static argsToString(e,r){if(e.length!==r.length)throw new Error("arity mismatch");return"("+e.map((n,i)=>n.valueToString(r[i])).join(", ")+")"}accept(e,r){return e.visitFunc(this,r)}covariant(e){if(Array.isArray(e)&&e.length===2&&e[0]&&e[0]._isPrincipal&&typeof e[1]=="string")return!0;throw new Error(`Invalid ${this.display()} argument: ${Ce(e)}`)}encodeValue([e,r]){const n=e.toUint8Array(),i=ke(n.byteLength),u=Ue(new Uint8Array([1]),i,n),f=new TextEncoder().encode(r),a=ke(f.byteLength);return Ue(new Uint8Array([1]),u,a,f)}_buildTypeTableImpl(e){this.argTypes.forEach(_=>_.buildTypeTable(e)),this.retTypes.forEach(_=>_.buildTypeTable(e));const r=He(-22),n=ke(this.argTypes.length),i=Ue(...this.argTypes.map(_=>_.encodeType(e))),u=ke(this.retTypes.length),f=Ue(...this.retTypes.map(_=>_.encodeType(e))),a=ke(this.annotations.length),w=Ue(...this.annotations.map(_=>this.encodeAnnotation(_)));e.add(this,Ue(r,n,i,u,f,a,w))}decodeValue(e){if(dr(e)!==1)throw new Error("Cannot decode function reference");const n=ys(e),i=Number(Ye(e)),u=hr(e,i),a=new TextDecoder("utf8",{fatal:!0}).decode(u);return[n,a]}get name(){const e=this.argTypes.map(i=>i.name).join(", "),r=this.retTypes.map(i=>i.name).join(", "),n=" "+this.annotations.join(" ");return`(${e}) -> (${r})${n}`}valueToString([e,r]){return`func "${e.toText()}".${r}`}display(){const e=this.argTypes.map(i=>i.display()).join(", "),r=this.retTypes.map(i=>i.display()).join(", "),n=" "+this.annotations.join(" ");return`(${e}) → (${r})${n}`}encodeAnnotation(e){if(e==="query")return new Uint8Array([1]);if(e==="oneway")return new Uint8Array([2]);if(e==="composite_query")return new Uint8Array([3]);throw new Error("Illegal function annotation")}}class Co extends er{constructor(e){super(),this._fields=Object.entries(e).sort((r,n)=>r[0]<n[0]?-1:r[0]>n[0]?1:0)}accept(e,r){return e.visitService(this,r)}covariant(e){if(e&&e._isPrincipal)return!0;throw new Error(`Invalid ${this.display()} argument: ${Ce(e)}`)}encodeValue(e){const r=e.toUint8Array(),n=ke(r.length);return Ue(new Uint8Array([1]),n,r)}_buildTypeTableImpl(e){this._fields.forEach(([u,f])=>f.buildTypeTable(e));const r=He(-23),n=ke(this._fields.length),i=this._fields.map(([u,f])=>{const a=new TextEncoder().encode(u),w=ke(a.length);return Ue(w,a,f.encodeType(e))});e.add(this,Ue(r,n,...i))}decodeValue(e){return ys(e)}get name(){return`service {${this._fields.map(([r,n])=>r+":"+n.name).join("; ")}}`}valueToString(e){return`service "${e.toText()}"`}}function Ce(t){const e=JSON.stringify(t,(r,n)=>typeof n=="bigint"?`BigInt(${n})`:n);return e&&e.length>Fs?e.substring(0,Fs-3)+"...":e}function Zi(t,e){if(e.length<t.length)throw Error("Wrong number of message arguments");const r=new Nu;t.forEach(w=>w.buildTypeTable(r));const n=new TextEncoder().encode(Rn),i=r.encode(),u=ke(e.length),f=Ue(...t.map(w=>w.encodeType(r))),a=Ue(...nn(t,e,(w,_)=>{try{w.covariant(_)}catch(x){throw new Error(x.message+`

`)}return w.encodeValue(_)}));return Ue(n,i,u,f,a)}function qo(t,e){const r=new Hr(e);if(e.byteLength<Rn.length)throw new Error("Message length smaller than magic number");const n=hr(r,Rn.length),i=new TextDecoder().decode(n);if(i!==Rn)throw new Error("Wrong magic number: "+JSON.stringify(i));function u(T){const y=[],G=Number(Ye(T));for(let K=0;K<G;K++){const Z=Number(Xt(T));switch(Z){case-18:case-19:{const se=Number(Xt(T));y.push([Z,se]);break}case-20:case-21:{const se=[];let S=Number(Ye(T)),L;for(;S--;){const X=Number(Ye(T));if(X>=Math.pow(2,32))throw new Error("field id out of 32-bit range");if(typeof L=="number"&&L>=X)throw new Error("field id collision or not sorted");L=X;const Q=Number(Xt(T));se.push([X,Q])}y.push([Z,se]);break}case-22:{const se=[];let S=Number(Ye(T));for(;S--;)se.push(Number(Xt(T)));const L=[];let X=Number(Ye(T));for(;X--;)L.push(Number(Xt(T)));const Q=[];let q=Number(Ye(T));for(;q--;)switch(Number(Ye(T))){case 1:{Q.push("query");break}case 2:{Q.push("oneway");break}case 3:{Q.push("composite_query");break}default:throw new Error("unknown annotation")}y.push([Z,[se,L,Q]]);break}case-23:{let se=Number(Ye(T));const S=[];for(;se--;){const L=Number(Ye(T)),X=new TextDecoder().decode(hr(T,L)),Q=Xt(T);S.push([X,Q])}y.push([Z,S]);break}default:throw new Error("Illegal op_code: "+Z)}}const V=[],W=Number(Ye(T));for(let K=0;K<W;K++)V.push(Number(Xt(T)));return[y,V]}const[f,a]=u(r);if(a.length<t.length)throw new Error("Wrong number of return values");const w=f.map(T=>ua());function _(T){if(T<-24)throw new Error("future value not supported");if(T<0)switch(T){case-1:return jo;case-2:return Ho;case-3:return Ko;case-4:return Yo;case-5:return Do;case-6:return ea;case-7:return ta;case-8:return ra;case-9:return Lo;case-10:return Xo;case-11:return Jo;case-12:return Qo;case-13:return Wo;case-14:return Zo;case-15:return zo;case-16:return Vo;case-17:return Go;case-24:return na;default:throw new Error("Illegal op_code: "+T)}if(T>=f.length)throw new Error("type index out of range");return w[T]}function x(T){switch(T[0]){case-19:{const y=_(T[1]);return sa(y)}case-18:{const y=_(T[1]);return oa(y)}case-20:{const y={};for(const[W,K]of T[1]){const Z=`_${W}_`;y[Z]=_(K)}const G=aa(y),V=G.tryAsTuple();return Array.isArray(V)?ia(...V):G}case-21:{const y={};for(const[G,V]of T[1]){const W=`_${G}_`;y[W]=_(V)}return ca(y)}case-22:{const[y,G,V]=T[1];return fa(y.map(W=>_(W)),G.map(W=>_(W)),V)}case-23:{const y={},G=T[1];for(const[V,W]of G){let K=_(W);if(K instanceof Ht&&(K=K.getType()),!(K instanceof ws))throw new Error("Illegal service definition: services can only contain functions");y[V]=K}return la(y)}default:throw new Error("Illegal op_code: "+T[0])}}f.forEach((T,y)=>{if(T[0]===-22){const G=x(T);w[y].fill(G)}}),f.forEach((T,y)=>{if(T[0]!==-22){const G=x(T);w[y].fill(G)}});const N=a.map(T=>_(T)),M=t.map((T,y)=>T.decodeValue(r,N[y]));for(let T=t.length;T<N.length;T++)N[T].decodeValue(r,N[T]);if(r.byteLength>0)throw new Error("decode: Left-over bytes");return M}const Go=new Ro,Vo=new qr,Uu=new Fo,Ho=new Oo,jo=new Jn,zo=new Mo,Yo=new Po,Ko=new ko,Wo=new ps(32),Zo=new ps(64),Lo=new pr(8),Xo=new pr(16),Jo=new pr(32),Qo=new pr(64),Do=new Dt(8),ea=new Dt(16),ta=new Dt(32),ra=new Dt(64),na=new $o;function ia(...t){return new ci(t)}function sa(t){return new ai(t)}function oa(t){return new yr(t)}function aa(t){return new hn(t)}function ca(t){return new ui(t)}function ua(){return new Ht}function fa(t,e,r=[]){return new ws(t,e,r)}function la(t){return new Co(t)}const Ru=Object.freeze(Object.defineProperty({__proto__:null,Bool:Ho,BoolClass:Oo,ConstructType:er,Empty:Go,EmptyClass:Ro,FixedIntClass:pr,FixedNatClass:Dt,Float32:Wo,Float64:Zo,FloatClass:ps,Func:fa,FuncClass:ws,Int:Yo,Int16:Xo,Int32:Jo,Int64:Qo,Int8:Lo,IntClass:Po,Nat:Ko,Nat16:ea,Nat32:ta,Nat64:ra,Nat8:Do,NatClass:ko,Null:jo,NullClass:Jn,Opt:oa,OptClass:yr,PrimitiveType:pt,Principal:na,PrincipalClass:$o,Rec:ua,RecClass:Ht,Record:aa,RecordClass:hn,Reserved:Vo,ReservedClass:qr,Service:la,ServiceClass:Co,Text:zo,TextClass:Mo,Tuple:ia,TupleClass:ci,Type:oi,Unknown:Uu,UnknownClass:Fo,Variant:ca,VariantClass:ui,Vec:sa,VecClass:ai,Visitor:Iu,decode:qo,encode:Zi},Symbol.toStringTag,{value:"Module"}));var ha={},dn={};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){var e=fn,r=ln,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=K,t.INSPECT_MAX_BYTES=50;var i=2147483647;t.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=u(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function u(){try{var h=new Uint8Array(1),s={foo:function(){return 42}};return Object.setPrototypeOf(s,Uint8Array.prototype),Object.setPrototypeOf(h,s),h.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function f(h){if(h>i)throw new RangeError('The value "'+h+'" is invalid for option "size"');var s=new Uint8Array(h);return Object.setPrototypeOf(s,a.prototype),s}function a(h,s,o){if(typeof h=="number"){if(typeof s=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return N(h)}return w(h,s,o)}a.poolSize=8192;function w(h,s,o){if(typeof h=="string")return M(h,s);if(ArrayBuffer.isView(h))return y(h);if(h==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h);if(F(h,ArrayBuffer)||h&&F(h.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(F(h,SharedArrayBuffer)||h&&F(h.buffer,SharedArrayBuffer)))return G(h,s,o);if(typeof h=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var p=h.valueOf&&h.valueOf();if(p!=null&&p!==h)return a.from(p,s,o);var m=V(h);if(m)return m;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof h[Symbol.toPrimitive]=="function")return a.from(h[Symbol.toPrimitive]("string"),s,o);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h)}a.from=function(h,s,o){return w(h,s,o)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function _(h){if(typeof h!="number")throw new TypeError('"size" argument must be of type number');if(h<0)throw new RangeError('The value "'+h+'" is invalid for option "size"')}function x(h,s,o){return _(h),h<=0?f(h):s!==void 0?typeof o=="string"?f(h).fill(s,o):f(h).fill(s):f(h)}a.alloc=function(h,s,o){return x(h,s,o)};function N(h){return _(h),f(h<0?0:W(h)|0)}a.allocUnsafe=function(h){return N(h)},a.allocUnsafeSlow=function(h){return N(h)};function M(h,s){if((typeof s!="string"||s==="")&&(s="utf8"),!a.isEncoding(s))throw new TypeError("Unknown encoding: "+s);var o=Z(h,s)|0,p=f(o),m=p.write(h,s);return m!==o&&(p=p.slice(0,m)),p}function T(h){for(var s=h.length<0?0:W(h.length)|0,o=f(s),p=0;p<s;p+=1)o[p]=h[p]&255;return o}function y(h){if(F(h,Uint8Array)){var s=new Uint8Array(h);return G(s.buffer,s.byteOffset,s.byteLength)}return T(h)}function G(h,s,o){if(s<0||h.byteLength<s)throw new RangeError('"offset" is outside of buffer bounds');if(h.byteLength<s+(o||0))throw new RangeError('"length" is outside of buffer bounds');var p;return s===void 0&&o===void 0?p=new Uint8Array(h):o===void 0?p=new Uint8Array(h,s):p=new Uint8Array(h,s,o),Object.setPrototypeOf(p,a.prototype),p}function V(h){if(a.isBuffer(h)){var s=W(h.length)|0,o=f(s);return o.length===0||h.copy(o,0,0,s),o}if(h.length!==void 0)return typeof h.length!="number"||R(h.length)?f(0):T(h);if(h.type==="Buffer"&&Array.isArray(h.data))return T(h.data)}function W(h){if(h>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return h|0}function K(h){return+h!=h&&(h=0),a.alloc(+h)}a.isBuffer=function(s){return s!=null&&s._isBuffer===!0&&s!==a.prototype},a.compare=function(s,o){if(F(s,Uint8Array)&&(s=a.from(s,s.offset,s.byteLength)),F(o,Uint8Array)&&(o=a.from(o,o.offset,o.byteLength)),!a.isBuffer(s)||!a.isBuffer(o))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(s===o)return 0;for(var p=s.length,m=o.length,I=0,H=Math.min(p,m);I<H;++I)if(s[I]!==o[I]){p=s[I],m=o[I];break}return p<m?-1:m<p?1:0},a.isEncoding=function(s){switch(String(s).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(s,o){if(!Array.isArray(s))throw new TypeError('"list" argument must be an Array of Buffers');if(s.length===0)return a.alloc(0);var p;if(o===void 0)for(o=0,p=0;p<s.length;++p)o+=s[p].length;var m=a.allocUnsafe(o),I=0;for(p=0;p<s.length;++p){var H=s[p];if(F(H,Uint8Array))I+H.length>m.length?a.from(H).copy(m,I):Uint8Array.prototype.set.call(m,H,I);else if(a.isBuffer(H))H.copy(m,I);else throw new TypeError('"list" argument must be an Array of Buffers');I+=H.length}return m};function Z(h,s){if(a.isBuffer(h))return h.length;if(ArrayBuffer.isView(h)||F(h,ArrayBuffer))return h.byteLength;if(typeof h!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof h);var o=h.length,p=arguments.length>2&&arguments[2]===!0;if(!p&&o===0)return 0;for(var m=!1;;)switch(s){case"ascii":case"latin1":case"binary":return o;case"utf8":case"utf-8":return J(h).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return o*2;case"hex":return o>>>1;case"base64":return b(h).length;default:if(m)return p?-1:J(h).length;s=(""+s).toLowerCase(),m=!0}}a.byteLength=Z;function se(h,s,o){var p=!1;if((s===void 0||s<0)&&(s=0),s>this.length||((o===void 0||o>this.length)&&(o=this.length),o<=0)||(o>>>=0,s>>>=0,o<=s))return"";for(h||(h="utf8");;)switch(h){case"hex":return le(this,s,o);case"utf8":case"utf-8":return U(this,s,o);case"ascii":return D(this,s,o);case"latin1":case"binary":return re(this,s,o);case"base64":return B(this,s,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ye(this,s,o);default:if(p)throw new TypeError("Unknown encoding: "+h);h=(h+"").toLowerCase(),p=!0}}a.prototype._isBuffer=!0;function S(h,s,o){var p=h[s];h[s]=h[o],h[o]=p}a.prototype.swap16=function(){var s=this.length;if(s%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var o=0;o<s;o+=2)S(this,o,o+1);return this},a.prototype.swap32=function(){var s=this.length;if(s%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var o=0;o<s;o+=4)S(this,o,o+3),S(this,o+1,o+2);return this},a.prototype.swap64=function(){var s=this.length;if(s%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var o=0;o<s;o+=8)S(this,o,o+7),S(this,o+1,o+6),S(this,o+2,o+5),S(this,o+3,o+4);return this},a.prototype.toString=function(){var s=this.length;return s===0?"":arguments.length===0?U(this,0,s):se.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(s){if(!a.isBuffer(s))throw new TypeError("Argument must be a Buffer");return this===s?!0:a.compare(this,s)===0},a.prototype.inspect=function(){var s="",o=t.INSPECT_MAX_BYTES;return s=this.toString("hex",0,o).replace(/(.{2})/g,"$1 ").trim(),this.length>o&&(s+=" ... "),"<Buffer "+s+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(s,o,p,m,I){if(F(s,Uint8Array)&&(s=a.from(s,s.offset,s.byteLength)),!a.isBuffer(s))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof s);if(o===void 0&&(o=0),p===void 0&&(p=s?s.length:0),m===void 0&&(m=0),I===void 0&&(I=this.length),o<0||p>s.length||m<0||I>this.length)throw new RangeError("out of range index");if(m>=I&&o>=p)return 0;if(m>=I)return-1;if(o>=p)return 1;if(o>>>=0,p>>>=0,m>>>=0,I>>>=0,this===s)return 0;for(var H=I-m,ie=p-o,ue=Math.min(H,ie),he=this.slice(m,I),be=s.slice(o,p),d=0;d<ue;++d)if(he[d]!==be[d]){H=he[d],ie=be[d];break}return H<ie?-1:ie<H?1:0};function L(h,s,o,p,m){if(h.length===0)return-1;if(typeof o=="string"?(p=o,o=0):o>2147483647?o=2147483647:o<-2147483648&&(o=-2147483648),o=+o,R(o)&&(o=m?0:h.length-1),o<0&&(o=h.length+o),o>=h.length){if(m)return-1;o=h.length-1}else if(o<0)if(m)o=0;else return-1;if(typeof s=="string"&&(s=a.from(s,p)),a.isBuffer(s))return s.length===0?-1:X(h,s,o,p,m);if(typeof s=="number")return s=s&255,typeof Uint8Array.prototype.indexOf=="function"?m?Uint8Array.prototype.indexOf.call(h,s,o):Uint8Array.prototype.lastIndexOf.call(h,s,o):X(h,[s],o,p,m);throw new TypeError("val must be string, number or Buffer")}function X(h,s,o,p,m){var I=1,H=h.length,ie=s.length;if(p!==void 0&&(p=String(p).toLowerCase(),p==="ucs2"||p==="ucs-2"||p==="utf16le"||p==="utf-16le")){if(h.length<2||s.length<2)return-1;I=2,H/=2,ie/=2,o/=2}function ue(l,A){return I===1?l[A]:l.readUInt16BE(A*I)}var he;if(m){var be=-1;for(he=o;he<H;he++)if(ue(h,he)===ue(s,be===-1?0:he-be)){if(be===-1&&(be=he),he-be+1===ie)return be*I}else be!==-1&&(he-=he-be),be=-1}else for(o+ie>H&&(o=H-ie),he=o;he>=0;he--){for(var d=!0,c=0;c<ie;c++)if(ue(h,he+c)!==ue(s,c)){d=!1;break}if(d)return he}return-1}a.prototype.includes=function(s,o,p){return this.indexOf(s,o,p)!==-1},a.prototype.indexOf=function(s,o,p){return L(this,s,o,p,!0)},a.prototype.lastIndexOf=function(s,o,p){return L(this,s,o,p,!1)};function Q(h,s,o,p){o=Number(o)||0;var m=h.length-o;p?(p=Number(p),p>m&&(p=m)):p=m;var I=s.length;p>I/2&&(p=I/2);for(var H=0;H<p;++H){var ie=parseInt(s.substr(H*2,2),16);if(R(ie))return H;h[o+H]=ie}return H}function q(h,s,o,p){return v(J(s,h.length-o),h,o,p)}function C(h,s,o,p){return v(ne(s),h,o,p)}function ee(h,s,o,p){return v(b(s),h,o,p)}function te(h,s,o,p){return v(g(s,h.length-o),h,o,p)}a.prototype.write=function(s,o,p,m){if(o===void 0)m="utf8",p=this.length,o=0;else if(p===void 0&&typeof o=="string")m=o,p=this.length,o=0;else if(isFinite(o))o=o>>>0,isFinite(p)?(p=p>>>0,m===void 0&&(m="utf8")):(m=p,p=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var I=this.length-o;if((p===void 0||p>I)&&(p=I),s.length>0&&(p<0||o<0)||o>this.length)throw new RangeError("Attempt to write outside buffer bounds");m||(m="utf8");for(var H=!1;;)switch(m){case"hex":return Q(this,s,o,p);case"utf8":case"utf-8":return q(this,s,o,p);case"ascii":case"latin1":case"binary":return C(this,s,o,p);case"base64":return ee(this,s,o,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return te(this,s,o,p);default:if(H)throw new TypeError("Unknown encoding: "+m);m=(""+m).toLowerCase(),H=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function B(h,s,o){return s===0&&o===h.length?e.fromByteArray(h):e.fromByteArray(h.slice(s,o))}function U(h,s,o){o=Math.min(h.length,o);for(var p=[],m=s;m<o;){var I=h[m],H=null,ie=I>239?4:I>223?3:I>191?2:1;if(m+ie<=o){var ue,he,be,d;switch(ie){case 1:I<128&&(H=I);break;case 2:ue=h[m+1],(ue&192)===128&&(d=(I&31)<<6|ue&63,d>127&&(H=d));break;case 3:ue=h[m+1],he=h[m+2],(ue&192)===128&&(he&192)===128&&(d=(I&15)<<12|(ue&63)<<6|he&63,d>2047&&(d<55296||d>57343)&&(H=d));break;case 4:ue=h[m+1],he=h[m+2],be=h[m+3],(ue&192)===128&&(he&192)===128&&(be&192)===128&&(d=(I&15)<<18|(ue&63)<<12|(he&63)<<6|be&63,d>65535&&d<1114112&&(H=d))}}H===null?(H=65533,ie=1):H>65535&&(H-=65536,p.push(H>>>10&1023|55296),H=56320|H&1023),p.push(H),m+=ie}return Y(p)}var $=4096;function Y(h){var s=h.length;if(s<=$)return String.fromCharCode.apply(String,h);for(var o="",p=0;p<s;)o+=String.fromCharCode.apply(String,h.slice(p,p+=$));return o}function D(h,s,o){var p="";o=Math.min(h.length,o);for(var m=s;m<o;++m)p+=String.fromCharCode(h[m]&127);return p}function re(h,s,o){var p="";o=Math.min(h.length,o);for(var m=s;m<o;++m)p+=String.fromCharCode(h[m]);return p}function le(h,s,o){var p=h.length;(!s||s<0)&&(s=0),(!o||o<0||o>p)&&(o=p);for(var m="",I=s;I<o;++I)m+=P[h[I]];return m}function ye(h,s,o){for(var p=h.slice(s,o),m="",I=0;I<p.length-1;I+=2)m+=String.fromCharCode(p[I]+p[I+1]*256);return m}a.prototype.slice=function(s,o){var p=this.length;s=~~s,o=o===void 0?p:~~o,s<0?(s+=p,s<0&&(s=0)):s>p&&(s=p),o<0?(o+=p,o<0&&(o=0)):o>p&&(o=p),o<s&&(o=s);var m=this.subarray(s,o);return Object.setPrototypeOf(m,a.prototype),m};function oe(h,s,o){if(h%1!==0||h<0)throw new RangeError("offset is not uint");if(h+s>o)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(s,o,p){s=s>>>0,o=o>>>0,p||oe(s,o,this.length);for(var m=this[s],I=1,H=0;++H<o&&(I*=256);)m+=this[s+H]*I;return m},a.prototype.readUintBE=a.prototype.readUIntBE=function(s,o,p){s=s>>>0,o=o>>>0,p||oe(s,o,this.length);for(var m=this[s+--o],I=1;o>0&&(I*=256);)m+=this[s+--o]*I;return m},a.prototype.readUint8=a.prototype.readUInt8=function(s,o){return s=s>>>0,o||oe(s,1,this.length),this[s]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(s,o){return s=s>>>0,o||oe(s,2,this.length),this[s]|this[s+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(s,o){return s=s>>>0,o||oe(s,2,this.length),this[s]<<8|this[s+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(s,o){return s=s>>>0,o||oe(s,4,this.length),(this[s]|this[s+1]<<8|this[s+2]<<16)+this[s+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(s,o){return s=s>>>0,o||oe(s,4,this.length),this[s]*16777216+(this[s+1]<<16|this[s+2]<<8|this[s+3])},a.prototype.readIntLE=function(s,o,p){s=s>>>0,o=o>>>0,p||oe(s,o,this.length);for(var m=this[s],I=1,H=0;++H<o&&(I*=256);)m+=this[s+H]*I;return I*=128,m>=I&&(m-=Math.pow(2,8*o)),m},a.prototype.readIntBE=function(s,o,p){s=s>>>0,o=o>>>0,p||oe(s,o,this.length);for(var m=o,I=1,H=this[s+--m];m>0&&(I*=256);)H+=this[s+--m]*I;return I*=128,H>=I&&(H-=Math.pow(2,8*o)),H},a.prototype.readInt8=function(s,o){return s=s>>>0,o||oe(s,1,this.length),this[s]&128?(255-this[s]+1)*-1:this[s]},a.prototype.readInt16LE=function(s,o){s=s>>>0,o||oe(s,2,this.length);var p=this[s]|this[s+1]<<8;return p&32768?p|4294901760:p},a.prototype.readInt16BE=function(s,o){s=s>>>0,o||oe(s,2,this.length);var p=this[s+1]|this[s]<<8;return p&32768?p|4294901760:p},a.prototype.readInt32LE=function(s,o){return s=s>>>0,o||oe(s,4,this.length),this[s]|this[s+1]<<8|this[s+2]<<16|this[s+3]<<24},a.prototype.readInt32BE=function(s,o){return s=s>>>0,o||oe(s,4,this.length),this[s]<<24|this[s+1]<<16|this[s+2]<<8|this[s+3]},a.prototype.readFloatLE=function(s,o){return s=s>>>0,o||oe(s,4,this.length),r.read(this,s,!0,23,4)},a.prototype.readFloatBE=function(s,o){return s=s>>>0,o||oe(s,4,this.length),r.read(this,s,!1,23,4)},a.prototype.readDoubleLE=function(s,o){return s=s>>>0,o||oe(s,8,this.length),r.read(this,s,!0,52,8)},a.prototype.readDoubleBE=function(s,o){return s=s>>>0,o||oe(s,8,this.length),r.read(this,s,!1,52,8)};function fe(h,s,o,p,m,I){if(!a.isBuffer(h))throw new TypeError('"buffer" argument must be a Buffer instance');if(s>m||s<I)throw new RangeError('"value" argument is out of bounds');if(o+p>h.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(s,o,p,m){if(s=+s,o=o>>>0,p=p>>>0,!m){var I=Math.pow(2,8*p)-1;fe(this,s,o,p,I,0)}var H=1,ie=0;for(this[o]=s&255;++ie<p&&(H*=256);)this[o+ie]=s/H&255;return o+p},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(s,o,p,m){if(s=+s,o=o>>>0,p=p>>>0,!m){var I=Math.pow(2,8*p)-1;fe(this,s,o,p,I,0)}var H=p-1,ie=1;for(this[o+H]=s&255;--H>=0&&(ie*=256);)this[o+H]=s/ie&255;return o+p},a.prototype.writeUint8=a.prototype.writeUInt8=function(s,o,p){return s=+s,o=o>>>0,p||fe(this,s,o,1,255,0),this[o]=s&255,o+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(s,o,p){return s=+s,o=o>>>0,p||fe(this,s,o,2,65535,0),this[o]=s&255,this[o+1]=s>>>8,o+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(s,o,p){return s=+s,o=o>>>0,p||fe(this,s,o,2,65535,0),this[o]=s>>>8,this[o+1]=s&255,o+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(s,o,p){return s=+s,o=o>>>0,p||fe(this,s,o,4,4294967295,0),this[o+3]=s>>>24,this[o+2]=s>>>16,this[o+1]=s>>>8,this[o]=s&255,o+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(s,o,p){return s=+s,o=o>>>0,p||fe(this,s,o,4,4294967295,0),this[o]=s>>>24,this[o+1]=s>>>16,this[o+2]=s>>>8,this[o+3]=s&255,o+4},a.prototype.writeIntLE=function(s,o,p,m){if(s=+s,o=o>>>0,!m){var I=Math.pow(2,8*p-1);fe(this,s,o,p,I-1,-I)}var H=0,ie=1,ue=0;for(this[o]=s&255;++H<p&&(ie*=256);)s<0&&ue===0&&this[o+H-1]!==0&&(ue=1),this[o+H]=(s/ie>>0)-ue&255;return o+p},a.prototype.writeIntBE=function(s,o,p,m){if(s=+s,o=o>>>0,!m){var I=Math.pow(2,8*p-1);fe(this,s,o,p,I-1,-I)}var H=p-1,ie=1,ue=0;for(this[o+H]=s&255;--H>=0&&(ie*=256);)s<0&&ue===0&&this[o+H+1]!==0&&(ue=1),this[o+H]=(s/ie>>0)-ue&255;return o+p},a.prototype.writeInt8=function(s,o,p){return s=+s,o=o>>>0,p||fe(this,s,o,1,127,-128),s<0&&(s=255+s+1),this[o]=s&255,o+1},a.prototype.writeInt16LE=function(s,o,p){return s=+s,o=o>>>0,p||fe(this,s,o,2,32767,-32768),this[o]=s&255,this[o+1]=s>>>8,o+2},a.prototype.writeInt16BE=function(s,o,p){return s=+s,o=o>>>0,p||fe(this,s,o,2,32767,-32768),this[o]=s>>>8,this[o+1]=s&255,o+2},a.prototype.writeInt32LE=function(s,o,p){return s=+s,o=o>>>0,p||fe(this,s,o,4,2147483647,-2147483648),this[o]=s&255,this[o+1]=s>>>8,this[o+2]=s>>>16,this[o+3]=s>>>24,o+4},a.prototype.writeInt32BE=function(s,o,p){return s=+s,o=o>>>0,p||fe(this,s,o,4,2147483647,-2147483648),s<0&&(s=4294967295+s+1),this[o]=s>>>24,this[o+1]=s>>>16,this[o+2]=s>>>8,this[o+3]=s&255,o+4};function Ne(h,s,o,p,m,I){if(o+p>h.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("Index out of range")}function E(h,s,o,p,m){return s=+s,o=o>>>0,m||Ne(h,s,o,4),r.write(h,s,o,p,23,4),o+4}a.prototype.writeFloatLE=function(s,o,p){return E(this,s,o,!0,p)},a.prototype.writeFloatBE=function(s,o,p){return E(this,s,o,!1,p)};function Ae(h,s,o,p,m){return s=+s,o=o>>>0,m||Ne(h,s,o,8),r.write(h,s,o,p,52,8),o+8}a.prototype.writeDoubleLE=function(s,o,p){return Ae(this,s,o,!0,p)},a.prototype.writeDoubleBE=function(s,o,p){return Ae(this,s,o,!1,p)},a.prototype.copy=function(s,o,p,m){if(!a.isBuffer(s))throw new TypeError("argument should be a Buffer");if(p||(p=0),!m&&m!==0&&(m=this.length),o>=s.length&&(o=s.length),o||(o=0),m>0&&m<p&&(m=p),m===p||s.length===0||this.length===0)return 0;if(o<0)throw new RangeError("targetStart out of bounds");if(p<0||p>=this.length)throw new RangeError("Index out of range");if(m<0)throw new RangeError("sourceEnd out of bounds");m>this.length&&(m=this.length),s.length-o<m-p&&(m=s.length-o+p);var I=m-p;return this===s&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(o,p,m):Uint8Array.prototype.set.call(s,this.subarray(p,m),o),I},a.prototype.fill=function(s,o,p,m){if(typeof s=="string"){if(typeof o=="string"?(m=o,o=0,p=this.length):typeof p=="string"&&(m=p,p=this.length),m!==void 0&&typeof m!="string")throw new TypeError("encoding must be a string");if(typeof m=="string"&&!a.isEncoding(m))throw new TypeError("Unknown encoding: "+m);if(s.length===1){var I=s.charCodeAt(0);(m==="utf8"&&I<128||m==="latin1")&&(s=I)}}else typeof s=="number"?s=s&255:typeof s=="boolean"&&(s=Number(s));if(o<0||this.length<o||this.length<p)throw new RangeError("Out of range index");if(p<=o)return this;o=o>>>0,p=p===void 0?this.length:p>>>0,s||(s=0);var H;if(typeof s=="number")for(H=o;H<p;++H)this[H]=s;else{var ie=a.isBuffer(s)?s:a.from(s,m),ue=ie.length;if(ue===0)throw new TypeError('The value "'+s+'" is invalid for argument "value"');for(H=0;H<p-o;++H)this[H+o]=ie[H%ue]}return this};var Ie=/[^+/0-9A-Za-z-_]/g;function ae(h){if(h=h.split("=")[0],h=h.trim().replace(Ie,""),h.length<2)return"";for(;h.length%4!==0;)h=h+"=";return h}function J(h,s){s=s||1/0;for(var o,p=h.length,m=null,I=[],H=0;H<p;++H){if(o=h.charCodeAt(H),o>55295&&o<57344){if(!m){if(o>56319){(s-=3)>-1&&I.push(239,191,189);continue}else if(H+1===p){(s-=3)>-1&&I.push(239,191,189);continue}m=o;continue}if(o<56320){(s-=3)>-1&&I.push(239,191,189),m=o;continue}o=(m-55296<<10|o-56320)+65536}else m&&(s-=3)>-1&&I.push(239,191,189);if(m=null,o<128){if((s-=1)<0)break;I.push(o)}else if(o<2048){if((s-=2)<0)break;I.push(o>>6|192,o&63|128)}else if(o<65536){if((s-=3)<0)break;I.push(o>>12|224,o>>6&63|128,o&63|128)}else if(o<1114112){if((s-=4)<0)break;I.push(o>>18|240,o>>12&63|128,o>>6&63|128,o&63|128)}else throw new Error("Invalid code point")}return I}function ne(h){for(var s=[],o=0;o<h.length;++o)s.push(h.charCodeAt(o)&255);return s}function g(h,s){for(var o,p,m,I=[],H=0;H<h.length&&!((s-=2)<0);++H)o=h.charCodeAt(H),p=o>>8,m=o%256,I.push(m),I.push(p);return I}function b(h){return e.toByteArray(ae(h))}function v(h,s,o,p){for(var m=0;m<p&&!(m+o>=s.length||m>=h.length);++m)s[m+o]=h[m];return m}function F(h,s){return h instanceof s||h!=null&&h.constructor!=null&&h.constructor.name!=null&&h.constructor.name===s.name}function R(h){return h!==h}var P=function(){for(var h="0123456789abcdef",s=new Array(256),o=0;o<16;++o)for(var p=o*16,m=0;m<16;++m)s[p+m]=h[o]+h[m];return s}()})(dn);var da={exports:{}};(function(t){(function(e){var r,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,u=Math.floor,f="[BigNumber Error] ",a=f+"Number primitive has more than 15 significant digits: ",w=1e14,_=14,x=9007199254740991,N=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],M=1e7,T=1e9;function y(L){var X,Q,q,C=E.prototype={constructor:E,toString:null,valueOf:null},ee=new E(1),te=20,B=4,U=-7,$=21,Y=-1e7,D=1e7,re=!1,le=1,ye=0,oe={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},fe="0123456789abcdefghijklmnopqrstuvwxyz",Ne=!0;function E(g,b){var v,F,R,P,h,s,o,p,m=this;if(!(m instanceof E))return new E(g,b);if(b==null){if(g&&g._isBigNumber===!0){m.s=g.s,!g.c||g.e>D?m.c=m.e=null:g.e<Y?m.c=[m.e=0]:(m.e=g.e,m.c=g.c.slice());return}if((s=typeof g=="number")&&g*0==0){if(m.s=1/g<0?(g=-g,-1):1,g===~~g){for(P=0,h=g;h>=10;h/=10,P++);P>D?m.c=m.e=null:(m.e=P,m.c=[g]);return}p=String(g)}else{if(!n.test(p=String(g)))return q(m,p,s);m.s=p.charCodeAt(0)==45?(p=p.slice(1),-1):1}(P=p.indexOf("."))>-1&&(p=p.replace(".","")),(h=p.search(/e/i))>0?(P<0&&(P=h),P+=+p.slice(h+1),p=p.substring(0,h)):P<0&&(P=p.length)}else{if(K(b,2,fe.length,"Base"),b==10&&Ne)return m=new E(g),J(m,te+m.e+1,B);if(p=String(g),s=typeof g=="number"){if(g*0!=0)return q(m,p,s,b);if(m.s=1/g<0?(p=p.slice(1),-1):1,E.DEBUG&&p.replace(/^0\.0*|\./,"").length>15)throw Error(a+g)}else m.s=p.charCodeAt(0)===45?(p=p.slice(1),-1):1;for(v=fe.slice(0,b),P=h=0,o=p.length;h<o;h++)if(v.indexOf(F=p.charAt(h))<0){if(F=="."){if(h>P){P=o;continue}}else if(!R&&(p==p.toUpperCase()&&(p=p.toLowerCase())||p==p.toLowerCase()&&(p=p.toUpperCase()))){R=!0,h=-1,P=0;continue}return q(m,String(g),s,b)}s=!1,p=Q(p,b,10,m.s),(P=p.indexOf("."))>-1?p=p.replace(".",""):P=p.length}for(h=0;p.charCodeAt(h)===48;h++);for(o=p.length;p.charCodeAt(--o)===48;);if(p=p.slice(h,++o)){if(o-=h,s&&E.DEBUG&&o>15&&(g>x||g!==u(g)))throw Error(a+m.s*g);if((P=P-h-1)>D)m.c=m.e=null;else if(P<Y)m.c=[m.e=0];else{if(m.e=P,m.c=[],h=(P+1)%_,P<0&&(h+=_),h<o){for(h&&m.c.push(+p.slice(0,h)),o-=_;h<o;)m.c.push(+p.slice(h,h+=_));h=_-(p=p.slice(h)).length}else h-=o;for(;h--;p+="0");m.c.push(+p)}}else m.c=[m.e=0]}E.clone=y,E.ROUND_UP=0,E.ROUND_DOWN=1,E.ROUND_CEIL=2,E.ROUND_FLOOR=3,E.ROUND_HALF_UP=4,E.ROUND_HALF_DOWN=5,E.ROUND_HALF_EVEN=6,E.ROUND_HALF_CEIL=7,E.ROUND_HALF_FLOOR=8,E.EUCLID=9,E.config=E.set=function(g){var b,v;if(g!=null)if(typeof g=="object"){if(g.hasOwnProperty(b="DECIMAL_PLACES")&&(v=g[b],K(v,0,T,b),te=v),g.hasOwnProperty(b="ROUNDING_MODE")&&(v=g[b],K(v,0,8,b),B=v),g.hasOwnProperty(b="EXPONENTIAL_AT")&&(v=g[b],v&&v.pop?(K(v[0],-T,0,b),K(v[1],0,T,b),U=v[0],$=v[1]):(K(v,-T,T,b),U=-($=v<0?-v:v))),g.hasOwnProperty(b="RANGE"))if(v=g[b],v&&v.pop)K(v[0],-T,-1,b),K(v[1],1,T,b),Y=v[0],D=v[1];else if(K(v,-T,T,b),v)Y=-(D=v<0?-v:v);else throw Error(f+b+" cannot be zero: "+v);if(g.hasOwnProperty(b="CRYPTO"))if(v=g[b],v===!!v)if(v)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))re=v;else throw re=!v,Error(f+"crypto unavailable");else re=v;else throw Error(f+b+" not true or false: "+v);if(g.hasOwnProperty(b="MODULO_MODE")&&(v=g[b],K(v,0,9,b),le=v),g.hasOwnProperty(b="POW_PRECISION")&&(v=g[b],K(v,0,T,b),ye=v),g.hasOwnProperty(b="FORMAT"))if(v=g[b],typeof v=="object")oe=v;else throw Error(f+b+" not an object: "+v);if(g.hasOwnProperty(b="ALPHABET"))if(v=g[b],typeof v=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(v))Ne=v.slice(0,10)=="0123456789",fe=v;else throw Error(f+b+" invalid: "+v)}else throw Error(f+"Object expected: "+g);return{DECIMAL_PLACES:te,ROUNDING_MODE:B,EXPONENTIAL_AT:[U,$],RANGE:[Y,D],CRYPTO:re,MODULO_MODE:le,POW_PRECISION:ye,FORMAT:oe,ALPHABET:fe}},E.isBigNumber=function(g){if(!g||g._isBigNumber!==!0)return!1;if(!E.DEBUG)return!0;var b,v,F=g.c,R=g.e,P=g.s;e:if({}.toString.call(F)=="[object Array]"){if((P===1||P===-1)&&R>=-T&&R<=T&&R===u(R)){if(F[0]===0){if(R===0&&F.length===1)return!0;break e}if(b=(R+1)%_,b<1&&(b+=_),String(F[0]).length==b){for(b=0;b<F.length;b++)if(v=F[b],v<0||v>=w||v!==u(v))break e;if(v!==0)return!0}}}else if(F===null&&R===null&&(P===null||P===1||P===-1))return!0;throw Error(f+"Invalid BigNumber: "+g)},E.maximum=E.max=function(){return Ie(arguments,-1)},E.minimum=E.min=function(){return Ie(arguments,1)},E.random=function(){var g=9007199254740992,b=Math.random()*g&2097151?function(){return u(Math.random()*g)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(v){var F,R,P,h,s,o=0,p=[],m=new E(ee);if(v==null?v=te:K(v,0,T),h=i(v/_),re)if(crypto.getRandomValues){for(F=crypto.getRandomValues(new Uint32Array(h*=2));o<h;)s=F[o]*131072+(F[o+1]>>>11),s>=9e15?(R=crypto.getRandomValues(new Uint32Array(2)),F[o]=R[0],F[o+1]=R[1]):(p.push(s%1e14),o+=2);o=h/2}else if(crypto.randomBytes){for(F=crypto.randomBytes(h*=7);o<h;)s=(F[o]&31)*281474976710656+F[o+1]*1099511627776+F[o+2]*4294967296+F[o+3]*16777216+(F[o+4]<<16)+(F[o+5]<<8)+F[o+6],s>=9e15?crypto.randomBytes(7).copy(F,o):(p.push(s%1e14),o+=7);o=h/7}else throw re=!1,Error(f+"crypto unavailable");if(!re)for(;o<h;)s=b(),s<9e15&&(p[o++]=s%1e14);for(h=p[--o],v%=_,h&&v&&(s=N[_-v],p[o]=u(h/s)*s);p[o]===0;p.pop(),o--);if(o<0)p=[P=0];else{for(P=-1;p[0]===0;p.splice(0,1),P-=_);for(o=1,s=p[0];s>=10;s/=10,o++);o<_&&(P-=_-o)}return m.e=P,m.c=p,m}}(),E.sum=function(){for(var g=1,b=arguments,v=new E(b[0]);g<b.length;)v=v.plus(b[g++]);return v},Q=function(){var g="0123456789";function b(v,F,R,P){for(var h,s=[0],o,p=0,m=v.length;p<m;){for(o=s.length;o--;s[o]*=F);for(s[0]+=P.indexOf(v.charAt(p++)),h=0;h<s.length;h++)s[h]>R-1&&(s[h+1]==null&&(s[h+1]=0),s[h+1]+=s[h]/R|0,s[h]%=R)}return s.reverse()}return function(v,F,R,P,h){var s,o,p,m,I,H,ie,ue,he=v.indexOf("."),be=te,d=B;for(he>=0&&(m=ye,ye=0,v=v.replace(".",""),ue=new E(F),H=ue.pow(v.length-he),ye=m,ue.c=b(S(V(H.c),H.e,"0"),10,R,g),ue.e=ue.c.length),ie=b(v,F,R,h?(s=fe,g):(s=g,fe)),p=m=ie.length;ie[--m]==0;ie.pop());if(!ie[0])return s.charAt(0);if(he<0?--p:(H.c=ie,H.e=p,H.s=P,H=X(H,ue,be,d,R),ie=H.c,I=H.r,p=H.e),o=p+be+1,he=ie[o],m=R/2,I=I||o<0||ie[o+1]!=null,I=d<4?(he!=null||I)&&(d==0||d==(H.s<0?3:2)):he>m||he==m&&(d==4||I||d==6&&ie[o-1]&1||d==(H.s<0?8:7)),o<1||!ie[0])v=I?S(s.charAt(1),-be,s.charAt(0)):s.charAt(0);else{if(ie.length=o,I)for(--R;++ie[--o]>R;)ie[o]=0,o||(++p,ie=[1].concat(ie));for(m=ie.length;!ie[--m];);for(he=0,v="";he<=m;v+=s.charAt(ie[he++]));v=S(v,p,s.charAt(0))}return v}}(),X=function(){function g(F,R,P){var h,s,o,p,m=0,I=F.length,H=R%M,ie=R/M|0;for(F=F.slice();I--;)o=F[I]%M,p=F[I]/M|0,h=ie*o+p*H,s=H*o+h%M*M+m,m=(s/P|0)+(h/M|0)+ie*p,F[I]=s%P;return m&&(F=[m].concat(F)),F}function b(F,R,P,h){var s,o;if(P!=h)o=P>h?1:-1;else for(s=o=0;s<P;s++)if(F[s]!=R[s]){o=F[s]>R[s]?1:-1;break}return o}function v(F,R,P,h){for(var s=0;P--;)F[P]-=s,s=F[P]<R[P]?1:0,F[P]=s*h+F[P]-R[P];for(;!F[0]&&F.length>1;F.splice(0,1));}return function(F,R,P,h,s){var o,p,m,I,H,ie,ue,he,be,d,c,l,A,k,z,j,ge,_e=F.s==R.s?1:-1,me=F.c,we=R.c;if(!me||!me[0]||!we||!we[0])return new E(!F.s||!R.s||(me?we&&me[0]==we[0]:!we)?NaN:me&&me[0]==0||!we?_e*0:_e/0);for(he=new E(_e),be=he.c=[],p=F.e-R.e,_e=P+p+1,s||(s=w,p=G(F.e/_)-G(R.e/_),_e=_e/_|0),m=0;we[m]==(me[m]||0);m++);if(we[m]>(me[m]||0)&&p--,_e<0)be.push(1),I=!0;else{for(k=me.length,j=we.length,m=0,_e+=2,H=u(s/(we[0]+1)),H>1&&(we=g(we,H,s),me=g(me,H,s),j=we.length,k=me.length),A=j,d=me.slice(0,j),c=d.length;c<j;d[c++]=0);ge=we.slice(),ge=[0].concat(ge),z=we[0],we[1]>=s/2&&z++;do{if(H=0,o=b(we,d,j,c),o<0){if(l=d[0],j!=c&&(l=l*s+(d[1]||0)),H=u(l/z),H>1)for(H>=s&&(H=s-1),ie=g(we,H,s),ue=ie.length,c=d.length;b(ie,d,ue,c)==1;)H--,v(ie,j<ue?ge:we,ue,s),ue=ie.length,o=1;else H==0&&(o=H=1),ie=we.slice(),ue=ie.length;if(ue<c&&(ie=[0].concat(ie)),v(d,ie,c,s),c=d.length,o==-1)for(;b(we,d,j,c)<1;)H++,v(d,j<c?ge:we,c,s),c=d.length}else o===0&&(H++,d=[0]);be[m++]=H,d[0]?d[c++]=me[A]||0:(d=[me[A]],c=1)}while((A++<k||d[0]!=null)&&_e--);I=d[0]!=null,be[0]||be.splice(0,1)}if(s==w){for(m=1,_e=be[0];_e>=10;_e/=10,m++);J(he,P+(he.e=m+p*_-1)+1,h,I)}else he.e=p,he.r=+I;return he}}();function Ae(g,b,v,F){var R,P,h,s,o;if(v==null?v=B:K(v,0,8),!g.c)return g.toString();if(R=g.c[0],h=g.e,b==null)o=V(g.c),o=F==1||F==2&&(h<=U||h>=$)?se(o,h):S(o,h,"0");else if(g=J(new E(g),b,v),P=g.e,o=V(g.c),s=o.length,F==1||F==2&&(b<=P||P<=U)){for(;s<b;o+="0",s++);o=se(o,P)}else if(b-=h+(F===2&&P>h),o=S(o,P,"0"),P+1>s){if(--b>0)for(o+=".";b--;o+="0");}else if(b+=P-s,b>0)for(P+1==s&&(o+=".");b--;o+="0");return g.s<0&&R?"-"+o:o}function Ie(g,b){for(var v,F,R=1,P=new E(g[0]);R<g.length;R++)F=new E(g[R]),(!F.s||(v=W(P,F))===b||v===0&&P.s===b)&&(P=F);return P}function ae(g,b,v){for(var F=1,R=b.length;!b[--R];b.pop());for(R=b[0];R>=10;R/=10,F++);return(v=F+v*_-1)>D?g.c=g.e=null:v<Y?g.c=[g.e=0]:(g.e=v,g.c=b),g}q=function(){var g=/^(-?)0([xbo])(?=\w[\w.]*$)/i,b=/^([^.]+)\.$/,v=/^\.([^.]+)$/,F=/^-?(Infinity|NaN)$/,R=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(P,h,s,o){var p,m=s?h:h.replace(R,"");if(F.test(m))P.s=isNaN(m)?null:m<0?-1:1;else{if(!s&&(m=m.replace(g,function(I,H,ie){return p=(ie=ie.toLowerCase())=="x"?16:ie=="b"?2:8,!o||o==p?H:I}),o&&(p=o,m=m.replace(b,"$1").replace(v,"0.$1")),h!=m))return new E(m,p);if(E.DEBUG)throw Error(f+"Not a"+(o?" base "+o:"")+" number: "+h);P.s=null}P.c=P.e=null}}();function J(g,b,v,F){var R,P,h,s,o,p,m,I=g.c,H=N;if(I){e:{for(R=1,s=I[0];s>=10;s/=10,R++);if(P=b-R,P<0)P+=_,h=b,o=I[p=0],m=u(o/H[R-h-1]%10);else if(p=i((P+1)/_),p>=I.length)if(F){for(;I.length<=p;I.push(0));o=m=0,R=1,P%=_,h=P-_+1}else break e;else{for(o=s=I[p],R=1;s>=10;s/=10,R++);P%=_,h=P-_+R,m=h<0?0:u(o/H[R-h-1]%10)}if(F=F||b<0||I[p+1]!=null||(h<0?o:o%H[R-h-1]),F=v<4?(m||F)&&(v==0||v==(g.s<0?3:2)):m>5||m==5&&(v==4||F||v==6&&(P>0?h>0?o/H[R-h]:0:I[p-1])%10&1||v==(g.s<0?8:7)),b<1||!I[0])return I.length=0,F?(b-=g.e+1,I[0]=H[(_-b%_)%_],g.e=-b||0):I[0]=g.e=0,g;if(P==0?(I.length=p,s=1,p--):(I.length=p+1,s=H[_-P],I[p]=h>0?u(o/H[R-h]%H[h])*s:0),F)for(;;)if(p==0){for(P=1,h=I[0];h>=10;h/=10,P++);for(h=I[0]+=s,s=1;h>=10;h/=10,s++);P!=s&&(g.e++,I[0]==w&&(I[0]=1));break}else{if(I[p]+=s,I[p]!=w)break;I[p--]=0,s=1}for(P=I.length;I[--P]===0;I.pop());}g.e>D?g.c=g.e=null:g.e<Y&&(g.c=[g.e=0])}return g}function ne(g){var b,v=g.e;return v===null?g.toString():(b=V(g.c),b=v<=U||v>=$?se(b,v):S(b,v,"0"),g.s<0?"-"+b:b)}return C.absoluteValue=C.abs=function(){var g=new E(this);return g.s<0&&(g.s=1),g},C.comparedTo=function(g,b){return W(this,new E(g,b))},C.decimalPlaces=C.dp=function(g,b){var v,F,R,P=this;if(g!=null)return K(g,0,T),b==null?b=B:K(b,0,8),J(new E(P),g+P.e+1,b);if(!(v=P.c))return null;if(F=((R=v.length-1)-G(this.e/_))*_,R=v[R])for(;R%10==0;R/=10,F--);return F<0&&(F=0),F},C.dividedBy=C.div=function(g,b){return X(this,new E(g,b),te,B)},C.dividedToIntegerBy=C.idiv=function(g,b){return X(this,new E(g,b),0,1)},C.exponentiatedBy=C.pow=function(g,b){var v,F,R,P,h,s,o,p,m,I=this;if(g=new E(g),g.c&&!g.isInteger())throw Error(f+"Exponent not an integer: "+ne(g));if(b!=null&&(b=new E(b)),s=g.e>14,!I.c||!I.c[0]||I.c[0]==1&&!I.e&&I.c.length==1||!g.c||!g.c[0])return m=new E(Math.pow(+ne(I),s?g.s*(2-Z(g)):+ne(g))),b?m.mod(b):m;if(o=g.s<0,b){if(b.c?!b.c[0]:!b.s)return new E(NaN);F=!o&&I.isInteger()&&b.isInteger(),F&&(I=I.mod(b))}else{if(g.e>9&&(I.e>0||I.e<-1||(I.e==0?I.c[0]>1||s&&I.c[1]>=24e7:I.c[0]<8e13||s&&I.c[0]<=9999975e7)))return P=I.s<0&&Z(g)?-0:0,I.e>-1&&(P=1/P),new E(o?1/P:P);ye&&(P=i(ye/_+2))}for(s?(v=new E(.5),o&&(g.s=1),p=Z(g)):(R=Math.abs(+ne(g)),p=R%2),m=new E(ee);;){if(p){if(m=m.times(I),!m.c)break;P?m.c.length>P&&(m.c.length=P):F&&(m=m.mod(b))}if(R){if(R=u(R/2),R===0)break;p=R%2}else if(g=g.times(v),J(g,g.e+1,1),g.e>14)p=Z(g);else{if(R=+ne(g),R===0)break;p=R%2}I=I.times(I),P?I.c&&I.c.length>P&&(I.c.length=P):F&&(I=I.mod(b))}return F?m:(o&&(m=ee.div(m)),b?m.mod(b):P?J(m,ye,B,h):m)},C.integerValue=function(g){var b=new E(this);return g==null?g=B:K(g,0,8),J(b,b.e+1,g)},C.isEqualTo=C.eq=function(g,b){return W(this,new E(g,b))===0},C.isFinite=function(){return!!this.c},C.isGreaterThan=C.gt=function(g,b){return W(this,new E(g,b))>0},C.isGreaterThanOrEqualTo=C.gte=function(g,b){return(b=W(this,new E(g,b)))===1||b===0},C.isInteger=function(){return!!this.c&&G(this.e/_)>this.c.length-2},C.isLessThan=C.lt=function(g,b){return W(this,new E(g,b))<0},C.isLessThanOrEqualTo=C.lte=function(g,b){return(b=W(this,new E(g,b)))===-1||b===0},C.isNaN=function(){return!this.s},C.isNegative=function(){return this.s<0},C.isPositive=function(){return this.s>0},C.isZero=function(){return!!this.c&&this.c[0]==0},C.minus=function(g,b){var v,F,R,P,h=this,s=h.s;if(g=new E(g,b),b=g.s,!s||!b)return new E(NaN);if(s!=b)return g.s=-b,h.plus(g);var o=h.e/_,p=g.e/_,m=h.c,I=g.c;if(!o||!p){if(!m||!I)return m?(g.s=-b,g):new E(I?h:NaN);if(!m[0]||!I[0])return I[0]?(g.s=-b,g):new E(m[0]?h:B==3?-0:0)}if(o=G(o),p=G(p),m=m.slice(),s=o-p){for((P=s<0)?(s=-s,R=m):(p=o,R=I),R.reverse(),b=s;b--;R.push(0));R.reverse()}else for(F=(P=(s=m.length)<(b=I.length))?s:b,s=b=0;b<F;b++)if(m[b]!=I[b]){P=m[b]<I[b];break}if(P&&(R=m,m=I,I=R,g.s=-g.s),b=(F=I.length)-(v=m.length),b>0)for(;b--;m[v++]=0);for(b=w-1;F>s;){if(m[--F]<I[F]){for(v=F;v&&!m[--v];m[v]=b);--m[v],m[F]+=w}m[F]-=I[F]}for(;m[0]==0;m.splice(0,1),--p);return m[0]?ae(g,m,p):(g.s=B==3?-1:1,g.c=[g.e=0],g)},C.modulo=C.mod=function(g,b){var v,F,R=this;return g=new E(g,b),!R.c||!g.s||g.c&&!g.c[0]?new E(NaN):!g.c||R.c&&!R.c[0]?new E(R):(le==9?(F=g.s,g.s=1,v=X(R,g,0,3),g.s=F,v.s*=F):v=X(R,g,0,le),g=R.minus(v.times(g)),!g.c[0]&&le==1&&(g.s=R.s),g)},C.multipliedBy=C.times=function(g,b){var v,F,R,P,h,s,o,p,m,I,H,ie,ue,he,be,d=this,c=d.c,l=(g=new E(g,b)).c;if(!c||!l||!c[0]||!l[0])return!d.s||!g.s||c&&!c[0]&&!l||l&&!l[0]&&!c?g.c=g.e=g.s=null:(g.s*=d.s,!c||!l?g.c=g.e=null:(g.c=[0],g.e=0)),g;for(F=G(d.e/_)+G(g.e/_),g.s*=d.s,o=c.length,I=l.length,o<I&&(ue=c,c=l,l=ue,R=o,o=I,I=R),R=o+I,ue=[];R--;ue.push(0));for(he=w,be=M,R=I;--R>=0;){for(v=0,H=l[R]%be,ie=l[R]/be|0,h=o,P=R+h;P>R;)p=c[--h]%be,m=c[h]/be|0,s=ie*p+m*H,p=H*p+s%be*be+ue[P]+v,v=(p/he|0)+(s/be|0)+ie*m,ue[P--]=p%he;ue[P]=v}return v?++F:ue.splice(0,1),ae(g,ue,F)},C.negated=function(){var g=new E(this);return g.s=-g.s||null,g},C.plus=function(g,b){var v,F=this,R=F.s;if(g=new E(g,b),b=g.s,!R||!b)return new E(NaN);if(R!=b)return g.s=-b,F.minus(g);var P=F.e/_,h=g.e/_,s=F.c,o=g.c;if(!P||!h){if(!s||!o)return new E(R/0);if(!s[0]||!o[0])return o[0]?g:new E(s[0]?F:R*0)}if(P=G(P),h=G(h),s=s.slice(),R=P-h){for(R>0?(h=P,v=o):(R=-R,v=s),v.reverse();R--;v.push(0));v.reverse()}for(R=s.length,b=o.length,R-b<0&&(v=o,o=s,s=v,b=R),R=0;b;)R=(s[--b]=s[b]+o[b]+R)/w|0,s[b]=w===s[b]?0:s[b]%w;return R&&(s=[R].concat(s),++h),ae(g,s,h)},C.precision=C.sd=function(g,b){var v,F,R,P=this;if(g!=null&&g!==!!g)return K(g,1,T),b==null?b=B:K(b,0,8),J(new E(P),g,b);if(!(v=P.c))return null;if(R=v.length-1,F=R*_+1,R=v[R]){for(;R%10==0;R/=10,F--);for(R=v[0];R>=10;R/=10,F++);}return g&&P.e+1>F&&(F=P.e+1),F},C.shiftedBy=function(g){return K(g,-x,x),this.times("1e"+g)},C.squareRoot=C.sqrt=function(){var g,b,v,F,R,P=this,h=P.c,s=P.s,o=P.e,p=te+4,m=new E("0.5");if(s!==1||!h||!h[0])return new E(!s||s<0&&(!h||h[0])?NaN:h?P:1/0);if(s=Math.sqrt(+ne(P)),s==0||s==1/0?(b=V(h),(b.length+o)%2==0&&(b+="0"),s=Math.sqrt(+b),o=G((o+1)/2)-(o<0||o%2),s==1/0?b="5e"+o:(b=s.toExponential(),b=b.slice(0,b.indexOf("e")+1)+o),v=new E(b)):v=new E(s+""),v.c[0]){for(o=v.e,s=o+p,s<3&&(s=0);;)if(R=v,v=m.times(R.plus(X(P,R,p,1))),V(R.c).slice(0,s)===(b=V(v.c)).slice(0,s))if(v.e<o&&--s,b=b.slice(s-3,s+1),b=="9999"||!F&&b=="4999"){if(!F&&(J(R,R.e+te+2,0),R.times(R).eq(P))){v=R;break}p+=4,s+=4,F=1}else{(!+b||!+b.slice(1)&&b.charAt(0)=="5")&&(J(v,v.e+te+2,1),g=!v.times(v).eq(P));break}}return J(v,v.e+te+1,B,g)},C.toExponential=function(g,b){return g!=null&&(K(g,0,T),g++),Ae(this,g,b,1)},C.toFixed=function(g,b){return g!=null&&(K(g,0,T),g=g+this.e+1),Ae(this,g,b)},C.toFormat=function(g,b,v){var F,R=this;if(v==null)g!=null&&b&&typeof b=="object"?(v=b,b=null):g&&typeof g=="object"?(v=g,g=b=null):v=oe;else if(typeof v!="object")throw Error(f+"Argument not an object: "+v);if(F=R.toFixed(g,b),R.c){var P,h=F.split("."),s=+v.groupSize,o=+v.secondaryGroupSize,p=v.groupSeparator||"",m=h[0],I=h[1],H=R.s<0,ie=H?m.slice(1):m,ue=ie.length;if(o&&(P=s,s=o,o=P,ue-=P),s>0&&ue>0){for(P=ue%s||s,m=ie.substr(0,P);P<ue;P+=s)m+=p+ie.substr(P,s);o>0&&(m+=p+ie.slice(P)),H&&(m="-"+m)}F=I?m+(v.decimalSeparator||"")+((o=+v.fractionGroupSize)?I.replace(new RegExp("\\d{"+o+"}\\B","g"),"$&"+(v.fractionGroupSeparator||"")):I):m}return(v.prefix||"")+F+(v.suffix||"")},C.toFraction=function(g){var b,v,F,R,P,h,s,o,p,m,I,H,ie=this,ue=ie.c;if(g!=null&&(s=new E(g),!s.isInteger()&&(s.c||s.s!==1)||s.lt(ee)))throw Error(f+"Argument "+(s.isInteger()?"out of range: ":"not an integer: ")+ne(s));if(!ue)return new E(ie);for(b=new E(ee),p=v=new E(ee),F=o=new E(ee),H=V(ue),P=b.e=H.length-ie.e-1,b.c[0]=N[(h=P%_)<0?_+h:h],g=!g||s.comparedTo(b)>0?P>0?b:p:s,h=D,D=1/0,s=new E(H),o.c[0]=0;m=X(s,b,0,1),R=v.plus(m.times(F)),R.comparedTo(g)!=1;)v=F,F=R,p=o.plus(m.times(R=p)),o=R,b=s.minus(m.times(R=b)),s=R;return R=X(g.minus(v),F,0,1),o=o.plus(R.times(p)),v=v.plus(R.times(F)),o.s=p.s=ie.s,P=P*2,I=X(p,F,P,B).minus(ie).abs().comparedTo(X(o,v,P,B).minus(ie).abs())<1?[p,F]:[o,v],D=h,I},C.toNumber=function(){return+ne(this)},C.toPrecision=function(g,b){return g!=null&&K(g,1,T),Ae(this,g,b,2)},C.toString=function(g){var b,v=this,F=v.s,R=v.e;return R===null?F?(b="Infinity",F<0&&(b="-"+b)):b="NaN":(g==null?b=R<=U||R>=$?se(V(v.c),R):S(V(v.c),R,"0"):g===10&&Ne?(v=J(new E(v),te+R+1,B),b=S(V(v.c),v.e,"0")):(K(g,2,fe.length,"Base"),b=Q(S(V(v.c),R,"0"),10,g,F,!0)),F<0&&v.c[0]&&(b="-"+b)),b},C.valueOf=C.toJSON=function(){return ne(this)},C._isBigNumber=!0,L!=null&&E.set(L),E}function G(L){var X=L|0;return L>0||L===X?X:X-1}function V(L){for(var X,Q,q=1,C=L.length,ee=L[0]+"";q<C;){for(X=L[q++]+"",Q=_-X.length;Q--;X="0"+X);ee+=X}for(C=ee.length;ee.charCodeAt(--C)===48;);return ee.slice(0,C+1||1)}function W(L,X){var Q,q,C=L.c,ee=X.c,te=L.s,B=X.s,U=L.e,$=X.e;if(!te||!B)return null;if(Q=C&&!C[0],q=ee&&!ee[0],Q||q)return Q?q?0:-B:te;if(te!=B)return te;if(Q=te<0,q=U==$,!C||!ee)return q?0:!C^Q?1:-1;if(!q)return U>$^Q?1:-1;for(B=(U=C.length)<($=ee.length)?U:$,te=0;te<B;te++)if(C[te]!=ee[te])return C[te]>ee[te]^Q?1:-1;return U==$?0:U>$^Q?1:-1}function K(L,X,Q,q){if(L<X||L>Q||L!==u(L))throw Error(f+(q||"Argument")+(typeof L=="number"?L<X||L>Q?" out of range: ":" not an integer: ":" not a primitive number: ")+String(L))}function Z(L){var X=L.c.length-1;return G(L.e/_)==X&&L.c[X]%2!=0}function se(L,X){return(L.length>1?L.charAt(0)+"."+L.slice(1):L)+(X<0?"e":"e+")+X}function S(L,X,Q){var q,C;if(X<0){for(C=Q+".";++X;C+=Q);L=C+L}else if(q=L.length,++X>q){for(C=Q,X-=q;--X;C+=Q);L+=C}else X<q&&(L=L.slice(0,X)+"."+L.slice(X));return L}r=y(),r.default=r.BigNumber=r,t.exports?t.exports=r:(e||(e=typeof self<"u"&&self?self:window),e.BigNumber=r)})(kr)})(da);var fi=da.exports,Fu=function(e,r,n){var i=new e.Uint8Array(n),u=r.pushInt,f=r.pushInt32,a=r.pushInt32Neg,w=r.pushInt64,_=r.pushInt64Neg,x=r.pushFloat,N=r.pushFloatSingle,M=r.pushFloatDouble,T=r.pushTrue,y=r.pushFalse,G=r.pushUndefined,V=r.pushNull,W=r.pushInfinity,K=r.pushInfinityNeg,Z=r.pushNaN,se=r.pushNaNNeg,S=r.pushArrayStart,L=r.pushArrayStartFixed,X=r.pushArrayStartFixed32,Q=r.pushArrayStartFixed64,q=r.pushObjectStart,C=r.pushObjectStartFixed,ee=r.pushObjectStartFixed32,te=r.pushObjectStartFixed64,B=r.pushByteString,U=r.pushByteStringStart,$=r.pushUtf8String,Y=r.pushUtf8StringStart,D=r.pushSimpleUnassigned,re=r.pushTagStart,le=r.pushTagStart4,ye=r.pushTagStart8,oe=r.pushTagUnassigned,fe=r.pushBreak,Ne=e.Math.pow,E=0,Ae=0,Ie=0;function ae(O){for(O=O|0,E=0,Ae=O;(E|0)<(Ae|0)&&(Ie=Fc[i[E]&255](i[E]|0)|0,!((Ie|0)>0)););return Ie|0}function J(O){return O=O|0,((E|0)+(O|0)|0)<(Ae|0)?0:1}function ne(O){return O=O|0,i[O|0]<<8|i[O+1|0]|0}function g(O){return O=O|0,i[O|0]<<24|i[O+1|0]<<16|i[O+2|0]<<8|i[O+3|0]|0}function b(O){return O=O|0,u(O|0),E=E+1|0,0}function v(O){return O=O|0,J(1)|0?1:(u(i[E+1|0]|0),E=E+2|0,0)}function F(O){return O=O|0,J(2)|0?1:(u(ne(E+1|0)|0),E=E+3|0,0)}function R(O){return O=O|0,J(4)|0?1:(f(ne(E+1|0)|0,ne(E+3|0)|0),E=E+5|0,0)}function P(O){return O=O|0,J(8)|0?1:(w(ne(E+1|0)|0,ne(E+3|0)|0,ne(E+5|0)|0,ne(E+7|0)|0),E=E+9|0,0)}function h(O){return O=O|0,u(-1-(O-32|0)|0),E=E+1|0,0}function s(O){return O=O|0,J(1)|0?1:(u(-1-(i[E+1|0]|0)|0),E=E+2|0,0)}function o(O){O=O|0;var Te=0;return J(2)|0?1:(Te=ne(E+1|0)|0,u(-1-(Te|0)|0),E=E+3|0,0)}function p(O){return O=O|0,J(4)|0?1:(a(ne(E+1|0)|0,ne(E+3|0)|0),E=E+5|0,0)}function m(O){return O=O|0,J(8)|0?1:(_(ne(E+1|0)|0,ne(E+3|0)|0,ne(E+5|0)|0,ne(E+7|0)|0),E=E+9|0,0)}function I(O){O=O|0;var Te=0,ve=0,Ee=0;return Ee=O-64|0,J(Ee|0)|0?1:(Te=E+1|0,ve=(E+1|0)+(Ee|0)|0,B(Te|0,ve|0),E=ve|0,0)}function H(O){O=O|0;var Te=0,ve=0,Ee=0;return J(1)|0||(Ee=i[E+1|0]|0,Te=E+2|0,ve=(E+2|0)+(Ee|0)|0,J(Ee+1|0)|0)?1:(B(Te|0,ve|0),E=ve|0,0)}function ie(O){O=O|0;var Te=0,ve=0,Ee=0;return J(2)|0||(Ee=ne(E+1|0)|0,Te=E+3|0,ve=(E+3|0)+(Ee|0)|0,J(Ee+2|0)|0)?1:(B(Te|0,ve|0),E=ve|0,0)}function ue(O){O=O|0;var Te=0,ve=0,Ee=0;return J(4)|0||(Ee=g(E+1|0)|0,Te=E+5|0,ve=(E+5|0)+(Ee|0)|0,J(Ee+4|0)|0)?1:(B(Te|0,ve|0),E=ve|0,0)}function he(O){return O=O|0,1}function be(O){return O=O|0,U(),E=E+1|0,0}function d(O){O=O|0;var Te=0,ve=0,Ee=0;return Ee=O-96|0,J(Ee|0)|0?1:(Te=E+1|0,ve=(E+1|0)+(Ee|0)|0,$(Te|0,ve|0),E=ve|0,0)}function c(O){O=O|0;var Te=0,ve=0,Ee=0;return J(1)|0||(Ee=i[E+1|0]|0,Te=E+2|0,ve=(E+2|0)+(Ee|0)|0,J(Ee+1|0)|0)?1:($(Te|0,ve|0),E=ve|0,0)}function l(O){O=O|0;var Te=0,ve=0,Ee=0;return J(2)|0||(Ee=ne(E+1|0)|0,Te=E+3|0,ve=(E+3|0)+(Ee|0)|0,J(Ee+2|0)|0)?1:($(Te|0,ve|0),E=ve|0,0)}function A(O){O=O|0;var Te=0,ve=0,Ee=0;return J(4)|0||(Ee=g(E+1|0)|0,Te=E+5|0,ve=(E+5|0)+(Ee|0)|0,J(Ee+4|0)|0)?1:($(Te|0,ve|0),E=ve|0,0)}function k(O){return O=O|0,1}function z(O){return O=O|0,Y(),E=E+1|0,0}function j(O){return O=O|0,L(O-128|0),E=E+1|0,0}function ge(O){return O=O|0,J(1)|0?1:(L(i[E+1|0]|0),E=E+2|0,0)}function _e(O){return O=O|0,J(2)|0?1:(L(ne(E+1|0)|0),E=E+3|0,0)}function me(O){return O=O|0,J(4)|0?1:(X(ne(E+1|0)|0,ne(E+3|0)|0),E=E+5|0,0)}function we(O){return O=O|0,J(8)|0?1:(Q(ne(E+1|0)|0,ne(E+3|0)|0,ne(E+5|0)|0,ne(E+7|0)|0),E=E+9|0,0)}function Se(O){return O=O|0,S(),E=E+1|0,0}function Me(O){O=O|0;var Te=0;return Te=O-160|0,J(Te|0)|0?1:(C(Te|0),E=E+1|0,0)}function Ei(O){return O=O|0,J(1)|0?1:(C(i[E+1|0]|0),E=E+2|0,0)}function Bi(O){return O=O|0,J(2)|0?1:(C(ne(E+1|0)|0),E=E+3|0,0)}function Ai(O){return O=O|0,J(4)|0?1:(ee(ne(E+1|0)|0,ne(E+3|0)|0),E=E+5|0,0)}function Ti(O){return O=O|0,J(8)|0?1:(te(ne(E+1|0)|0,ne(E+3|0)|0,ne(E+5|0)|0,ne(E+7|0)|0),E=E+9|0,0)}function vi(O){return O=O|0,q(),E=E+1|0,0}function jt(O){return O=O|0,re(O-192|0|0),E=E+1|0,0}function Bl(O){return O=O|0,re(O|0),E=E+1|0,0}function Al(O){return O=O|0,re(O|0),E=E+1|0,0}function Tl(O){return O=O|0,re(O|0),E=E+1|0,0}function vl(O){return O=O|0,re(O|0),E=E+1|0,0}function ze(O){return O=O|0,re(O-192|0|0),E=E+1|0,0}function Sl(O){return O=O|0,re(O|0),E=E+1|0,0}function Nl(O){return O=O|0,re(O|0),E=E+1|0,0}function Il(O){return O=O|0,re(O|0),E=E+1|0,0}function bc(O){return O=O|0,J(1)|0?1:(re(i[E+1|0]|0),E=E+2|0,0)}function _c(O){return O=O|0,J(2)|0?1:(re(ne(E+1|0)|0),E=E+3|0,0)}function xc(O){return O=O|0,J(4)|0?1:(le(ne(E+1|0)|0,ne(E+3|0)|0),E=E+5|0,0)}function Ec(O){return O=O|0,J(8)|0?1:(ye(ne(E+1|0)|0,ne(E+3|0)|0,ne(E+5|0)|0,ne(E+7|0)|0),E=E+9|0,0)}function qe(O){return O=O|0,D((O|0)-224|0),E=E+1|0,0}function Bc(O){return O=O|0,y(),E=E+1|0,0}function Ac(O){return O=O|0,T(),E=E+1|0,0}function Tc(O){return O=O|0,V(),E=E+1|0,0}function vc(O){return O=O|0,G(),E=E+1|0,0}function Sc(O){return O=O|0,J(1)|0?1:(D(i[E+1|0]|0),E=E+2|0,0)}function Nc(O){O=O|0;var Te=0,ve=0,Ee=1,gn=0,zr=0,Ul=0;return J(2)|0?1:(Te=i[E+1|0]|0,ve=i[E+2|0]|0,(Te|0)&128&&(Ee=-1),gn=+(((Te|0)&124)>>2),zr=+(((Te|0)&3)<<8|ve),+gn==0?x(+(+Ee*5960464477539063e-23*+zr)):+gn==31?+Ee==1?+zr>0?Z():W():+zr>0?se():K():x(+(+Ee*Ne(2,+(+gn-25))*+(1024+zr))),E=E+3|0,0)}function Ic(O){return O=O|0,J(4)|0?1:(N(i[E+1|0]|0,i[E+2|0]|0,i[E+3|0]|0,i[E+4|0]|0),E=E+5|0,0)}function Uc(O){return O=O|0,J(8)|0?1:(M(i[E+1|0]|0,i[E+2|0]|0,i[E+3|0]|0,i[E+4|0]|0,i[E+5|0]|0,i[E+6|0]|0,i[E+7|0]|0,i[E+8|0]|0),E=E+9|0,0)}function Fe(O){return O=O|0,1}function Rc(O){return O=O|0,fe(),E=E+1|0,0}var Fc=[b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,v,F,R,P,Fe,Fe,Fe,Fe,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,s,o,p,m,Fe,Fe,Fe,Fe,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,H,ie,ue,he,Fe,Fe,Fe,be,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,c,l,A,k,Fe,Fe,Fe,z,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,ge,_e,me,we,Fe,Fe,Fe,Se,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Me,Ei,Bi,Ai,Ti,Fe,Fe,Fe,vi,jt,jt,jt,jt,jt,jt,ze,ze,ze,ze,ze,ze,ze,ze,ze,ze,ze,ze,ze,ze,ze,ze,ze,ze,bc,_c,xc,Ec,Fe,Fe,Fe,Fe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,Bc,Ac,Tc,vc,Sc,Nc,Ic,Uc,Fe,Fe,Fe,Rc];return{parse:ae}},li={},nt={};const gs=fi.BigNumber;nt.MT={POS_INT:0,NEG_INT:1,BYTE_STRING:2,UTF8_STRING:3,ARRAY:4,MAP:5,TAG:6,SIMPLE_FLOAT:7};nt.TAG={DATE_STRING:0,DATE_EPOCH:1,POS_BIGINT:2,NEG_BIGINT:3,DECIMAL_FRAC:4,BIGFLOAT:5,BASE64URL_EXPECTED:21,BASE64_EXPECTED:22,BASE16_EXPECTED:23,CBOR:24,URI:32,BASE64URL:33,BASE64:34,REGEXP:35,MIME:36};nt.NUMBYTES={ZERO:0,ONE:24,TWO:25,FOUR:26,EIGHT:27,INDEFINITE:31};nt.SIMPLE={FALSE:20,TRUE:21,NULL:22,UNDEFINED:23};nt.SYMS={NULL:Symbol("null"),UNDEFINED:Symbol("undef"),PARENT:Symbol("parent"),BREAK:Symbol("break"),STREAM:Symbol("stream")};nt.SHIFT32=Math.pow(2,32);nt.SHIFT16=Math.pow(2,16);nt.MAX_SAFE_HIGH=2097151;nt.NEG_ONE=new gs(-1);nt.TEN=new gs(10);nt.TWO=new gs(2);nt.PARENT={ARRAY:0,OBJECT:1,MAP:2,TAG:3,BYTE_STRING:4,UTF8_STRING:5};(function(t){const{Buffer:e}=dn,r=fi.BigNumber,n=nt,i=n.SHIFT32,u=n.SHIFT16,f=2097151;t.parseHalf=function(_){var x,N,M;return M=_[0]&128?-1:1,x=(_[0]&124)>>2,N=(_[0]&3)<<8|_[1],x?x===31?M*(N?0/0:1/0):M*Math.pow(2,x-25)*(1024+N):M*5960464477539063e-23*N};function a(w){return w<16?"0"+w.toString(16):w.toString(16)}t.arrayBufferToBignumber=function(w){const _=w.byteLength;let x="";for(let N=0;N<_;N++)x+=a(w[N]);return new r(x,16)},t.buildMap=w=>{const _=new Map,x=Object.keys(w),N=x.length;for(let M=0;M<N;M++)_.set(x[M],w[x[M]]);return _},t.buildInt32=(w,_)=>w*u+_,t.buildInt64=(w,_,x,N)=>{const M=t.buildInt32(w,_),T=t.buildInt32(x,N);return M>f?new r(M).times(i).plus(T):M*i+T},t.writeHalf=function(_,x){const N=e.allocUnsafe(4);N.writeFloatBE(x,0);const M=N.readUInt32BE(0);if(M&8191)return!1;var T=M>>16&32768;const y=M>>23&255,G=M&8388607;if(y>=113&&y<=142)T+=(y-112<<10)+(G>>13);else if(y>=103&&y<113){if(G&(1<<126-y)-1)return!1;T+=G+8388608>>126-y}else return!1;return _.writeUInt16BE(T,0),!0},t.keySorter=function(w,_){var x=w[0].byteLength,N=_[0].byteLength;return x>N?1:N>x?-1:w[0].compare(_[0])},t.isNegativeZero=w=>w===0&&1/w<0,t.nextPowerOf2=w=>{let _=0;if(w&&!(w&w-1))return w;for(;w!==0;)w>>=1,_+=1;return 1<<_}})(li);const ms=nt,Ou=ms.MT,En=ms.SIMPLE,Ui=ms.SYMS;let Mu=class Li{constructor(e){if(typeof e!="number")throw new Error("Invalid Simple type: "+typeof e);if(e<0||e>255||(e|0)!==e)throw new Error("value must be a small positive integer: "+e);this.value=e}toString(){return"simple("+this.value+")"}inspect(){return"simple("+this.value+")"}encodeCBOR(e){return e._pushInt(this.value,Ou.SIMPLE_FLOAT)}static isSimple(e){return e instanceof Li}static decode(e,r){switch(r==null&&(r=!0),e){case En.FALSE:return!1;case En.TRUE:return!0;case En.NULL:return r?null:Ui.NULL;case En.UNDEFINED:return r?void 0:Ui.UNDEFINED;case-1:if(!r)throw new Error("Invalid BREAK");return Ui.BREAK;default:return new Li(e)}}};var pa=Mu;let Pu=class Xi{constructor(e,r,n){if(this.tag=e,this.value=r,this.err=n,typeof this.tag!="number")throw new Error("Invalid tag type ("+typeof this.tag+")");if(this.tag<0||(this.tag|0)!==this.tag)throw new Error("Tag must be a positive integer: "+this.tag)}toString(){return`${this.tag}(${JSON.stringify(this.value)})`}encodeCBOR(e){return e._pushTag(this.tag),e.pushAny(this.value)}convert(e){var r,n;if(n=e!=null?e[this.tag]:void 0,typeof n!="function"&&(n=Xi["_tag"+this.tag],typeof n!="function"))return this;try{return n.call(Xi,this.value)}catch(i){return r=i,this.err=r,this}}};var ya=Pu;const wa=self.location?self.location.protocol+"//"+self.location.host:"",Ji=self.URL;let ku=class{constructor(e="",r=wa){this.super=new Ji(e,r),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set origin(e){this.super.origin=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set searchParams(e){this.super.searchParams=e}set username(e){this.super.username=e}createObjectURL(e){return this.super.createObjectURL(e)}revokeObjectURL(e){this.super.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function $u(t){if(typeof t=="string")return new Ji(t).toString();if(!(t instanceof Ji)){const e=t.username&&t.password?`${t.username}:${t.password}@`:"",r=t.auth?t.auth+"@":"",n=t.port?":"+t.port:"",i=t.protocol?t.protocol+"//":"",u=t.host||"",f=t.hostname||"",a=t.search||(t.query?"?"+t.query:""),w=t.hash||"",_=t.pathname||"",x=t.path||_+a;return`${i}${e||r}${u||f+n}${x}${w}`}}var ga={URLWithLegacySupport:ku,URLSearchParams:self.URLSearchParams,defaultBase:wa,format:$u};const{URLWithLegacySupport:Os,format:Cu}=ga;var qu=(t,e={},r={},n)=>{let i=e.protocol?e.protocol.replace(":",""):"http";i=(r[i]||n||i)+":";let u;try{u=new Os(t)}catch{u={}}const f=Object.assign({},e,{protocol:i||u.protocol,host:e.host||u.host});return new Os(t,Cu(f)).toString()};const{URLWithLegacySupport:Gu,format:Vu,URLSearchParams:Hu,defaultBase:ju}=ga,zu=qu;var ma={URL:Gu,URLSearchParams:Hu,format:Vu,relative:zu,defaultBase:ju};const{Buffer:Er}=dn,Ms=ln,Yu=fi.BigNumber,Ku=Fu,it=li,Re=nt,Wu=pa,Zu=ya,{URL:Lu}=ma;let Qi=class Di{constructor(e){e=e||{},!e.size||e.size<65536?e.size=65536:e.size=it.nextPowerOf2(e.size),this._heap=new ArrayBuffer(e.size),this._heap8=new Uint8Array(this._heap),this._buffer=Er.from(this._heap),this._reset(),this._knownTags=Object.assign({0:r=>new Date(r),1:r=>new Date(r*1e3),2:r=>it.arrayBufferToBignumber(r),3:r=>Re.NEG_ONE.minus(it.arrayBufferToBignumber(r)),4:r=>Re.TEN.pow(r[0]).times(r[1]),5:r=>Re.TWO.pow(r[0]).times(r[1]),32:r=>new Lu(r),35:r=>new RegExp(r)},e.tags),this.parser=Ku(kr,{log:console.log.bind(console),pushInt:this.pushInt.bind(this),pushInt32:this.pushInt32.bind(this),pushInt32Neg:this.pushInt32Neg.bind(this),pushInt64:this.pushInt64.bind(this),pushInt64Neg:this.pushInt64Neg.bind(this),pushFloat:this.pushFloat.bind(this),pushFloatSingle:this.pushFloatSingle.bind(this),pushFloatDouble:this.pushFloatDouble.bind(this),pushTrue:this.pushTrue.bind(this),pushFalse:this.pushFalse.bind(this),pushUndefined:this.pushUndefined.bind(this),pushNull:this.pushNull.bind(this),pushInfinity:this.pushInfinity.bind(this),pushInfinityNeg:this.pushInfinityNeg.bind(this),pushNaN:this.pushNaN.bind(this),pushNaNNeg:this.pushNaNNeg.bind(this),pushArrayStart:this.pushArrayStart.bind(this),pushArrayStartFixed:this.pushArrayStartFixed.bind(this),pushArrayStartFixed32:this.pushArrayStartFixed32.bind(this),pushArrayStartFixed64:this.pushArrayStartFixed64.bind(this),pushObjectStart:this.pushObjectStart.bind(this),pushObjectStartFixed:this.pushObjectStartFixed.bind(this),pushObjectStartFixed32:this.pushObjectStartFixed32.bind(this),pushObjectStartFixed64:this.pushObjectStartFixed64.bind(this),pushByteString:this.pushByteString.bind(this),pushByteStringStart:this.pushByteStringStart.bind(this),pushUtf8String:this.pushUtf8String.bind(this),pushUtf8StringStart:this.pushUtf8StringStart.bind(this),pushSimpleUnassigned:this.pushSimpleUnassigned.bind(this),pushTagUnassigned:this.pushTagUnassigned.bind(this),pushTagStart:this.pushTagStart.bind(this),pushTagStart4:this.pushTagStart4.bind(this),pushTagStart8:this.pushTagStart8.bind(this),pushBreak:this.pushBreak.bind(this)},this._heap)}get _depth(){return this._parents.length}get _currentParent(){return this._parents[this._depth-1]}get _ref(){return this._currentParent.ref}_closeParent(){var e=this._parents.pop();if(e.length>0)throw new Error(`Missing ${e.length} elements`);switch(e.type){case Re.PARENT.TAG:this._push(this.createTag(e.ref[0],e.ref[1]));break;case Re.PARENT.BYTE_STRING:this._push(this.createByteString(e.ref,e.length));break;case Re.PARENT.UTF8_STRING:this._push(this.createUtf8String(e.ref,e.length));break;case Re.PARENT.MAP:if(e.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createMap(e.ref,e.length));break;case Re.PARENT.OBJECT:if(e.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createObject(e.ref,e.length));break;case Re.PARENT.ARRAY:this._push(this.createArray(e.ref,e.length));break}this._currentParent&&this._currentParent.type===Re.PARENT.TAG&&this._dec()}_dec(){const e=this._currentParent;e.length<0||(e.length--,e.length===0&&this._closeParent())}_push(e,r){const n=this._currentParent;switch(n.values++,n.type){case Re.PARENT.ARRAY:case Re.PARENT.BYTE_STRING:case Re.PARENT.UTF8_STRING:n.length>-1?this._ref[this._ref.length-n.length]=e:this._ref.push(e),this._dec();break;case Re.PARENT.OBJECT:n.tmpKey!=null?(this._ref[n.tmpKey]=e,n.tmpKey=null,this._dec()):(n.tmpKey=e,typeof n.tmpKey!="string"&&(n.type=Re.PARENT.MAP,n.ref=it.buildMap(n.ref)));break;case Re.PARENT.MAP:n.tmpKey!=null?(this._ref.set(n.tmpKey,e),n.tmpKey=null,this._dec()):n.tmpKey=e;break;case Re.PARENT.TAG:this._ref.push(e),r||this._dec();break;default:throw new Error("Unknown parent type")}}_createParent(e,r,n){this._parents[this._depth]={type:r,length:n,ref:e,values:0,tmpKey:null}}_reset(){this._res=[],this._parents=[{type:Re.PARENT.ARRAY,length:-1,ref:this._res,values:0,tmpKey:null}]}createTag(e,r){const n=this._knownTags[e];return n?n(r):new Zu(e,r)}createMap(e,r){return e}createObject(e,r){return e}createArray(e,r){return e}createByteString(e,r){return Er.concat(e)}createByteStringFromHeap(e,r){return e===r?Er.alloc(0):Er.from(this._heap.slice(e,r))}createInt(e){return e}createInt32(e,r){return it.buildInt32(e,r)}createInt64(e,r,n,i){return it.buildInt64(e,r,n,i)}createFloat(e){return e}createFloatSingle(e,r,n,i){return Ms.read([e,r,n,i],0,!1,23,4)}createFloatDouble(e,r,n,i,u,f,a,w){return Ms.read([e,r,n,i,u,f,a,w],0,!1,52,8)}createInt32Neg(e,r){return-1-it.buildInt32(e,r)}createInt64Neg(e,r,n,i){const u=it.buildInt32(e,r),f=it.buildInt32(n,i);return u>Re.MAX_SAFE_HIGH?Re.NEG_ONE.minus(new Yu(u).times(Re.SHIFT32).plus(f)):-1-(u*Re.SHIFT32+f)}createTrue(){return!0}createFalse(){return!1}createNull(){return null}createUndefined(){}createInfinity(){return 1/0}createInfinityNeg(){return-1/0}createNaN(){return NaN}createNaNNeg(){return NaN}createUtf8String(e,r){return e.join("")}createUtf8StringFromHeap(e,r){return e===r?"":this._buffer.toString("utf8",e,r)}createSimpleUnassigned(e){return new Wu(e)}pushInt(e){this._push(this.createInt(e))}pushInt32(e,r){this._push(this.createInt32(e,r))}pushInt64(e,r,n,i){this._push(this.createInt64(e,r,n,i))}pushFloat(e){this._push(this.createFloat(e))}pushFloatSingle(e,r,n,i){this._push(this.createFloatSingle(e,r,n,i))}pushFloatDouble(e,r,n,i,u,f,a,w){this._push(this.createFloatDouble(e,r,n,i,u,f,a,w))}pushInt32Neg(e,r){this._push(this.createInt32Neg(e,r))}pushInt64Neg(e,r,n,i){this._push(this.createInt64Neg(e,r,n,i))}pushTrue(){this._push(this.createTrue())}pushFalse(){this._push(this.createFalse())}pushNull(){this._push(this.createNull())}pushUndefined(){this._push(this.createUndefined())}pushInfinity(){this._push(this.createInfinity())}pushInfinityNeg(){this._push(this.createInfinityNeg())}pushNaN(){this._push(this.createNaN())}pushNaNNeg(){this._push(this.createNaNNeg())}pushArrayStart(){this._createParent([],Re.PARENT.ARRAY,-1)}pushArrayStartFixed(e){this._createArrayStartFixed(e)}pushArrayStartFixed32(e,r){const n=it.buildInt32(e,r);this._createArrayStartFixed(n)}pushArrayStartFixed64(e,r,n,i){const u=it.buildInt64(e,r,n,i);this._createArrayStartFixed(u)}pushObjectStart(){this._createObjectStartFixed(-1)}pushObjectStartFixed(e){this._createObjectStartFixed(e)}pushObjectStartFixed32(e,r){const n=it.buildInt32(e,r);this._createObjectStartFixed(n)}pushObjectStartFixed64(e,r,n,i){const u=it.buildInt64(e,r,n,i);this._createObjectStartFixed(u)}pushByteStringStart(){this._parents[this._depth]={type:Re.PARENT.BYTE_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushByteString(e,r){this._push(this.createByteStringFromHeap(e,r))}pushUtf8StringStart(){this._parents[this._depth]={type:Re.PARENT.UTF8_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushUtf8String(e,r){this._push(this.createUtf8StringFromHeap(e,r))}pushSimpleUnassigned(e){this._push(this.createSimpleUnassigned(e))}pushTagStart(e){this._parents[this._depth]={type:Re.PARENT.TAG,length:1,ref:[e]}}pushTagStart4(e,r){this.pushTagStart(it.buildInt32(e,r))}pushTagStart8(e,r,n,i){this.pushTagStart(it.buildInt64(e,r,n,i))}pushTagUnassigned(e){this._push(this.createTag(e))}pushBreak(){if(this._currentParent.length>-1)throw new Error("Unexpected break");this._closeParent()}_createObjectStartFixed(e){if(e===0){this._push(this.createObject({}));return}this._createParent({},Re.PARENT.OBJECT,e)}_createArrayStartFixed(e){if(e===0){this._push(this.createArray([]));return}this._createParent(new Array(e),Re.PARENT.ARRAY,e)}_decode(e){if(e.byteLength===0)throw new Error("Input too short");this._reset(),this._heap8.set(e);const r=this.parser.parse(e.byteLength);if(this._depth>1){for(;this._currentParent.length===0;)this._closeParent();if(this._depth>1)throw new Error("Undeterminated nesting")}if(r>0)throw new Error("Failed to parse");if(this._res.length===0)throw new Error("No valid result")}decodeFirst(e){return this._decode(e),this._res[0]}decodeAll(e){return this._decode(e),this._res}static decode(e,r){return typeof e=="string"&&(e=Er.from(e,r||"hex")),new Di({size:e.length}).decodeFirst(e)}static decodeAll(e,r){return typeof e=="string"&&(e=Er.from(e,r||"hex")),new Di({size:e.length}).decodeAll(e)}};Qi.decodeFirst=Qi.decode;var ba=Qi;const{Buffer:Ri}=dn,Xu=ba,Ju=li;class bs extends Xu{createTag(e,r){return`${e}(${r})`}createInt(e){return super.createInt(e).toString()}createInt32(e,r){return super.createInt32(e,r).toString()}createInt64(e,r,n,i){return super.createInt64(e,r,n,i).toString()}createInt32Neg(e,r){return super.createInt32Neg(e,r).toString()}createInt64Neg(e,r,n,i){return super.createInt64Neg(e,r,n,i).toString()}createTrue(){return"true"}createFalse(){return"false"}createFloat(e){const r=super.createFloat(e);return Ju.isNegativeZero(e)?"-0_1":`${r}_1`}createFloatSingle(e,r,n,i){return`${super.createFloatSingle(e,r,n,i)}_2`}createFloatDouble(e,r,n,i,u,f,a,w){return`${super.createFloatDouble(e,r,n,i,u,f,a,w)}_3`}createByteString(e,r){const n=e.join(", ");return r===-1?`(_ ${n})`:`h'${n}`}createByteStringFromHeap(e,r){return`h'${Ri.from(super.createByteStringFromHeap(e,r)).toString("hex")}'`}createInfinity(){return"Infinity_1"}createInfinityNeg(){return"-Infinity_1"}createNaN(){return"NaN_1"}createNaNNeg(){return"-NaN_1"}createNull(){return"null"}createUndefined(){return"undefined"}createSimpleUnassigned(e){return`simple(${e})`}createArray(e,r){const n=super.createArray(e,r);return r===-1?`[_ ${n.join(", ")}]`:`[${n.join(", ")}]`}createMap(e,r){const n=super.createMap(e),i=Array.from(n.keys()).reduce(Ps(n),"");return r===-1?`{_ ${i}}`:`{${i}}`}createObject(e,r){const n=super.createObject(e),i=Object.keys(n).reduce(Ps(n),"");return r===-1?`{_ ${i}}`:`{${i}}`}createUtf8String(e,r){const n=e.join(", ");return r===-1?`(_ ${n})`:`"${n}"`}createUtf8StringFromHeap(e,r){return`"${Ri.from(super.createUtf8StringFromHeap(e,r)).toString("utf8")}"`}static diagnose(e,r){return typeof e=="string"&&(e=Ri.from(e,r||"hex")),new bs().decodeFirst(e)}}var Qu=bs;function Ps(t){return(e,r)=>e?`${e}, ${r}: ${t[r]}`:`${r}: ${t[r]}`}const{Buffer:St}=dn,{URL:Du}=ma,es=fi.BigNumber,Fi=li,je=nt,yt=je.MT,Bn=je.NUMBYTES,ks=je.SHIFT32,$s=je.SYMS,Br=je.TAG,ef=je.MT.SIMPLE_FLOAT<<5|je.NUMBYTES.TWO,tf=je.MT.SIMPLE_FLOAT<<5|je.NUMBYTES.FOUR,rf=je.MT.SIMPLE_FLOAT<<5|je.NUMBYTES.EIGHT,nf=je.MT.SIMPLE_FLOAT<<5|je.SIMPLE.TRUE,sf=je.MT.SIMPLE_FLOAT<<5|je.SIMPLE.FALSE,of=je.MT.SIMPLE_FLOAT<<5|je.SIMPLE.UNDEFINED,Cs=je.MT.SIMPLE_FLOAT<<5|je.SIMPLE.NULL,af=new es("0x20000000000000"),cf=St.from("f97e00","hex"),uf=St.from("f9fc00","hex"),ff=St.from("f97c00","hex");function lf(t){return{}.toString.call(t).slice(8,-1)}class Qn{constructor(e){e=e||{},this.streaming=typeof e.stream=="function",this.onData=e.stream,this.semanticTypes=[[Du,this._pushUrl],[es,this._pushBigNumber]];const r=e.genTypes||[],n=r.length;for(let i=0;i<n;i++)this.addSemanticType(r[i][0],r[i][1]);this._reset()}addSemanticType(e,r){const n=this.semanticTypes.length;for(let i=0;i<n;i++)if(this.semanticTypes[i][0]===e){const f=this.semanticTypes[i][1];return this.semanticTypes[i][1]=r,f}return this.semanticTypes.push([e,r]),null}push(e){return e&&(this.result[this.offset]=e,this.resultMethod[this.offset]=0,this.resultLength[this.offset]=e.length,this.offset++,this.streaming&&this.onData(this.finalize())),!0}pushWrite(e,r,n){return this.result[this.offset]=e,this.resultMethod[this.offset]=r,this.resultLength[this.offset]=n,this.offset++,this.streaming&&this.onData(this.finalize()),!0}_pushUInt8(e){return this.pushWrite(e,1,1)}_pushUInt16BE(e){return this.pushWrite(e,2,2)}_pushUInt32BE(e){return this.pushWrite(e,3,4)}_pushDoubleBE(e){return this.pushWrite(e,4,8)}_pushNaN(){return this.push(cf)}_pushInfinity(e){const r=e<0?uf:ff;return this.push(r)}_pushFloat(e){const r=St.allocUnsafe(2);if(Fi.writeHalf(r,e)&&Fi.parseHalf(r)===e)return this._pushUInt8(ef)&&this.push(r);const n=St.allocUnsafe(4);return n.writeFloatBE(e,0),n.readFloatBE(0)===e?this._pushUInt8(tf)&&this.push(n):this._pushUInt8(rf)&&this._pushDoubleBE(e)}_pushInt(e,r,n){const i=r<<5;return e<24?this._pushUInt8(i|e):e<=255?this._pushUInt8(i|Bn.ONE)&&this._pushUInt8(e):e<=65535?this._pushUInt8(i|Bn.TWO)&&this._pushUInt16BE(e):e<=4294967295?this._pushUInt8(i|Bn.FOUR)&&this._pushUInt32BE(e):e<=Number.MAX_SAFE_INTEGER?this._pushUInt8(i|Bn.EIGHT)&&this._pushUInt32BE(Math.floor(e/ks))&&this._pushUInt32BE(e%ks):r===yt.NEG_INT?this._pushFloat(n):this._pushFloat(e)}_pushIntNum(e){return e<0?this._pushInt(-e-1,yt.NEG_INT,e):this._pushInt(e,yt.POS_INT)}_pushNumber(e){switch(!1){case e===e:return this._pushNaN(e);case isFinite(e):return this._pushInfinity(e);case e%1!==0:return this._pushIntNum(e);default:return this._pushFloat(e)}}_pushString(e){const r=St.byteLength(e,"utf8");return this._pushInt(r,yt.UTF8_STRING)&&this.pushWrite(e,5,r)}_pushBoolean(e){return this._pushUInt8(e?nf:sf)}_pushUndefined(e){return this._pushUInt8(of)}_pushArray(e,r){const n=r.length;if(!e._pushInt(n,yt.ARRAY))return!1;for(let i=0;i<n;i++)if(!e.pushAny(r[i]))return!1;return!0}_pushTag(e){return this._pushInt(e,yt.TAG)}_pushDate(e,r){return e._pushTag(Br.DATE_EPOCH)&&e.pushAny(Math.round(r/1e3))}_pushBuffer(e,r){return e._pushInt(r.length,yt.BYTE_STRING)&&e.push(r)}_pushNoFilter(e,r){return e._pushBuffer(e,r.slice())}_pushRegexp(e,r){return e._pushTag(Br.REGEXP)&&e.pushAny(r.source)}_pushSet(e,r){if(!e._pushInt(r.size,yt.ARRAY))return!1;for(const n of r)if(!e.pushAny(n))return!1;return!0}_pushUrl(e,r){return e._pushTag(Br.URI)&&e.pushAny(r.format())}_pushBigint(e){let r=Br.POS_BIGINT;e.isNegative()&&(e=e.negated().minus(1),r=Br.NEG_BIGINT);let n=e.toString(16);n.length%2&&(n="0"+n);const i=St.from(n,"hex");return this._pushTag(r)&&this._pushBuffer(this,i)}_pushBigNumber(e,r){if(r.isNaN())return e._pushNaN();if(!r.isFinite())return e._pushInfinity(r.isNegative()?-1/0:1/0);if(r.isInteger())return e._pushBigint(r);if(!(e._pushTag(Br.DECIMAL_FRAC)&&e._pushInt(2,yt.ARRAY)))return!1;const n=r.decimalPlaces(),i=r.multipliedBy(new es(10).pow(n));return e._pushIntNum(-n)?i.abs().isLessThan(af)?e._pushIntNum(i.toNumber()):e._pushBigint(i):!1}_pushMap(e,r){return e._pushInt(r.size,yt.MAP)?this._pushRawMap(r.size,Array.from(r)):!1}_pushObject(e){if(!e)return this._pushUInt8(Cs);for(var r=this.semanticTypes.length,n=0;n<r;n++)if(e instanceof this.semanticTypes[n][0])return this.semanticTypes[n][1].call(e,this,e);var i=e.encodeCBOR;if(typeof i=="function")return i.call(e,this);var u=Object.keys(e),f=u.length;return this._pushInt(f,yt.MAP)?this._pushRawMap(f,u.map(a=>[a,e[a]])):!1}_pushRawMap(e,r){r=r.map(function(i){return i[0]=Qn.encode(i[0]),i}).sort(Fi.keySorter);for(var n=0;n<e;n++)if(!this.push(r[n][0])||!this.pushAny(r[n][1]))return!1;return!0}write(e){return this.pushAny(e)}pushAny(e){var r=lf(e);switch(r){case"Number":return this._pushNumber(e);case"String":return this._pushString(e);case"Boolean":return this._pushBoolean(e);case"Object":return this._pushObject(e);case"Array":return this._pushArray(this,e);case"Uint8Array":return this._pushBuffer(this,St.isBuffer(e)?e:St.from(e));case"Null":return this._pushUInt8(Cs);case"Undefined":return this._pushUndefined(e);case"Map":return this._pushMap(this,e);case"Set":return this._pushSet(this,e);case"URL":return this._pushUrl(this,e);case"BigNumber":return this._pushBigNumber(this,e);case"Date":return this._pushDate(this,e);case"RegExp":return this._pushRegexp(this,e);case"Symbol":switch(e){case $s.NULL:return this._pushObject(null);case $s.UNDEFINED:return this._pushUndefined(void 0);default:throw new Error("Unknown symbol: "+e.toString())}default:throw new Error("Unknown type: "+typeof e+", "+(e?e.toString():""))}}finalize(){if(this.offset===0)return null;for(var e=this.result,r=this.resultLength,n=this.resultMethod,i=this.offset,u=0,f=0;f<i;f++)u+=r[f];var a=St.allocUnsafe(u),w=0,_=0;for(f=0;f<i;f++){switch(_=r[f],n[f]){case 0:e[f].copy(a,w);break;case 1:a.writeUInt8(e[f],w,!0);break;case 2:a.writeUInt16BE(e[f],w,!0);break;case 3:a.writeUInt32BE(e[f],w,!0);break;case 4:a.writeDoubleBE(e[f],w,!0);break;case 5:a.write(e[f],w,_,"utf8");break;default:throw new Error("unkown method")}w+=_}var x=a;return this._reset(),x}_reset(){this.result=[],this.resultMethod=[],this.resultLength=[],this.offset=0}static encode(e){const r=new Qn;if(!r.pushAny(e))throw new Error("Failed to encode input");return r.finalize()}}var hf=Qn;(function(t){t.Diagnose=Qu,t.Decoder=ba,t.Encoder=hf,t.Simple=pa,t.Tagged=ya,t.decodeAll=t.Decoder.decodeAll,t.decodeFirst=t.Decoder.decodeFirst,t.diagnose=t.Diagnose.diagnose,t.encode=t.Encoder.encode,t.decode=t.Decoder.decode,t.leveldb={decode:t.Decoder.decodeAll,encode:t.Encoder.encode,buffer:!0,name:"cbor"}})(ha);const _a=Oc(ha);function bt(t){return Un(gu.create().update(new Uint8Array(t)).digest())}function Fn(t){if(t instanceof _a.Tagged)return Fn(t.value);if(typeof t=="string")return xa(t);if(typeof t=="number")return bt(ke(t));if(t instanceof ArrayBuffer||ArrayBuffer.isView(t))return bt(t);if(Array.isArray(t)){const e=t.map(Fn);return bt(Rt(...e))}else{if(t&&typeof t=="object"&&t._isPrincipal)return bt(t.toUint8Array());if(typeof t=="object"&&t!==null&&typeof t.toHash=="function")return Fn(t.toHash());if(typeof t=="object")return Dn(t);if(typeof t=="bigint")return bt(ke(t))}throw Object.assign(new Error(`Attempt to hash a value of unsupported type: ${t}`),{value:t})}const xa=t=>{const e=new TextEncoder().encode(t);return bt(e)};function qs(t){return Dn(t)}function Dn(t){const n=Object.entries(t).filter(([,f])=>f!==void 0).map(([f,a])=>{const w=xa(f),_=Fn(a);return[w,_]}).sort(([f],[a])=>So(f,a)),i=Rt(...n.map(f=>Rt(...f)));return bt(i)}globalThis&&globalThis.__rest;new TextEncoder().encode(`
ic-request`);class Gs{getPrincipal(){return xe.anonymous()}async transformRequest(e){return Object.assign(Object.assign({},e),{body:{content:e.body}})}}var qt={},jr={},Oe={};Object.defineProperty(Oe,"__esModule",{value:!0});const df=9007199254740992;function Vt(t,...e){const r=new Uint8Array(t.byteLength+e.reduce((i,u)=>i+u.byteLength,0));r.set(new Uint8Array(t),0);let n=t.byteLength;for(const i of e)r.set(new Uint8Array(i),n),n+=i.byteLength;return r.buffer}function _t(t,e,r){r=r.replace(/[^0-9a-fA-F]/g,"");const n=2**(e-24);r=r.slice(-n*2).padStart(n*2,"0");const i=[(t<<5)+e].concat(r.match(/../g).map(u=>parseInt(u,16)));return new Uint8Array(i).buffer}function hi(t,e){if(e<24)return new Uint8Array([(t<<5)+e]).buffer;{const r=e<=255?24:e<=65535?25:e<=4294967295?26:27;return _t(t,r,e.toString(16))}}function Ea(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n<128?e.push(n):n<2048?e.push(192|n>>6,128|n&63):n<55296||n>=57344?e.push(224|n>>12,128|n>>6&63,128|n&63):(r++,n=(n&1023)<<10|t.charCodeAt(r)&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63))}return Vt(new Uint8Array(hi(3,t.length)),new Uint8Array(e))}function pf(t,e){if(t==14277111)return Vt(new Uint8Array([217,217,247]),e);if(t<24)return Vt(new Uint8Array([192+t]),e);{const r=t<=255?24:t<=65535?25:t<=4294967295?26:27,n=2**(r-24),i=t.toString(16).slice(-n*2).padStart(n*2,"0"),u=[192+r].concat(i.match(/../g).map(f=>parseInt(f,16)));return new Uint8Array(u).buffer}}Oe.tagged=pf;function pn(t){return new Uint8Array(t).buffer}Oe.raw=pn;function _s(t){if(isNaN(t))throw new RangeError("Invalid number.");t=Math.min(Math.max(0,t),23);const e=[0+t];return new Uint8Array(e).buffer}Oe.uSmall=_s;function Ba(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,t),255),t=t.toString(16),_t(0,24,t)}Oe.u8=Ba;function Aa(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,t),65535),t=t.toString(16),_t(0,25,t)}Oe.u16=Aa;function Ta(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,t),4294967295),t=t.toString(16),_t(0,26,t)}Oe.u32=Ta;function xs(t,e){if(typeof t=="string"&&e==16){if(t.match(/[^0-9a-fA-F]/))throw new RangeError("Invalid number.");return _t(0,27,t)}if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,t),df),t=t.toString(16),_t(0,27,t)}Oe.u64=xs;function va(t){if(isNaN(t))throw new RangeError("Invalid number.");if(t===0)return _s(0);t=Math.min(Math.max(0,-t),24)-1;const e=[32+t];return new Uint8Array(e).buffer}Oe.iSmall=va;function Sa(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,-t-1),255),t=t.toString(16),_t(1,24,t)}Oe.i8=Sa;function Na(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,-t-1),65535),t=t.toString(16),_t(1,25,t)}Oe.i16=Na;function Ia(t,e){if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,-t-1),4294967295),t=t.toString(16),_t(1,26,t)}Oe.i32=Ia;function Ua(t,e){if(typeof t=="string"&&e==16){if(t.startsWith("-")?t=t.slice(1):t="0",t.match(/[^0-9a-fA-F]/)||t.length>16)throw new RangeError("Invalid number.");let r=!1,n=t.split("").reduceRight((i,u)=>{if(r)return u+i;let f=parseInt(u,16)-1;return f>=0?(r=!0,f.toString(16)+i):"f"+i},"");return r?_t(1,27,n):xs(0)}if(t=parseInt(""+t,e),isNaN(t))throw new RangeError("Invalid number.");return t=Math.min(Math.max(0,-t-1),9007199254740992),t=t.toString(16),_t(1,27,t)}Oe.i64=Ua;function yf(t){return t>=0?t<24?_s(t):t<=255?Ba(t):t<=65535?Aa(t):t<=4294967295?Ta(t):xs(t):t>=-24?va(t):t>=-255?Sa(t):t>=-65535?Na(t):t>=-4294967295?Ia(t):Ua(t)}Oe.number=yf;function wf(t){return Vt(hi(2,t.byteLength),t)}Oe.bytes=wf;function gf(t){return Ea(t)}Oe.string=gf;function mf(t){return Vt(hi(4,t.length),...t)}Oe.array=mf;function bf(t,e=!1){t instanceof Map||(t=new Map(Object.entries(t)));let r=Array.from(t.entries());return e&&(r=r.sort(([n],[i])=>n.localeCompare(i))),Vt(hi(5,t.size),...r.map(([n,i])=>Vt(Ea(n),i)))}Oe.map=bf;function _f(t){const e=new Float32Array([t]);return Vt(new Uint8Array([224+26]),new Uint8Array(e.buffer))}Oe.singleFloat=_f;function xf(t){const e=new Float64Array([t]);return Vt(new Uint8Array([224+27]),new Uint8Array(e.buffer))}Oe.doubleFloat=xf;function Ef(t){return t?Ra():Fa()}Oe.bool=Ef;function Ra(){return pn(new Uint8Array([224+21]))}Oe.true_=Ra;function Fa(){return pn(new Uint8Array([224+20]))}Oe.false_=Fa;function Bf(){return pn(new Uint8Array([224+22]))}Oe.null_=Bf;function Af(){return pn(new Uint8Array([224+23]))}Oe.undefined_=Af;var Tf=kr&&kr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(jr,"__esModule",{value:!0});const wt=Tf(Oe),vf=[ArrayBuffer,Uint8Array,Uint16Array,Uint32Array,Int8Array,Int16Array,Int32Array,Float32Array,Float64Array];class Oa{constructor(e,r=!1){this._serializer=e,this._stable=r,this.name="jsonDefault",this.priority=-100}match(e){return["undefined","boolean","number","string","object"].indexOf(typeof e)!=-1}encode(e){switch(typeof e){case"undefined":return wt.undefined_();case"boolean":return wt.bool(e);case"number":return Math.floor(e)===e?wt.number(e):wt.doubleFloat(e);case"string":return wt.string(e);case"object":if(e===null)return wt.null_();if(Array.isArray(e))return wt.array(e.map(r=>this._serializer.serializeValue(r)));if(vf.find(r=>e instanceof r))return wt.bytes(e.buffer);if(Object.getOwnPropertyNames(e).indexOf("toJSON")!==-1)return this.encode(e.toJSON());if(e instanceof Map){const r=new Map;for(const[n,i]of e.entries())r.set(n,this._serializer.serializeValue(i));return wt.map(r,this._stable)}else{const r=new Map;for(const[n,i]of Object.entries(e))r.set(n,this._serializer.serializeValue(i));return wt.map(r,this._stable)}default:throw new Error("Invalid value.")}}}jr.JsonDefaultCborEncoder=Oa;class Ma{constructor(){this.name="cborEncoder",this.priority=-90}match(e){return typeof e=="object"&&typeof e.toCBOR=="function"}encode(e){return e.toCBOR()}}jr.ToCborEncoder=Ma;class Pa{constructor(){this._encoders=new Set}static withDefaultEncoders(e=!1){const r=new this;return r.addEncoder(new Oa(r,e)),r.addEncoder(new Ma),r}removeEncoder(e){for(const r of this._encoders.values())r.name==e&&this._encoders.delete(r)}addEncoder(e){this._encoders.add(e)}getEncoderFor(e){let r=null;for(const n of this._encoders)(!r||n.priority>r.priority)&&n.match(e)&&(r=n);if(r===null)throw new Error("Could not find an encoder for value.");return r}serializeValue(e){return this.getEncoderFor(e).encode(e)}serialize(e){return this.serializeValue(e)}}jr.CborSerializer=Pa;class Sf extends Pa{serialize(e){return wt.raw(new Uint8Array([...new Uint8Array([217,217,247]),...new Uint8Array(super.serializeValue(e))]))}}jr.SelfDescribeCborSerializer=Sf;(function(t){function e(i){for(var u in i)t.hasOwnProperty(u)||(t[u]=i[u])}var r=kr&&kr.__importStar||function(i){if(i&&i.__esModule)return i;var u={};if(i!=null)for(var f in i)Object.hasOwnProperty.call(i,f)&&(u[f]=i[f]);return u.default=i,u};Object.defineProperty(t,"__esModule",{value:!0}),e(jr);const n=r(Oe);t.value=n})(qt);class Nf{get name(){return"Principal"}get priority(){return 0}match(e){return e&&e._isPrincipal===!0}encode(e){return qt.value.bytes(e.toUint8Array())}}class If{get name(){return"Buffer"}get priority(){return 1}match(e){return e instanceof ArrayBuffer||ArrayBuffer.isView(e)}encode(e){return qt.value.bytes(new Uint8Array(e))}}class Uf{get name(){return"BigInt"}get priority(){return 1}match(e){return typeof e=="bigint"}encode(e){return e>BigInt(0)?qt.value.tagged(2,qt.value.bytes(Ln(e.toString(16)))):qt.value.tagged(3,qt.value.bytes(Ln((BigInt("-1")*e).toString(16))))}}const di=qt.SelfDescribeCborSerializer.withDefaultEncoders(!0);di.addEncoder(new Nf);di.addEncoder(new If);di.addEncoder(new Uf);var ts;(function(t){t[t.Uint64LittleEndian=71]="Uint64LittleEndian",t[t.Semantic=55799]="Semantic"})(ts||(ts={}));function Oi(t){return di.serialize(t)}function Vs(t){const e=t.byteLength;let r=BigInt(0);for(let n=0;n<e;n++)r=r*BigInt(256)+BigInt(t[n]);return r}class Rf extends _a.Decoder{createByteString(e){return Rt(...e)}createByteStringFromHeap(e,r){return e===r?new ArrayBuffer(0):new Uint8Array(this._heap.slice(e,r))}}function Gt(t){const e=new Uint8Array(t),r=new Rf({size:e.byteLength,tags:{2:n=>Vs(n),3:n=>-Vs(n),[ts.Semantic]:n=>n}});try{return r.decodeFirst(e)}catch(n){throw new Error(`Failed to decode CBOR: ${n}, input: ${Ke(e)}`)}}const An=()=>{if(typeof window<"u"&&window.crypto&&window.crypto.getRandomValues){const t=new Uint32Array(1);return window.crypto.getRandomValues(t),t[0]}if(typeof crypto<"u"&&crypto.getRandomValues){const t=new Uint32Array(1);return crypto.getRandomValues(t),t[0]}return typeof crypto<"u"&&crypto.randomInt?crypto.randomInt(0,4294967295):Math.floor(Math.random()*4294967295)};var rs;(function(t){t.Call="call"})(rs||(rs={}));function ns(){const t=new ArrayBuffer(16),e=new DataView(t),r=An(),n=An(),i=An(),u=An();return e.setUint32(0,r),e.setUint32(4,n),e.setUint32(8,i),e.setUint32(12,u),t}const Hs=BigInt(1e6),Ff=60*1e3;class Tn{constructor(e){if(e<90*1e3){const a=BigInt(Date.now()+e)*Hs/BigInt(1e9);this._value=a*BigInt(1e9);return}const u=BigInt(Math.floor(Date.now()+e-Ff))*Hs/BigInt(1e9)/BigInt(60)*BigInt(60)*BigInt(1e9);this._value=u}toCBOR(){return qt.value.u64(this._value.toString(16),16)}toHash(){return ke(this._value)}}function js(t=ns){return async e=>{const r=e.request.headers;e.request.headers=r,e.endpoint==="call"&&(e.body.nonce=t())}}function Wr(t){const e=[];return t.forEach((r,n)=>{e.push([n,r])}),e}class Mi extends Pe{constructor(e,r){super(e),this.response=r,this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}}class Of extends Pe{constructor(e,r,n,i,u,f){super(e),this.response=r,this.requestId=n,this.senderPubkey=i,this.senderSig=u,this.ingressExpiry=f,this.name="AgentCallError",Object.setPrototypeOf(this,new.target.prototype)}}class Mf extends Pe{constructor(e,r,n,i,u,f){super(e),this.response=r,this.requestId=n,this.senderPubkey=i,this.senderSig=u,this.ingressExpiry=f,this.name="AgentQueryError",Object.setPrototypeOf(this,new.target.prototype)}}class Pf extends Pe{constructor(e,r,n,i,u,f){super(e),this.response=r,this.requestId=n,this.senderPubkey=i,this.senderSig=u,this.ingressExpiry=f,this.name="AgentReadStateError",Object.setPrototypeOf(this,new.target.prototype)}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Es=BigInt(0),ei=BigInt(1);function sn(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function ka(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Es:BigInt("0x"+t)}function Ft(t){return ka(Cr(t))}function on(t){return Je(t),ka(Cr(Uint8Array.from(t).reverse()))}function Le(t,e){return xo(t.toString(16).padStart(e*2,"0"))}function pi(t,e){return Le(t,e).reverse()}function at(t,e,r){let n;if(typeof e=="string")try{n=xo(e)}catch(u){throw new Error(t+" must be hex string or Uint8Array, cause: "+u)}else if(ls(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}const Pi=t=>typeof t=="bigint"&&Es<=t;function $a(t,e,r){return Pi(t)&&Pi(e)&&Pi(r)&&e<=t&&t<r}function Zr(t,e,r,n){if(!$a(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function en(t){let e;for(e=0;t>Es;t>>=ei,e+=1);return e}function kf(t,e){return t>>BigInt(e)&ei}const Mr=t=>(ei<<BigInt(t))-ei;function $f(t){return typeof t=="function"&&Number.isSafeInteger(t.outputLen)}function yn(t,e,r={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function n(i,u,f){const a=t[i];if(f&&a===void 0)return;const w=typeof a;if(w!==u||a===null)throw new Error(`param "${i}" is invalid: expected ${u}, got ${w}`)}Object.entries(e).forEach(([i,u])=>n(i,u,!1)),Object.entries(r).forEach(([i,u])=>n(i,u,!0))}const zs=()=>{throw new Error("not implemented")};function an(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(i!==void 0)return i;const u=t(r,...n);return e.set(r,u),u}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ut=BigInt(0),Xe=BigInt(1),ar=BigInt(2),Cf=BigInt(3),Ca=BigInt(4),qa=BigInt(5),Ga=BigInt(8);function Ge(t,e){const r=t%e;return r>=ut?r:e+r}function Et(t,e,r){let n=t;for(;e-- >ut;)n*=n,n%=r;return n}function Ys(t,e){if(t===ut)throw new Error("invert: expected non-zero number");if(e<=ut)throw new Error("invert: expected positive modulus, got "+e);let r=Ge(t,e),n=e,i=ut,u=Xe;for(;r!==ut;){const a=n/r,w=n%r,_=i-u*a;n=r,r=w,i=u,u=_}if(n!==Xe)throw new Error("invert: does not exist");return Ge(i,e)}function Va(t,e){const r=(t.ORDER+Xe)/Ca,n=t.pow(e,r);if(!t.eql(t.sqr(n),e))throw new Error("Cannot find square root");return n}function qf(t,e){const r=(t.ORDER-qa)/Ga,n=t.mul(e,ar),i=t.pow(n,r),u=t.mul(e,i),f=t.mul(t.mul(u,ar),i),a=t.mul(u,t.sub(f,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function Gf(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-Xe,r=0;for(;e%ar===ut;)e/=ar,r++;let n=ar;const i=gr(t);for(;ti(i,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return Va;let u=i.pow(n,e);const f=(e+Xe)/ar;return function(w,_){if(w.is0(_))return _;if(ti(w,_)!==1)throw new Error("Cannot find square root");let x=r,N=w.mul(w.ONE,u),M=w.pow(_,e),T=w.pow(_,f);for(;!w.eql(M,w.ONE);){if(w.is0(M))return w.ZERO;let y=1,G=w.sqr(M);for(;!w.eql(G,w.ONE);)if(y++,G=w.sqr(G),y===x)throw new Error("Cannot find square root");const V=Xe<<BigInt(x-y-1),W=w.pow(N,V);x=y,N=w.sqr(W),M=w.mul(M,N),T=w.mul(T,W)}return T}}function Vf(t){return t%Ca===Cf?Va:t%Ga===qa?qf:Gf(t)}const Hf=(t,e)=>(Ge(t,e)&Xe)===Xe,jf=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ha(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},r=jf.reduce((n,i)=>(n[i]="function",n),e);return yn(t,r),t}function On(t,e,r){if(r<ut)throw new Error("invalid exponent, negatives unsupported");if(r===ut)return t.ONE;if(r===Xe)return e;let n=t.ONE,i=e;for(;r>ut;)r&Xe&&(n=t.mul(n,i)),i=t.sqr(i),r>>=Xe;return n}function fr(t,e,r=!1){const n=new Array(e.length).fill(r?t.ZERO:void 0),i=e.reduce((f,a,w)=>t.is0(a)?f:(n[w]=f,t.mul(f,a)),t.ONE),u=t.inv(i);return e.reduceRight((f,a,w)=>t.is0(a)?f:(n[w]=t.mul(f,n[w]),t.mul(f,a)),u),n}function ti(t,e){const r=(t.ORDER-Xe)/ar,n=t.pow(e,r),i=t.eql(n,t.ONE),u=t.eql(n,t.ZERO),f=t.eql(n,t.neg(t.ONE));if(!i&&!u&&!f)throw new Error("invalid Legendre symbol result");return i?1:u?0:-1}function zf(t,e){e!==void 0&&Lc(e);const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function gr(t,e,r=!1,n={}){if(t<=ut)throw new Error("invalid field: expected ORDER > 0, got "+t);let i,u;if(typeof e=="object"&&e!=null){if(n.sqrt||r)throw new Error("cannot specify opts in two arguments");const x=e;x.BITS&&(i=x.BITS),x.sqrt&&(u=x.sqrt),typeof x.isLE=="boolean"&&(r=x.isLE)}else typeof e=="number"&&(i=e),n.sqrt&&(u=n.sqrt);const{nBitLength:f,nByteLength:a}=zf(t,i);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let w;const _=Object.freeze({ORDER:t,isLE:r,BITS:f,BYTES:a,MASK:Mr(f),ZERO:ut,ONE:Xe,create:x=>Ge(x,t),isValid:x=>{if(typeof x!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof x);return ut<=x&&x<t},is0:x=>x===ut,isValidNot0:x=>!_.is0(x)&&_.isValid(x),isOdd:x=>(x&Xe)===Xe,neg:x=>Ge(-x,t),eql:(x,N)=>x===N,sqr:x=>Ge(x*x,t),add:(x,N)=>Ge(x+N,t),sub:(x,N)=>Ge(x-N,t),mul:(x,N)=>Ge(x*N,t),pow:(x,N)=>On(_,x,N),div:(x,N)=>Ge(x*Ys(N,t),t),sqrN:x=>x*x,addN:(x,N)=>x+N,subN:(x,N)=>x-N,mulN:(x,N)=>x*N,inv:x=>Ys(x,t),sqrt:u||(x=>(w||(w=Vf(t)),w(_,x))),toBytes:x=>r?pi(x,a):Le(x,a),fromBytes:x=>{if(x.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+x.length);return r?on(x):Ft(x)},invertBatch:x=>fr(_,x),cmov:(x,N,M)=>M?N:x});return Object.freeze(_)}function ja(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function za(t){const e=ja(t);return e+Math.ceil(e/2)}function Yf(t,e,r=!1){const n=t.length,i=ja(e),u=za(e);if(n<16||n<u||n>1024)throw new Error("expected "+u+"-1024 bytes of input, got "+n);const f=r?on(t):Ft(t),a=Ge(f,e-Xe)+Xe;return r?pi(a,i):Le(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Gr=BigInt(0),cr=BigInt(1);function tn(t,e){const r=e.negate();return t?r:e}function ri(t,e,r){const n=e==="pz"?f=>f.pz:f=>f.ez,i=fr(t.Fp,r.map(n));return r.map((f,a)=>f.toAffine(i[a])).map(t.fromAffine)}function Ya(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function ki(t,e){Ya(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1),i=2**t,u=Mr(t),f=BigInt(t);return{windows:r,windowSize:n,mask:u,maxNumber:i,shiftBy:f}}function Ks(t,e,r){const{windowSize:n,mask:i,maxNumber:u,shiftBy:f}=r;let a=Number(t&i),w=t>>f;a>n&&(a-=u,w+=cr);const _=e*n,x=_+Math.abs(a)-1,N=a===0,M=a<0,T=e%2!==0;return{nextN:w,offset:x,isZero:N,isNeg:M,isNegF:T,offsetF:_}}function Kf(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function Wf(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const $i=new WeakMap,Ka=new WeakMap;function Ci(t){return Ka.get(t)||1}function Ws(t){if(t!==Gr)throw new Error("invalid wNAF")}function Wa(t,e){return{constTimeNegate:tn,hasPrecomputes(r){return Ci(r)!==1},unsafeLadder(r,n,i=t.ZERO){let u=r;for(;n>Gr;)n&cr&&(i=i.add(u)),u=u.double(),n>>=cr;return i},precomputeWindow(r,n){const{windows:i,windowSize:u}=ki(n,e),f=[];let a=r,w=a;for(let _=0;_<i;_++){w=a,f.push(w);for(let x=1;x<u;x++)w=w.add(a),f.push(w);a=w.double()}return f},wNAF(r,n,i){let u=t.ZERO,f=t.BASE;const a=ki(r,e);for(let w=0;w<a.windows;w++){const{nextN:_,offset:x,isZero:N,isNeg:M,isNegF:T,offsetF:y}=Ks(i,w,a);i=_,N?f=f.add(tn(T,n[y])):u=u.add(tn(M,n[x]))}return Ws(i),{p:u,f}},wNAFUnsafe(r,n,i,u=t.ZERO){const f=ki(r,e);for(let a=0;a<f.windows&&i!==Gr;a++){const{nextN:w,offset:_,isZero:x,isNeg:N}=Ks(i,a,f);if(i=w,!x){const M=n[_];u=u.add(N?M.negate():M)}}return Ws(i),u},getPrecomputes(r,n,i){let u=$i.get(n);return u||(u=this.precomputeWindow(n,r),r!==1&&(typeof i=="function"&&(u=i(u)),$i.set(n,u))),u},wNAFCached(r,n,i){const u=Ci(r);return this.wNAF(u,this.getPrecomputes(u,r,i),n)},wNAFCachedUnsafe(r,n,i,u){const f=Ci(r);return f===1?this.unsafeLadder(r,n,u):this.wNAFUnsafe(f,this.getPrecomputes(f,r,i),n,u)},setWindowSize(r,n){Ya(n,e),Ka.set(r,n),$i.delete(r)}}}function Zf(t,e,r,n){let i=e,u=t.ZERO,f=t.ZERO;for(;r>Gr||n>Gr;)r&cr&&(u=u.add(i)),n&cr&&(f=f.add(i)),i=i.double(),r>>=cr,n>>=cr;return{p1:u,p2:f}}function Za(t,e,r,n){Kf(r,t),Wf(n,e);const i=r.length,u=n.length;if(i!==u)throw new Error("arrays of points and scalars must have equal length");const f=t.ZERO,a=en(BigInt(i));let w=1;a>12?w=a-3:a>4?w=a-2:a>0&&(w=2);const _=Mr(w),x=new Array(Number(_)+1).fill(f),N=Math.floor((e.BITS-1)/w)*w;let M=f;for(let T=N;T>=0;T-=w){x.fill(f);for(let G=0;G<u;G++){const V=n[G],W=Number(V>>BigInt(T)&_);x[W]=x[W].add(r[G])}let y=f;for(let G=x.length-1,V=f;G>0;G--)V=V.add(x[G]),y=y.add(V);if(M=M.add(y),T!==0)for(let G=0;G<w;G++)M=M.double()}return M}function Zs(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Ha(e),e}else return gr(t)}function La(t,e,r={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const a of["p","n","h"]){const w=e[a];if(!(typeof w=="bigint"&&w>Gr))throw new Error(`CURVE.${a} must be positive bigint`)}const n=Zs(e.p,r.Fp),i=Zs(e.n,r.Fn),f=["Gx","Gy","a",t==="weierstrass"?"b":"d"];for(const a of f)if(!n.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return{Fp:n,Fn:i}}const Lf=Ft;function Jt(t,e){if(cn(t),cn(e),t<0||t>=1<<8*e)throw new Error("invalid I2OSP input: "+t);const r=Array.from({length:e}).fill(0);for(let n=e-1;n>=0;n--)r[n]=t&255,t>>>=8;return new Uint8Array(r)}function Xf(t,e){const r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t[n]^e[n];return r}function cn(t){if(!Number.isSafeInteger(t))throw new Error("number expected")}function Jf(t,e,r,n){Je(t),Je(e),cn(r),e.length>255&&(e=n($e(ii("H2C-OVERSIZE-DST-"),e)));const{outputLen:i,blockLen:u}=n,f=Math.ceil(r/i);if(r>65535||f>255)throw new Error("expand_message_xmd: invalid lenInBytes");const a=$e(e,Jt(e.length,1)),w=Jt(0,u),_=Jt(r,2),x=new Array(f),N=n($e(w,t,_,Jt(0,1),a));x[0]=n($e(N,Jt(1,1),a));for(let T=1;T<=f;T++){const y=[Xf(N,x[T-1]),Jt(T+1,1),a];x[T]=n($e(...y))}return $e(...x).slice(0,r)}function Qf(t,e,r,n,i){if(Je(t),Je(e),cn(r),e.length>255){const u=Math.ceil(2*n/8);e=i.create({dkLen:u}).update(ii("H2C-OVERSIZE-DST-")).update(e).digest()}if(r>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:r}).update(t).update(Jt(r,2)).update(e).update(Jt(e.length,1)).digest()}function Ls(t,e,r){yn(r,{p:"bigint",m:"number",k:"number",hash:"function"});const{p:n,k:i,m:u,hash:f,expand:a,DST:w}=r;if(!ls(w)&&typeof w!="string")throw new Error("DST must be string or uint8array");if(!$f(r.hash))throw new Error("expected valid hash");Je(t),cn(e);const _=typeof w=="string"?ii(w):w,x=n.toString(2).length,N=Math.ceil((x+i)/8),M=e*u*N;let T;if(a==="xmd")T=Jf(t,_,M,f);else if(a==="xof")T=Qf(t,_,M,i,f);else if(a==="_internal_pass")T=t;else throw new Error('expand must be "xmd" or "xof"');const y=new Array(e);for(let G=0;G<e;G++){const V=new Array(u);for(let W=0;W<u;W++){const K=N*(W+G*u),Z=T.subarray(K,K+N);V[W]=Ge(Lf(Z),n)}y[G]=V}return y}function Xa(t,e){const r=e.map(n=>Array.from(n).reverse());return(n,i)=>{const[u,f,a,w]=r.map(N=>N.reduce((M,T)=>t.add(t.mul(M,n),T))),[_,x]=fr(t,[f,w],!0);return n=t.mul(u,_),i=t.mul(i,t.mul(a,x)),{x:n,y:i}}}function Xs(t,e,r){if(typeof e!="function")throw new Error("mapToCurve() must be defined");function n(u){return t.fromAffine(e(u))}function i(u){const f=u.clearCofactor();return f.equals(t.ZERO)?t.ZERO:(f.assertValidity(),f)}return{defaults:r,hashToCurve(u,f){const a=r.DST?r.DST:{},w=Object.assign({},r,a,f),_=Ls(u,2,w),x=n(_[0]),N=n(_[1]);return i(x.add(N))},encodeToCurve(u,f){const a=r.encodeDST?r.encodeDST:{},w=Object.assign({},r,a,f),_=Ls(u,1,w);return i(n(_[0]))},mapToCurve(u){if(!Array.isArray(u))throw new Error("expected array of bigints");for(const f of u)if(typeof f!="bigint")throw new Error("expected array of bigints");return i(n(u))}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const is=BigInt(0),ct=BigInt(1),Lt=BigInt(2),Ir=BigInt(3),ss=BigInt(4);function Ja(t,e,r){function n(i){const u=t.sqr(i),f=t.mul(u,i);return t.add(t.add(f,t.mul(i,e)),r)}return n}function Qa(t,e,r){const{BYTES:n}=t;function i(u){let f;if(typeof u=="bigint")f=u;else{let a=at("private key",u);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const w=new Uint8Array(n);w.set(a,w.length-a.length),a=w}try{f=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof u}`)}}if(r&&(f=t.create(f)),!t.isValidNot0(f))throw new Error("invalid private key: out of range [1..N-1]");return f}return i}function Df(t,e={}){const{Fp:r,Fn:n}=La("weierstrass",t,e),{h:i,n:u}=t;yn(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:f}=e;if(f&&(!r.is0(t.a)||typeof f.beta!="bigint"||typeof f.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function w(Q,q,C){const{x:ee,y:te}=q.toAffine(),B=r.toBytes(ee);if(sn("isCompressed",C),C){a();const U=!r.isOdd(te);return $e(e0(U),B)}else return $e(Uint8Array.of(4),B,r.toBytes(te))}function _(Q){Je(Q);const q=r.BYTES,C=q+1,ee=2*q+1,te=Q.length,B=Q[0],U=Q.subarray(1);if(te===C&&(B===2||B===3)){const $=r.fromBytes(U);if(!r.isValid($))throw new Error("bad point: is not on curve, wrong x");const Y=M($);let D;try{D=r.sqrt(Y)}catch(ye){const oe=ye instanceof Error?": "+ye.message:"";throw new Error("bad point: is not on curve, sqrt error"+oe)}a();const re=r.isOdd(D);return(B&1)===1!==re&&(D=r.neg(D)),{x:$,y:D}}else if(te===ee&&B===4){const $=r.fromBytes(U.subarray(q*0,q*1)),Y=r.fromBytes(U.subarray(q*1,q*2));if(!T($,Y))throw new Error("bad point: is not on curve");return{x:$,y:Y}}else throw new Error(`bad point: got length ${te}, expected compressed=${C} or uncompressed=${ee}`)}const x=e.toBytes||w,N=e.fromBytes||_,M=Ja(r,t.a,t.b);function T(Q,q){const C=r.sqr(q),ee=M(Q);return r.eql(C,ee)}if(!T(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const y=r.mul(r.pow(t.a,Ir),ss),G=r.mul(r.sqr(t.b),BigInt(27));if(r.is0(r.add(y,G)))throw new Error("bad curve params: a or b");function V(Q,q,C=!1){if(!r.isValid(q)||C&&r.is0(q))throw new Error(`bad point coordinate ${Q}`);return q}function W(Q){if(!(Q instanceof S))throw new Error("ProjectivePoint expected")}const K=an((Q,q)=>{const{px:C,py:ee,pz:te}=Q;if(r.eql(te,r.ONE))return{x:C,y:ee};const B=Q.is0();q==null&&(q=B?r.ONE:r.inv(te));const U=r.mul(C,q),$=r.mul(ee,q),Y=r.mul(te,q);if(B)return{x:r.ZERO,y:r.ZERO};if(!r.eql(Y,r.ONE))throw new Error("invZ was invalid");return{x:U,y:$}}),Z=an(Q=>{if(Q.is0()){if(e.allowInfinityPoint&&!r.is0(Q.py))return;throw new Error("bad point: ZERO")}const{x:q,y:C}=Q.toAffine();if(!r.isValid(q)||!r.isValid(C))throw new Error("bad point: x or y not field elements");if(!T(q,C))throw new Error("bad point: equation left != right");if(!Q.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function se(Q,q,C,ee,te){return C=new S(r.mul(C.px,Q),C.py,C.pz),q=tn(ee,q),C=tn(te,C),q.add(C)}class S{constructor(q,C,ee){this.px=V("x",q),this.py=V("y",C,!0),this.pz=V("z",ee),Object.freeze(this)}static fromAffine(q){const{x:C,y:ee}=q||{};if(!q||!r.isValid(C)||!r.isValid(ee))throw new Error("invalid affine point");if(q instanceof S)throw new Error("projective point not allowed");return r.is0(C)&&r.is0(ee)?S.ZERO:new S(C,ee,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(q){return ri(S,"pz",q)}static fromBytes(q){return Je(q),S.fromHex(q)}static fromHex(q){const C=S.fromAffine(N(at("pointHex",q)));return C.assertValidity(),C}static fromPrivateKey(q){const C=Qa(n,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return S.BASE.multiply(C(q))}static msm(q,C){return Za(S,n,q,C)}precompute(q=8,C=!0){return X.setWindowSize(this,q),C||this.multiply(Ir),this}_setWindowSize(q){this.precompute(q)}assertValidity(){Z(this)}hasEvenY(){const{y:q}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(q)}equals(q){W(q);const{px:C,py:ee,pz:te}=this,{px:B,py:U,pz:$}=q,Y=r.eql(r.mul(C,$),r.mul(B,te)),D=r.eql(r.mul(ee,$),r.mul(U,te));return Y&&D}negate(){return new S(this.px,r.neg(this.py),this.pz)}double(){const{a:q,b:C}=t,ee=r.mul(C,Ir),{px:te,py:B,pz:U}=this;let $=r.ZERO,Y=r.ZERO,D=r.ZERO,re=r.mul(te,te),le=r.mul(B,B),ye=r.mul(U,U),oe=r.mul(te,B);return oe=r.add(oe,oe),D=r.mul(te,U),D=r.add(D,D),$=r.mul(q,D),Y=r.mul(ee,ye),Y=r.add($,Y),$=r.sub(le,Y),Y=r.add(le,Y),Y=r.mul($,Y),$=r.mul(oe,$),D=r.mul(ee,D),ye=r.mul(q,ye),oe=r.sub(re,ye),oe=r.mul(q,oe),oe=r.add(oe,D),D=r.add(re,re),re=r.add(D,re),re=r.add(re,ye),re=r.mul(re,oe),Y=r.add(Y,re),ye=r.mul(B,U),ye=r.add(ye,ye),re=r.mul(ye,oe),$=r.sub($,re),D=r.mul(ye,le),D=r.add(D,D),D=r.add(D,D),new S($,Y,D)}add(q){W(q);const{px:C,py:ee,pz:te}=this,{px:B,py:U,pz:$}=q;let Y=r.ZERO,D=r.ZERO,re=r.ZERO;const le=t.a,ye=r.mul(t.b,Ir);let oe=r.mul(C,B),fe=r.mul(ee,U),Ne=r.mul(te,$),E=r.add(C,ee),Ae=r.add(B,U);E=r.mul(E,Ae),Ae=r.add(oe,fe),E=r.sub(E,Ae),Ae=r.add(C,te);let Ie=r.add(B,$);return Ae=r.mul(Ae,Ie),Ie=r.add(oe,Ne),Ae=r.sub(Ae,Ie),Ie=r.add(ee,te),Y=r.add(U,$),Ie=r.mul(Ie,Y),Y=r.add(fe,Ne),Ie=r.sub(Ie,Y),re=r.mul(le,Ae),Y=r.mul(ye,Ne),re=r.add(Y,re),Y=r.sub(fe,re),re=r.add(fe,re),D=r.mul(Y,re),fe=r.add(oe,oe),fe=r.add(fe,oe),Ne=r.mul(le,Ne),Ae=r.mul(ye,Ae),fe=r.add(fe,Ne),Ne=r.sub(oe,Ne),Ne=r.mul(le,Ne),Ae=r.add(Ae,Ne),oe=r.mul(fe,Ae),D=r.add(D,oe),oe=r.mul(Ie,Ae),Y=r.mul(E,Y),Y=r.sub(Y,oe),oe=r.mul(E,fe),re=r.mul(Ie,re),re=r.add(re,oe),new S(Y,D,re)}subtract(q){return this.add(q.negate())}is0(){return this.equals(S.ZERO)}multiply(q){const{endo:C}=e;if(!n.isValidNot0(q))throw new Error("invalid scalar: out of range");let ee,te;const B=U=>X.wNAFCached(this,U,S.normalizeZ);if(C){const{k1neg:U,k1:$,k2neg:Y,k2:D}=C.splitScalar(q),{p:re,f:le}=B($),{p:ye,f:oe}=B(D);te=le.add(oe),ee=se(C.beta,re,ye,U,Y)}else{const{p:U,f:$}=B(q);ee=U,te=$}return S.normalizeZ([ee,te])[0]}multiplyUnsafe(q){const{endo:C}=e,ee=this;if(!n.isValid(q))throw new Error("invalid scalar: out of range");if(q===is||ee.is0())return S.ZERO;if(q===ct)return ee;if(X.hasPrecomputes(this))return this.multiply(q);if(C){const{k1neg:te,k1:B,k2neg:U,k2:$}=C.splitScalar(q),{p1:Y,p2:D}=Zf(S,ee,B,$);return se(C.beta,Y,D,te,U)}else return X.wNAFCachedUnsafe(ee,q)}multiplyAndAddUnsafe(q,C,ee){const te=this.multiplyUnsafe(C).add(q.multiplyUnsafe(ee));return te.is0()?void 0:te}toAffine(q){return K(this,q)}isTorsionFree(){const{isTorsionFree:q}=e;return i===ct?!0:q?q(S,this):X.wNAFCachedUnsafe(this,u).is0()}clearCofactor(){const{clearCofactor:q}=e;return i===ct?this:q?q(S,this):this.multiplyUnsafe(i)}toBytes(q=!0){return sn("isCompressed",q),this.assertValidity(),x(S,this,q)}toRawBytes(q=!0){return this.toBytes(q)}toHex(q=!0){return Cr(this.toBytes(q))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}S.BASE=new S(t.Gx,t.Gy,r.ONE),S.ZERO=new S(r.ZERO,r.ONE,r.ZERO),S.Fp=r,S.Fn=n;const L=n.BITS,X=Wa(S,e.endo?Math.ceil(L/2):L);return S}function Js(t){const{CURVE:e,curveOpts:r}=t0(t),n=Df(e,r);return r0(t,n)}function e0(t){return Uint8Array.of(t?2:3)}function t0(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp,n=gr(e.n,t.nBitLength),i={Fp:r,Fn:n,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:i}}function r0(t,e){const{Fp:r,Fn:n}=e;function i(a){return $a(a,ct,n.ORDER)}const u=Ja(r,t.a,t.b),f=Qa(n,t.allowedPrivateKeyLengths,t.wrapPrivateKey);return Object.assign({},{CURVE:t,Point:e,ProjectivePoint:e,normPrivateKeyToScalar:f,weierstrassEquation:u,isWithinCurveOrder:i})}function n0(t,e){const r=t.ORDER;let n=is;for(let y=r-ct;y%Lt===is;y/=Lt)n+=ct;const i=n,u=Lt<<i-ct-ct,f=u*Lt,a=(r-ct)/f,w=(a-ct)/Lt,_=f-ct,x=u,N=t.pow(e,a),M=t.pow(e,(a+ct)/Lt);let T=(y,G)=>{let V=N,W=t.pow(G,_),K=t.sqr(W);K=t.mul(K,G);let Z=t.mul(y,K);Z=t.pow(Z,w),Z=t.mul(Z,W),W=t.mul(Z,G),K=t.mul(Z,y);let se=t.mul(K,W);Z=t.pow(se,x);let S=t.eql(Z,t.ONE);W=t.mul(K,M),Z=t.mul(se,V),K=t.cmov(W,K,S),se=t.cmov(Z,se,S);for(let L=i;L>ct;L--){let X=L-Lt;X=Lt<<X-ct;let Q=t.pow(se,X);const q=t.eql(Q,t.ONE);W=t.mul(K,V),V=t.mul(V,V),Q=t.mul(se,V),K=t.cmov(W,K,q),se=t.cmov(Q,se,q)}return{isValid:S,value:K}};if(t.ORDER%ss===Ir){const y=(t.ORDER-Ir)/ss,G=t.sqrt(t.neg(e));T=(V,W)=>{let K=t.sqr(W);const Z=t.mul(V,W);K=t.mul(K,Z);let se=t.pow(K,y);se=t.mul(se,Z);const S=t.mul(se,G),L=t.mul(t.sqr(se),W),X=t.eql(L,V);let Q=t.cmov(S,se,X);return{isValid:X,value:Q}}}return T}function Da(t,e){Ha(t);const{A:r,B:n,Z:i}=e;if(!t.isValid(r)||!t.isValid(n)||!t.isValid(i))throw new Error("mapToCurveSimpleSWU: invalid opts");const u=n0(t,i);if(!t.isOdd)throw new Error("Field does not have .isOdd()");return f=>{let a,w,_,x,N,M,T,y;a=t.sqr(f),a=t.mul(a,i),w=t.sqr(a),w=t.add(w,a),_=t.add(w,t.ONE),_=t.mul(_,n),x=t.cmov(i,t.neg(w),!t.eql(w,t.ZERO)),x=t.mul(x,r),w=t.sqr(_),M=t.sqr(x),N=t.mul(M,r),w=t.add(w,N),w=t.mul(w,_),M=t.mul(M,x),N=t.mul(M,n),w=t.add(w,N),T=t.mul(a,_);const{isValid:G,value:V}=u(w,M);y=t.mul(a,f),y=t.mul(y,V),T=t.cmov(T,_,G),y=t.cmov(y,V,G);const W=t.isOdd(f)===t.isOdd(y);y=t.cmov(t.neg(y),y,W);const K=fr(t,[x],!0)[0];return T=t.mul(T,K),{x:T,y}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const i0=BigInt(0),vn=BigInt(1),Qs=BigInt(2),Ur=BigInt(3);function s0(t){const e=[];for(;t>vn;t>>=vn)(t&vn)===i0?e.unshift(0):(t&Ur)===Ur?(e.unshift(-1),t+=vn):e.unshift(1);return e}function o0(t){const{Fp:e,Fr:r,Fp2:n,Fp6:i,Fp12:u}=t.fields,f=t.params.xNegative,a=t.params.twistType,w=Js(t.G1),_=Object.assign(w,Xs(w.Point,t.G1.mapToCurve,{...t.htfDefaults,...t.G1.htfDefaults})),x=Js(t.G2),N=Object.assign(x,Xs(x.Point,t.G2.mapToCurve,{...t.htfDefaults,...t.G2.htfDefaults}));let M;if(a==="multiplicative")M=(ae,J,ne,g,b,v)=>u.mul014(g,ae,n.mul(J,b),n.mul(ne,v));else if(a==="divisive")M=(ae,J,ne,g,b,v)=>u.mul034(g,n.mul(ne,v),n.mul(J,b),ae);else throw new Error("bls: unknown twist type");const T=n.div(n.ONE,n.mul(n.ONE,Qs));function y(ae,J,ne,g){const b=n.sqr(ne),v=n.sqr(g),F=n.mulByB(n.mul(v,Ur)),R=n.mul(F,Ur),P=n.sub(n.sub(n.sqr(n.add(ne,g)),v),b),h=n.sub(F,b),s=n.mul(n.sqr(J),Ur),o=n.neg(P);return ae.push([h,s,o]),J=n.mul(n.mul(n.mul(n.sub(b,R),J),ne),T),ne=n.sub(n.sqr(n.mul(n.add(b,R),T)),n.mul(n.sqr(F),Ur)),g=n.mul(b,P),{Rx:J,Ry:ne,Rz:g}}function G(ae,J,ne,g,b,v){const F=n.sub(ne,n.mul(v,g)),R=n.sub(J,n.mul(b,g)),P=n.sub(n.mul(F,b),n.mul(R,v)),h=n.neg(F),s=R;ae.push([P,h,s]);const o=n.sqr(R),p=n.mul(o,R),m=n.mul(o,J),I=n.add(n.sub(p,n.mul(m,Qs)),n.mul(n.sqr(F),g));return J=n.mul(R,I),ne=n.sub(n.mul(n.sub(m,I),F),n.mul(p,ne)),g=n.mul(g,p),{Rx:J,Ry:ne,Rz:g}}const V=s0(t.params.ateLoopSize),W=an(ae=>{const J=ae,{x:ne,y:g}=J.toAffine(),b=ne,v=g,F=n.neg(g);let R=b,P=v,h=n.ONE;const s=[];for(const o of V){const p=[];({Rx:R,Ry:P,Rz:h}=y(p,R,P,h)),o&&({Rx:R,Ry:P,Rz:h}=G(p,R,P,h,b,o===-1?F:v)),s.push(p)}if(t.postPrecompute){const o=s[s.length-1];t.postPrecompute(R,P,h,b,v,G.bind(null,o))}return s});function K(ae,J=!1){let ne=u.ONE;if(ae.length){const g=ae[0][0].length;for(let b=0;b<g;b++){ne=u.sqr(ne);for(const[v,F,R]of ae)for(const[P,h,s]of v[b])ne=M(P,h,s,ne,F,R)}}return f&&(ne=u.conjugate(ne)),J?u.finalExponentiate(ne):ne}function Z(ae,J=!0){const ne=[];ri(_.Point,"pz",ae.map(({g1:g})=>g)),ri(N.Point,"pz",ae.map(({g2:g})=>g));for(const{g1:g,g2:b}of ae){if(g.is0()||b.is0())throw new Error("pairing is not available for ZERO point");g.assertValidity(),b.assertValidity();const v=g.toAffine();ne.push([W(b),v.x,v.y])}return K(ne,J)}function se(ae,J,ne=!0){return Z([{g1:ae,g2:J}],ne)}const S=t.randomBytes||Bo,L={randomPrivateKey:()=>{const ae=za(r.ORDER);return Yf(S(ae),r.ORDER)},calcPairingPrecomputes:W};function X(ae){if(!Array.isArray(ae)||ae.length===0)throw new Error("expected non-empty array")}function Q(ae){return ae instanceof _.Point?ae:_.Point.fromHex(ae)}function q(ae){return ae instanceof N.Point?ae:U.fromHex(ae)}function C(ae,J){function ne(F){return F instanceof ae.Point?F:ae.Point.fromHex(F)}function g(F){return F instanceof J.Point?F:J.Point.fromHex(F)}function b(F){if(!(F instanceof J.Point))throw new Error(`expected valid message hashed to ${v?"G2":"G1"} curve`);return F}const v=J.Point.Fp.BYTES>ae.Point.Fp.BYTES;return{getPublicKey(F){return ae.Point.fromPrivateKey(F)},sign(F,R,P){if(P!=null)throw new Error("sign() expects 2 arguments");return b(F).assertValidity(),F.multiply(ae.normPrivateKeyToScalar(R))},verify(F,R,P,h){if(h!=null)throw new Error("verify() expects 3 arguments");F=g(F),P=ne(P);const s=P.negate(),o=ae.Point.BASE,p=b(R),m=F,H=Z(v?[{g1:s,g2:p},{g1:o,g2:m}]:[{g1:p,g2:s},{g1:m,g2:o}]);return u.eql(H,u.ONE)},aggregatePublicKeys(F){X(F),F=F.map(P=>ne(P));const R=F.reduce((P,h)=>P.add(h),ae.Point.ZERO);return R.assertValidity(),R},aggregateSignatures(F){X(F),F=F.map(P=>g(P));const R=F.reduce((P,h)=>P.add(h),J.Point.ZERO);return R.assertValidity(),R},hash(F,R){Je(F);const P=R?{DST:R}:void 0;return J.hashToCurve(F,P)},Signature:v?t.G2.Signature:t.G1.ShortSignature}}const ee=C(_,N),te=C(N,_),{ShortSignature:B}=t.G1,{Signature:U}=t.G2;function $(ae,J){return ae instanceof _.Point?ae:te.hash(at("point",ae),J==null?void 0:J.DST)}function Y(ae,J){return ae instanceof N.Point?ae:ee.hash(at("point",ae),J==null?void 0:J.DST)}function D(ae){return ee.getPublicKey(ae).toBytes(!0)}function re(ae){return te.getPublicKey(ae).toBytes(!0)}function le(ae,J,ne){const g=Y(ae,ne),b=ee.sign(g,J);return ae instanceof N.Point?b:U.toBytes(b)}function ye(ae,J,ne){const g=$(ae,ne),b=te.sign(g,J);return ae instanceof _.Point?b:B.toBytes(b)}function oe(ae,J,ne,g){const b=Y(J,g);return ee.verify(ae,b,ne)}function fe(ae,J,ne,g){const b=$(J,g);return te.verify(ae,b,ne)}function Ne(ae){const J=ee.aggregatePublicKeys(ae);return ae[0]instanceof _.Point?J:J.toBytes(!0)}function E(ae){const J=ee.aggregateSignatures(ae);return ae[0]instanceof N.Point?J:U.toBytes(J)}function Ae(ae){const J=te.aggregateSignatures(ae);return ae[0]instanceof _.Point?J:B.toBytes(J)}function Ie(ae,J,ne,g){if(X(J),ne.length!==J.length)throw new Error("amount of public keys and messages should be equal");const b=q(ae),v=J.map(h=>Y(h,g)),F=ne.map(Q),R=new Map;for(let h=0;h<F.length;h++){const s=F[h],o=v[h];let p=R.get(o);p===void 0&&(p=[],R.set(o,p)),p.push(s)}const P=[];try{for(const[h,s]of R){const o=s.reduce((p,m)=>p.add(m));P.push({g1:o,g2:h})}return P.push({g1:_.Point.BASE.negate(),g2:b}),u.eql(Z(P),u.ONE)}catch{return!1}}return _.Point.BASE.precompute(4),{longSignatures:ee,shortSignatures:te,millerLoopBatch:K,pairing:se,pairingBatch:Z,verifyBatch:Ie,curves:{G1:w.Point,G2:x.Point},fields:{Fr:r,Fp:e,Fp2:n,Fp6:i,Fp12:u},params:{ateLoopSize:t.params.ateLoopSize,twistType:t.params.twistType,r:t.params.r,G1b:t.G1.b,G2b:t.G2.b},utils:L,getPublicKey:D,getPublicKeyForShortSignatures:re,sign:le,signShortSignature:ye,verify:oe,verifyShortSignature:fe,aggregatePublicKeys:Ne,aggregateSignatures:E,aggregateShortSignatures:Ae,G1:_,G2:N,Signature:U,ShortSignature:B}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ds=BigInt(0),Rr=BigInt(1),$t=BigInt(2),eo=BigInt(3);function qi(t,e,r,n,i=1,u){const f=BigInt(u===void 0?n:u),a=r**BigInt(n),w=[];for(let _=0;_<i;_++){const x=BigInt(_+1),N=[];for(let M=0,T=Rr;M<n;M++){const y=(x*T-x)/f%a;N.push(t.pow(e,y)),T*=r}w.push(N)}return w}function a0(t,e,r){const n=e.pow(r,(t.ORDER-Rr)/eo),i=e.pow(r,(t.ORDER-Rr)/$t);function u(M,T){const y=e.mul(e.frobeniusMap(M,1),n),G=e.mul(e.frobeniusMap(T,1),i);return[y,G]}const f=e.pow(r,(t.ORDER**$t-Rr)/eo),a=e.pow(r,(t.ORDER**$t-Rr)/$t);if(!e.eql(a,e.neg(e.ONE)))throw new Error("psiFrobenius: PSI2_Y!==-1");function w(M,T){return[e.mul(M,f),e.neg(T)]}const _=M=>(T,y)=>{const G=y.toAffine(),V=M(G.x,G.y);return T.fromAffine({x:V[0],y:V[1]})},x=_(u),N=_(w);return{psi:u,psi2:w,G2psi:x,G2psi2:N,PSI_X:n,PSI_Y:i,PSI2_X:f,PSI2_Y:a}}function c0(t){const{ORDER:e}=t,r=gr(e),n=r.create(t.NONRESIDUE||BigInt(-1)),i=r.div(r.ONE,$t),u=qi(r,n,r.ORDER,2)[0],f=({c0:B,c1:U},{c0:$,c1:Y})=>({c0:r.add(B,$),c1:r.add(U,Y)}),a=({c0:B,c1:U},{c0:$,c1:Y})=>({c0:r.sub(B,$),c1:r.sub(U,Y)}),w=({c0:B,c1:U},$)=>{if(typeof $=="bigint")return{c0:r.mul(B,$),c1:r.mul(U,$)};const{c0:Y,c1:D}=$;let re=r.mul(B,Y),le=r.mul(U,D);const ye=r.sub(re,le),oe=r.sub(r.mul(r.add(B,U),r.add(Y,D)),r.add(re,le));return{c0:ye,c1:oe}},_=({c0:B,c1:U})=>{const $=r.add(B,U),Y=r.sub(B,U),D=r.add(B,B);return{c0:r.mul($,Y),c1:r.mul(D,U)}},x=B=>{if(B.length!==2)throw new Error("invalid tuple");const U=B.map($=>r.create($));return{c0:U[0],c1:U[1]}};function N(B,U){return typeof B=="bigint"&&Ds<=B&&B<U}const M=e*e,T=x(t.FP2_NONRESIDUE),y={ORDER:M,isLE:r.isLE,NONRESIDUE:T,BITS:en(M),BYTES:Math.ceil(en(M)/8),MASK:Mr(en(M)),ZERO:{c0:r.ZERO,c1:r.ZERO},ONE:{c0:r.ONE,c1:r.ZERO},create:B=>B,isValid:({c0:B,c1:U})=>N(B,M)&&N(U,M),is0:({c0:B,c1:U})=>r.is0(B)&&r.is0(U),isValidNot0:B=>!y.is0(B)&&y.isValid(B),eql:({c0:B,c1:U},{c0:$,c1:Y})=>r.eql(B,$)&&r.eql(U,Y),neg:({c0:B,c1:U})=>({c0:r.neg(B),c1:r.neg(U)}),pow:(B,U)=>On(y,B,U),invertBatch:B=>fr(y,B),add:f,sub:a,mul:w,sqr:_,addN:f,subN:a,mulN:w,sqrN:_,div:(B,U)=>y.mul(B,typeof U=="bigint"?r.inv(r.create(U)):y.inv(U)),inv:({c0:B,c1:U})=>{const $=r.inv(r.create(B*B+U*U));return{c0:r.mul($,r.create(B)),c1:r.mul($,r.create(-U))}},sqrt:B=>{if(t.Fp2sqrt)return t.Fp2sqrt(B);const{c0:U,c1:$}=B;if(r.is0($))return ti(r,U)===1?y.create({c0:r.sqrt(U),c1:r.ZERO}):y.create({c0:r.ZERO,c1:r.sqrt(r.div(U,n))});const Y=r.sqrt(r.sub(r.sqr(U),r.mul(r.sqr($),n)));let D=r.mul(r.add(Y,U),i);ti(r,D)===-1&&(D=r.sub(D,Y));const le=r.sqrt(D),ye=y.create({c0:le,c1:r.div(r.mul($,i),le)});if(!y.eql(y.sqr(ye),B))throw new Error("Cannot find square root");const oe=ye,fe=y.neg(oe),{re:Ne,im:E}=y.reim(oe),{re:Ae,im:Ie}=y.reim(fe);return E>Ie||E===Ie&&Ne>Ae?oe:fe},isOdd:B=>{const{re:U,im:$}=y.reim(B),Y=U%$t,D=U===Ds,re=$%$t;return BigInt(Y||D&&re)==Rr},fromBytes(B){if(B.length!==y.BYTES)throw new Error("fromBytes invalid length="+B.length);return{c0:r.fromBytes(B.subarray(0,r.BYTES)),c1:r.fromBytes(B.subarray(r.BYTES))}},toBytes:({c0:B,c1:U})=>$e(r.toBytes(B),r.toBytes(U)),cmov:({c0:B,c1:U},{c0:$,c1:Y},D)=>({c0:r.cmov(B,$,D),c1:r.cmov(U,Y,D)}),reim:({c0:B,c1:U})=>({re:B,im:U}),mulByNonresidue:({c0:B,c1:U})=>y.mul({c0:B,c1:U},T),mulByB:t.Fp2mulByB,fromBigTuple:x,frobeniusMap:({c0:B,c1:U},$)=>({c0:B,c1:r.mul(U,u[$%2])})},G=({c0:B,c1:U,c2:$},{c0:Y,c1:D,c2:re})=>({c0:y.add(B,Y),c1:y.add(U,D),c2:y.add($,re)}),V=({c0:B,c1:U,c2:$},{c0:Y,c1:D,c2:re})=>({c0:y.sub(B,Y),c1:y.sub(U,D),c2:y.sub($,re)}),W=({c0:B,c1:U,c2:$},Y)=>{if(typeof Y=="bigint")return{c0:y.mul(B,Y),c1:y.mul(U,Y),c2:y.mul($,Y)};const{c0:D,c1:re,c2:le}=Y,ye=y.mul(B,D),oe=y.mul(U,re),fe=y.mul($,le);return{c0:y.add(ye,y.mulByNonresidue(y.sub(y.mul(y.add(U,$),y.add(re,le)),y.add(oe,fe)))),c1:y.add(y.sub(y.mul(y.add(B,U),y.add(D,re)),y.add(ye,oe)),y.mulByNonresidue(fe)),c2:y.sub(y.add(oe,y.mul(y.add(B,$),y.add(D,le))),y.add(ye,fe))}},K=({c0:B,c1:U,c2:$})=>{let Y=y.sqr(B),D=y.mul(y.mul(B,U),$t),re=y.mul(y.mul(U,$),$t),le=y.sqr($);return{c0:y.add(y.mulByNonresidue(re),Y),c1:y.add(y.mulByNonresidue(le),D),c2:y.sub(y.sub(y.add(y.add(D,y.sqr(y.add(y.sub(B,U),$))),re),Y),le)}},[Z,se]=qi(y,T,r.ORDER,6,2,3),S={ORDER:y.ORDER,isLE:y.isLE,BITS:3*y.BITS,BYTES:3*y.BYTES,MASK:Mr(3*y.BITS),ZERO:{c0:y.ZERO,c1:y.ZERO,c2:y.ZERO},ONE:{c0:y.ONE,c1:y.ZERO,c2:y.ZERO},create:B=>B,isValid:({c0:B,c1:U,c2:$})=>y.isValid(B)&&y.isValid(U)&&y.isValid($),is0:({c0:B,c1:U,c2:$})=>y.is0(B)&&y.is0(U)&&y.is0($),isValidNot0:B=>!S.is0(B)&&S.isValid(B),neg:({c0:B,c1:U,c2:$})=>({c0:y.neg(B),c1:y.neg(U),c2:y.neg($)}),eql:({c0:B,c1:U,c2:$},{c0:Y,c1:D,c2:re})=>y.eql(B,Y)&&y.eql(U,D)&&y.eql($,re),sqrt:zs,div:(B,U)=>S.mul(B,typeof U=="bigint"?r.inv(r.create(U)):S.inv(U)),pow:(B,U)=>On(S,B,U),invertBatch:B=>fr(S,B),add:G,sub:V,mul:W,sqr:K,addN:G,subN:V,mulN:W,sqrN:K,inv:({c0:B,c1:U,c2:$})=>{let Y=y.sub(y.sqr(B),y.mulByNonresidue(y.mul($,U))),D=y.sub(y.mulByNonresidue(y.sqr($)),y.mul(B,U)),re=y.sub(y.sqr(U),y.mul(B,$)),le=y.inv(y.add(y.mulByNonresidue(y.add(y.mul($,D),y.mul(U,re))),y.mul(B,Y)));return{c0:y.mul(le,Y),c1:y.mul(le,D),c2:y.mul(le,re)}},fromBytes:B=>{if(B.length!==S.BYTES)throw new Error("fromBytes invalid length="+B.length);return{c0:y.fromBytes(B.subarray(0,y.BYTES)),c1:y.fromBytes(B.subarray(y.BYTES,2*y.BYTES)),c2:y.fromBytes(B.subarray(2*y.BYTES))}},toBytes:({c0:B,c1:U,c2:$})=>$e(y.toBytes(B),y.toBytes(U),y.toBytes($)),cmov:({c0:B,c1:U,c2:$},{c0:Y,c1:D,c2:re},le)=>({c0:y.cmov(B,Y,le),c1:y.cmov(U,D,le),c2:y.cmov($,re,le)}),fromBigSix:B=>{if(!Array.isArray(B)||B.length!==6)throw new Error("invalid Fp6 usage");return{c0:y.fromBigTuple(B.slice(0,2)),c1:y.fromBigTuple(B.slice(2,4)),c2:y.fromBigTuple(B.slice(4,6))}},frobeniusMap:({c0:B,c1:U,c2:$},Y)=>({c0:y.frobeniusMap(B,Y),c1:y.mul(y.frobeniusMap(U,Y),Z[Y%6]),c2:y.mul(y.frobeniusMap($,Y),se[Y%6])}),mulByFp2:({c0:B,c1:U,c2:$},Y)=>({c0:y.mul(B,Y),c1:y.mul(U,Y),c2:y.mul($,Y)}),mulByNonresidue:({c0:B,c1:U,c2:$})=>({c0:y.mulByNonresidue($),c1:B,c2:U}),mul1:({c0:B,c1:U,c2:$},Y)=>({c0:y.mulByNonresidue(y.mul($,Y)),c1:y.mul(B,Y),c2:y.mul(U,Y)}),mul01({c0:B,c1:U,c2:$},Y,D){let re=y.mul(B,Y),le=y.mul(U,D);return{c0:y.add(y.mulByNonresidue(y.sub(y.mul(y.add(U,$),D),le)),re),c1:y.sub(y.sub(y.mul(y.add(Y,D),y.add(B,U)),re),le),c2:y.add(y.sub(y.mul(y.add(B,$),Y),re),le)}}},L=qi(y,T,r.ORDER,12,1,6)[0],X=({c0:B,c1:U},{c0:$,c1:Y})=>({c0:S.add(B,$),c1:S.add(U,Y)}),Q=({c0:B,c1:U},{c0:$,c1:Y})=>({c0:S.sub(B,$),c1:S.sub(U,Y)}),q=({c0:B,c1:U},$)=>{if(typeof $=="bigint")return{c0:S.mul(B,$),c1:S.mul(U,$)};let{c0:Y,c1:D}=$,re=S.mul(B,Y),le=S.mul(U,D);return{c0:S.add(re,S.mulByNonresidue(le)),c1:S.sub(S.mul(S.add(B,U),S.add(Y,D)),S.add(re,le))}},C=({c0:B,c1:U})=>{let $=S.mul(B,U);return{c0:S.sub(S.sub(S.mul(S.add(S.mulByNonresidue(U),B),S.add(B,U)),$),S.mulByNonresidue($)),c1:S.add($,$)}};function ee(B,U){const $=y.sqr(B),Y=y.sqr(U);return{first:y.add(y.mulByNonresidue(Y),$),second:y.sub(y.sub(y.sqr(y.add(B,U)),$),Y)}}const te={ORDER:y.ORDER,isLE:S.isLE,BITS:2*S.BITS,BYTES:2*S.BYTES,MASK:Mr(2*S.BITS),ZERO:{c0:S.ZERO,c1:S.ZERO},ONE:{c0:S.ONE,c1:S.ZERO},create:B=>B,isValid:({c0:B,c1:U})=>S.isValid(B)&&S.isValid(U),is0:({c0:B,c1:U})=>S.is0(B)&&S.is0(U),isValidNot0:B=>!te.is0(B)&&te.isValid(B),neg:({c0:B,c1:U})=>({c0:S.neg(B),c1:S.neg(U)}),eql:({c0:B,c1:U},{c0:$,c1:Y})=>S.eql(B,$)&&S.eql(U,Y),sqrt:zs,inv:({c0:B,c1:U})=>{let $=S.inv(S.sub(S.sqr(B),S.mulByNonresidue(S.sqr(U))));return{c0:S.mul(B,$),c1:S.neg(S.mul(U,$))}},div:(B,U)=>te.mul(B,typeof U=="bigint"?r.inv(r.create(U)):te.inv(U)),pow:(B,U)=>On(te,B,U),invertBatch:B=>fr(te,B),add:X,sub:Q,mul:q,sqr:C,addN:X,subN:Q,mulN:q,sqrN:C,fromBytes:B=>{if(B.length!==te.BYTES)throw new Error("fromBytes invalid length="+B.length);return{c0:S.fromBytes(B.subarray(0,S.BYTES)),c1:S.fromBytes(B.subarray(S.BYTES))}},toBytes:({c0:B,c1:U})=>$e(S.toBytes(B),S.toBytes(U)),cmov:({c0:B,c1:U},{c0:$,c1:Y},D)=>({c0:S.cmov(B,$,D),c1:S.cmov(U,Y,D)}),fromBigTwelve:B=>({c0:S.fromBigSix(B.slice(0,6)),c1:S.fromBigSix(B.slice(6,12))}),frobeniusMap(B,U){const{c0:$,c1:Y,c2:D}=S.frobeniusMap(B.c1,U),re=L[U%12];return{c0:S.frobeniusMap(B.c0,U),c1:S.create({c0:y.mul($,re),c1:y.mul(Y,re),c2:y.mul(D,re)})}},mulByFp2:({c0:B,c1:U},$)=>({c0:S.mulByFp2(B,$),c1:S.mulByFp2(U,$)}),conjugate:({c0:B,c1:U})=>({c0:B,c1:S.neg(U)}),mul014:({c0:B,c1:U},$,Y,D)=>{let re=S.mul01(B,$,Y),le=S.mul1(U,D);return{c0:S.add(S.mulByNonresidue(le),re),c1:S.sub(S.sub(S.mul01(S.add(U,B),$,y.add(Y,D)),re),le)}},mul034:({c0:B,c1:U},$,Y,D)=>{const re=S.create({c0:y.mul(B.c0,$),c1:y.mul(B.c1,$),c2:y.mul(B.c2,$)}),le=S.mul01(U,Y,D),ye=S.mul01(S.add(B,U),y.add($,Y),D);return{c0:S.add(S.mulByNonresidue(le),re),c1:S.sub(ye,S.add(re,le))}},_cyclotomicSquare:t.Fp12cyclotomicSquare,_cyclotomicExp:t.Fp12cyclotomicExp,finalExponentiate:t.Fp12finalExponentiate};return{Fp:r,Fp2:y,Fp6:S,Fp12:te,Fp4Square:ee}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const rt=BigInt(0),ni=BigInt(1),We=BigInt(2),yi=BigInt(3),un=BigInt(4),Qt=BigInt("0xd201000000010000"),u0=en(Qt),wr={p:BigInt("0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab"),n:BigInt("0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001"),h:BigInt("0x396c8c005555e1568c00aaab0000aaab"),a:rt,b:un,Gx:BigInt("0x17f1d3a73197d7942695638c4fa9ac0fc3688c4f9774b905a14e3a3f171bac586c55e83ff97a1aeffb3af00adb22c6bb"),Gy:BigInt("0x08b3f481e3aaa0f1a09e30ed741d8ae4fcf5e095d5d00af600db18cb2c04b3edd03cc744a2888ae40caa232946c5e7e1")},f0=gr(wr.n),{Fp:pe,Fp2:de,Fp6:os,Fp4Square:Gi,Fp12:Be}=c0({ORDER:wr.p,FP2_NONRESIDUE:[ni,ni],Fp2mulByB:({c0:t,c1:e})=>{const r=pe.mul(t,un),n=pe.mul(e,un);return{c0:pe.sub(r,n),c1:pe.add(r,n)}},Fp12cyclotomicSquare:({c0:t,c1:e})=>{const{c0:r,c1:n,c2:i}=t,{c0:u,c1:f,c2:a}=e,{first:w,second:_}=Gi(r,f),{first:x,second:N}=Gi(u,i),{first:M,second:T}=Gi(n,a),y=de.mulByNonresidue(T);return{c0:os.create({c0:de.add(de.mul(de.sub(w,r),We),w),c1:de.add(de.mul(de.sub(x,n),We),x),c2:de.add(de.mul(de.sub(M,i),We),M)}),c1:os.create({c0:de.add(de.mul(de.add(y,u),We),y),c1:de.add(de.mul(de.add(_,f),We),_),c2:de.add(de.mul(de.add(N,a),We),N)})}},Fp12cyclotomicExp(t,e){let r=Be.ONE;for(let n=u0-1;n>=0;n--)r=Be._cyclotomicSquare(r),kf(e,n)&&(r=Be.mul(r,t));return r},Fp12finalExponentiate:t=>{const e=Qt,r=Be.div(Be.frobeniusMap(t,6),t),n=Be.mul(Be.frobeniusMap(r,2),r),i=Be.conjugate(Be._cyclotomicExp(n,e)),u=Be.mul(Be.conjugate(Be._cyclotomicSquare(n)),i),f=Be.conjugate(Be._cyclotomicExp(u,e)),a=Be.conjugate(Be._cyclotomicExp(f,e)),w=Be.mul(Be.conjugate(Be._cyclotomicExp(a,e)),Be._cyclotomicSquare(i)),_=Be.conjugate(Be._cyclotomicExp(w,e)),x=Be.frobeniusMap(Be.mul(i,a),2),N=Be.frobeniusMap(Be.mul(f,n),3),M=Be.frobeniusMap(Be.mul(w,Be.conjugate(n)),1),T=Be.mul(Be.mul(_,Be.conjugate(u)),n);return Be.mul(Be.mul(Be.mul(x,N),M),T)}}),{G2psi:to,G2psi2:l0}=a0(pe,de,de.div(de.ONE,de.NONRESIDUE)),Vi=Object.freeze({DST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",encodeDST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",p:pe.ORDER,m:2,k:128,expand:"xmd",hash:ds}),Bs={p:de.ORDER,n:wr.n,h:BigInt("0x5d543a95414e7f1091d50792876a202cd91de4547085abaa68a205b2e5a7ddfa628f1cb4d9e82ef21537e293a6691ae1616ec6e786f0c70cf1c38e31c7238e5"),a:de.ZERO,b:de.fromBigTuple([un,un]),Gx:de.fromBigTuple([BigInt("0x024aa2b2f08f0a91260805272dc51051c6e47ad4fa403b02b4510b647ae3d1770bac0326a805bbefd48056c8c121bdb8"),BigInt("0x13e02b6052719f607dacd3a088274f65596bd0d09920b61ab5da61bbdc7f5049334cf11213945d57e5ac7d055d042b7e")]),Gy:de.fromBigTuple([BigInt("0x0ce5d527727d6e118cc9cdc6da2e351aadfd9baa8cbdd3a76d429a695160d12c923ac9cc3baca289e193548608b82801"),BigInt("0x0606c4a02ea734cc32acd2b02bc28b99cb3e287e85a763af267492ab572e99ab3f370d275cec1da1aaa9075ff05f79be")])},wi=wn(pe.toBytes(rt),{infinity:!0,compressed:!0});function gi(t){t=t.slice();const e=t[0]&224,r=!!(e>>7&1),n=!!(e>>6&1),i=!!(e>>5&1);return t[0]&=31,{compressed:r,infinity:n,sort:i,value:t}}function wn(t,e){if(t[0]&224)throw new Error("setMask: non-empty mask");return e.compressed&&(t[0]|=128),e.infinity&&(t[0]|=64),e.sort&&(t[0]|=32),t}function h0(t,e,r){const{BYTES:n,ORDER:i}=pe,u=e.is0(),{x:f,y:a}=e.toAffine();if(r){if(u)return wi.slice();const w=!!(a*We/i);return wn(Le(f,n),{compressed:!0,sort:w})}else return u?$e(Uint8Array.of(64),new Uint8Array(2*n-1)):$e(Le(f,n),Le(a,n))}function Hi(t){t.assertValidity();const{BYTES:e,ORDER:r}=pe,{x:n,y:i}=t.toAffine();if(t.is0())return wi.slice();const u=!!(i*We/r);return wn(Le(n,e),{compressed:!0,sort:u})}function d0(t){const{compressed:e,infinity:r,sort:n,value:i}=gi(t),{BYTES:u,ORDER:f}=pe;if(i.length===48&&e){const a=Ft(i),w=pe.create(a&pe.MASK);if(r){if(w!==rt)throw new Error("invalid G1 point: non-empty, at infinity, with compression");return{x:rt,y:rt}}const _=pe.add(pe.pow(w,yi),pe.create(wr.b));let x=pe.sqrt(_);if(!x)throw new Error("invalid G1 point: compressed point");return x*We/f!==BigInt(n)&&(x=pe.neg(x)),{x:pe.create(w),y:pe.create(x)}}else if(i.length===96&&!e){const a=Ft(i.subarray(0,u)),w=Ft(i.subarray(u));if(r){if(a!==rt||w!==rt)throw new Error("G1: non-empty point at infinity");return mi.G1.Point.ZERO.toAffine()}return{x:pe.create(a),y:pe.create(w)}}else throw new Error("invalid G1 point: expected 48/96 bytes")}function ro(t){const{infinity:e,sort:r,value:n}=gi(at("signatureHex",t,48)),i=pe.ORDER,u=mi.G1.Point,f=Ft(n);if(e)return u.ZERO;const a=pe.create(f&pe.MASK),w=pe.add(pe.pow(a,yi),pe.create(wr.b));let _=pe.sqrt(w);if(!_)throw new Error("invalid G1 point: compressed");const x=BigInt(r);_*We/i!==x&&(_=pe.neg(_));const N=u.fromAffine({x:a,y:_});return N.assertValidity(),N}function p0(t,e,r){const{BYTES:n,ORDER:i}=pe,u=e.is0(),{x:f,y:a}=e.toAffine();if(r){if(u)return $e(wi,Le(rt,n));const w=!!(a.c1===rt?a.c0*We/i:a.c1*We/i);return $e(wn(Le(f.c1,n),{compressed:!0,sort:w}),Le(f.c0,n))}else{if(u)return $e(Uint8Array.of(64),new Uint8Array(4*n-1));const{re:w,im:_}=de.reim(f),{re:x,im:N}=de.reim(a);return $e(Le(_,n),Le(w,n),Le(N,n),Le(x,n))}}function ji(t){t.assertValidity();const{BYTES:e}=pe;if(t.is0())return $e(wi,Le(rt,e));const{x:r,y:n}=t.toAffine(),{re:i,im:u}=de.reim(r),{re:f,im:a}=de.reim(n),_=!!((a>rt?a*We:f*We)/pe.ORDER&ni),x=i;return $e(wn(Le(u,e),{sort:_,compressed:!0}),Le(x,e))}function y0(t){const{BYTES:e,ORDER:r}=pe,{compressed:n,infinity:i,sort:u,value:f}=gi(t);if(!n&&!i&&u||!n&&i&&u||u&&i&&n)throw new Error("invalid encoding flag: "+(t[0]&224));const a=(w,_,x)=>Ft(w.slice(_,x));if(f.length===96&&n){if(i){if(f.reduce((y,G)=>y!==0?G+1:G,0)>0)throw new Error("invalid G2 point: compressed");return{x:de.ZERO,y:de.ZERO}}const w=a(f,0,e),_=a(f,e,2*e),x=de.create({c0:pe.create(_),c1:pe.create(w)}),N=de.add(de.pow(x,yi),Bs.b);let M=de.sqrt(N);const T=M.c1===rt?M.c0*We/r:M.c1*We/r?ni:rt;return M=u&&T>0?M:de.neg(M),{x,y:M}}else if(f.length===192&&!n){if(i){if(f.reduce((M,T)=>M!==0?T+1:T,0)>0)throw new Error("invalid G2 point: uncompressed");return{x:de.ZERO,y:de.ZERO}}const w=a(f,0*e,1*e),_=a(f,1*e,2*e),x=a(f,2*e,3*e),N=a(f,3*e,4*e);return{x:de.fromBigTuple([_,w]),y:de.fromBigTuple([N,x])}}else throw new Error("invalid G2 point: expected 96/192 bytes")}function no(t){const{ORDER:e}=pe,{infinity:r,sort:n,value:i}=gi(at("signatureHex",t)),u=mi.G2.Point,f=i.length/2;if(f!==48&&f!==96)throw new Error("invalid compressed signature length, expected 96/192 bytes");const a=Ft(i.slice(0,f)),w=Ft(i.slice(f));if(r)return u.ZERO;const _=pe.create(a&pe.MASK),x=pe.create(w),N=de.create({c0:x,c1:_}),M=de.add(de.pow(N,yi),Bs.b);let T=de.sqrt(M);if(!T)throw new Error("Failed to find a square root");const{re:y,im:G}=de.reim(T),V=BigInt(n),W=G>rt&&G*We/e!==V,K=G===rt&&y*We/e!==V;(W||K)&&(T=de.neg(T));const Z=u.fromAffine({x:N,y:T});return Z.assertValidity(),Z}const mi=o0({fields:{Fp:pe,Fp2:de,Fp6:os,Fp12:Be,Fr:f0},G1:{...wr,Fp:pe,htfDefaults:{...Vi,m:1,DST:"BLS_SIG_BLS12381G1_XMD:SHA-256_SSWU_RO_NUL_"},wrapPrivateKey:!0,allowInfinityPoint:!0,isTorsionFree:(t,e)=>{const r=BigInt("0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffe"),n=new t(pe.mul(e.px,r),e.py,e.pz);return e.multiplyUnsafe(Qt).negate().multiplyUnsafe(Qt).equals(n)},clearCofactor:(t,e)=>e.multiplyUnsafe(Qt).add(e),mapToCurve:_0,fromBytes:d0,toBytes:h0,ShortSignature:{fromBytes(t){return Je(t),ro(t)},fromHex(t){return ro(t)},toBytes(t){return Hi(t)},toRawBytes(t){return Hi(t)},toHex(t){return Cr(Hi(t))}}},G2:{...Bs,Fp:de,hEff:BigInt("0xbc69f08f2ee75b3584c6a0ea91b352888e2a8e9145ad7689986ff031508ffe1329c2f178731db956d82bf015d1212b02ec0ec69d7477c1ae954cbc06689f6a359894c0adebbf6b4e8020005aaa95551"),htfDefaults:{...Vi},wrapPrivateKey:!0,allowInfinityPoint:!0,mapToCurve:x0,isTorsionFree:(t,e)=>e.multiplyUnsafe(Qt).negate().equals(to(t,e)),clearCofactor:(t,e)=>{const r=Qt;let n=e.multiplyUnsafe(r).negate(),i=to(t,e),u=e.double();return u=l0(t,u),u=u.subtract(i),i=n.add(i),i=i.multiplyUnsafe(r).negate(),u=u.add(i),u=u.subtract(n),u.subtract(e)},fromBytes:y0,toBytes:p0,Signature:{fromBytes(t){return Je(t),no(t)},fromHex(t){return no(t)},toBytes(t){return ji(t)},toRawBytes(t){return ji(t)},toHex(t){return Cr(ji(t))}}},params:{ateLoopSize:Qt,r:wr.n,xNegative:!0,twistType:"multiplicative"},htfDefaults:Vi,hash:ds}),w0=Xa(de,[[["0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6"],["0x0","0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71a"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71e","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38d"],["0x171d6541fa38ccfaed6dea691f5fb614cb14b4e7f4e810aa22d6108f142b85757098e38d0f671c7188e2aaaaaaaa5ed1","0x0"]],[["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa63"],["0xc","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa9f"],["0x1","0x0"]],[["0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706","0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706"],["0x0","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97be"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71c","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38f"],["0x124c9ad43b6cf79bfbf7043de3811ad0761b0f37a1e26286b0e977c69aa274524e79097a56dc4bd9e1b371c71c718b10","0x0"]],[["0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb"],["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa9d3"],["0x12","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa99"],["0x1","0x0"]]].map(t=>t.map(e=>de.fromBigTuple(e.map(BigInt))))),g0=Xa(pe,[["0x11a05f2b1e833340b809101dd99815856b303e88a2d7005ff2627b56cdb4e2c85610c2d5f2e62d6eaeac1662734649b7","0x17294ed3e943ab2f0588bab22147a81c7c17e75b2f6a8417f565e33c70d1e86b4838f2a6f318c356e834eef1b3cb83bb","0xd54005db97678ec1d1048c5d10a9a1bce032473295983e56878e501ec68e25c958c3e3d2a09729fe0179f9dac9edcb0","0x1778e7166fcc6db74e0609d307e55412d7f5e4656a8dbf25f1b33289f1b330835336e25ce3107193c5b388641d9b6861","0xe99726a3199f4436642b4b3e4118e5499db995a1257fb3f086eeb65982fac18985a286f301e77c451154ce9ac8895d9","0x1630c3250d7313ff01d1201bf7a74ab5db3cb17dd952799b9ed3ab9097e68f90a0870d2dcae73d19cd13c1c66f652983","0xd6ed6553fe44d296a3726c38ae652bfb11586264f0f8ce19008e218f9c86b2a8da25128c1052ecaddd7f225a139ed84","0x17b81e7701abdbe2e8743884d1117e53356de5ab275b4db1a682c62ef0f2753339b7c8f8c8f475af9ccb5618e3f0c88e","0x80d3cf1f9a78fc47b90b33563be990dc43b756ce79f5574a2c596c928c5d1de4fa295f296b74e956d71986a8497e317","0x169b1f8e1bcfa7c42e0c37515d138f22dd2ecb803a0c5c99676314baf4bb1b7fa3190b2edc0327797f241067be390c9e","0x10321da079ce07e272d8ec09d2565b0dfa7dccdde6787f96d50af36003b14866f69b771f8c285decca67df3f1605fb7b","0x6e08c248e260e70bd1e962381edee3d31d79d7e22c837bc23c0bf1bc24c6b68c24b1b80b64d391fa9c8ba2e8ba2d229"],["0x8ca8d548cff19ae18b2e62f4bd3fa6f01d5ef4ba35b48ba9c9588617fc8ac62b558d681be343df8993cf9fa40d21b1c","0x12561a5deb559c4348b4711298e536367041e8ca0cf0800c0126c2588c48bf5713daa8846cb026e9e5c8276ec82b3bff","0xb2962fe57a3225e8137e629bff2991f6f89416f5a718cd1fca64e00b11aceacd6a3d0967c94fedcfcc239ba5cb83e19","0x3425581a58ae2fec83aafef7c40eb545b08243f16b1655154cca8abc28d6fd04976d5243eecf5c4130de8938dc62cd8","0x13a8e162022914a80a6f1d5f43e7a07dffdfc759a12062bb8d6b44e833b306da9bd29ba81f35781d539d395b3532a21e","0xe7355f8e4e667b955390f7f0506c6e9395735e9ce9cad4d0a43bcef24b8982f7400d24bc4228f11c02df9a29f6304a5","0x772caacf16936190f3e0c63e0596721570f5799af53a1894e2e073062aede9cea73b3538f0de06cec2574496ee84a3a","0x14a7ac2a9d64a8b230b3f5b074cf01996e7f63c21bca68a81996e1cdf9822c580fa5b9489d11e2d311f7d99bbdcc5a5e","0xa10ecf6ada54f825e920b3dafc7a3cce07f8d1d7161366b74100da67f39883503826692abba43704776ec3a79a1d641","0x95fc13ab9e92ad4476d6e3eb3a56680f682b4ee96f7d03776df533978f31c1593174e4b4b7865002d6384d168ecdd0a","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"],["0x90d97c81ba24ee0259d1f094980dcfa11ad138e48a869522b52af6c956543d3cd0c7aee9b3ba3c2be9845719707bb33","0x134996a104ee5811d51036d776fb46831223e96c254f383d0f906343eb67ad34d6c56711962fa8bfe097e75a2e41c696","0xcc786baa966e66f4a384c86a3b49942552e2d658a31ce2c344be4b91400da7d26d521628b00523b8dfe240c72de1f6","0x1f86376e8981c217898751ad8746757d42aa7b90eeb791c09e4a3ec03251cf9de405aba9ec61deca6355c77b0e5f4cb","0x8cc03fdefe0ff135caf4fe2a21529c4195536fbe3ce50b879833fd221351adc2ee7f8dc099040a841b6daecf2e8fedb","0x16603fca40634b6a2211e11db8f0a6a074a7d0d4afadb7bd76505c3d3ad5544e203f6326c95a807299b23ab13633a5f0","0x4ab0b9bcfac1bbcb2c977d027796b3ce75bb8ca2be184cb5231413c4d634f3747a87ac2460f415ec961f8855fe9d6f2","0x987c8d5333ab86fde9926bd2ca6c674170a05bfe3bdd81ffd038da6c26c842642f64550fedfe935a15e4ca31870fb29","0x9fc4018bd96684be88c9e221e4da1bb8f3abd16679dc26c1e8b6e6a1f20cabe69d65201c78607a360370e577bdba587","0xe1bba7a1186bdb5223abde7ada14a23c42a0ca7915af6fe06985e7ed1e4d43b9b3f7055dd4eba6f2bafaaebca731c30","0x19713e47937cd1be0dfd0b8f1d43fb93cd2fcbcb6caf493fd1183e416389e61031bf3a5cce3fbafce813711ad011c132","0x18b46a908f36f6deb918c143fed2edcc523559b8aaf0c2462e6bfe7f911f643249d9cdf41b44d606ce07c8a4d0074d8e","0xb182cac101b9399d155096004f53f447aa7b12a3426b08ec02710e807b4633f06c851c1919211f20d4c04f00b971ef8","0x245a394ad1eca9b72fc00ae7be315dc757b3b080d4c158013e6632d3c40659cc6cf90ad1c232a6442d9d3f5db980133","0x5c129645e44cf1102a159f748c4a3fc5e673d81d7e86568d9ab0f5d396a7ce46ba1049b6579afb7866b1e715475224b","0x15e6be4e990f03ce4ea50b3b42df2eb5cb181d8f84965a3957add4fa95af01b2b665027efec01c7704b456be69c8b604"],["0x16112c4c3a9c98b252181140fad0eae9601a6de578980be6eec3232b5be72e7a07f3688ef60c206d01479253b03663c1","0x1962d75c2381201e1a0cbd6c43c348b885c84ff731c4d59ca4a10356f453e01f78a4260763529e3532f6102c2e49a03d","0x58df3306640da276faaae7d6e8eb15778c4855551ae7f310c35a5dd279cd2eca6757cd636f96f891e2538b53dbf67f2","0x16b7d288798e5395f20d23bf89edb4d1d115c5dbddbcd30e123da489e726af41727364f2c28297ada8d26d98445f5416","0xbe0e079545f43e4b00cc912f8228ddcc6d19c9f0f69bbb0542eda0fc9dec916a20b15dc0fd2ededda39142311a5001d","0x8d9e5297186db2d9fb266eaac783182b70152c65550d881c5ecd87b6f0f5a6449f38db9dfa9cce202c6477faaf9b7ac","0x166007c08a99db2fc3ba8734ace9824b5eecfdfa8d0cf8ef5dd365bc400a0051d5fa9c01a58b1fb93d1a1399126a775c","0x16a3ef08be3ea7ea03bcddfabba6ff6ee5a4375efa1f4fd7feb34fd206357132b920f5b00801dee460ee415a15812ed9","0x1866c8ed336c61231a1be54fd1d74cc4f9fb0ce4c6af5920abc5750c4bf39b4852cfe2f7bb9248836b233d9d55535d4a","0x167a55cda70a6e1cea820597d94a84903216f763e13d87bb5308592e7ea7d4fbc7385ea3d529b35e346ef48bb8913f55","0x4d2f259eea405bd48f010a01ad2911d9c6dd039bb61a6290e591b36e636a5c871a5c29f4f83060400f8b49cba8f6aa8","0xaccbb67481d033ff5852c1e48c50c477f94ff8aefce42d28c0f9a88cea7913516f968986f7ebbea9684b529e2561092","0xad6b9514c767fe3c3613144b45f1496543346d98adf02267d5ceef9a00d9b8693000763e3b90ac11e99b138573345cc","0x2660400eb2e4f3b628bdd0d53cd76f2bf565b94e72927c1cb748df27942480e420517bd8714cc80d1fadc1326ed06f7","0xe0fa1d816ddc03e6b24255e0d7819c171c40f65e273b853324efcd6356caa205ca2f570f13497804415473a1d634b8f","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"]].map(t=>t.map(e=>BigInt(e)))),m0=Da(pe,{A:pe.create(BigInt("0x144698a3b8e9433d693a02c96d4982b0ea985383ee66a8d8e8981aefd881ac98936f8da0e0f97f5cf428082d584c1d")),B:pe.create(BigInt("0x12e2908d11688030018b12e8753eee3b2016c1f0f24f4070a0b9c14fcef35ef55a23215a316ceaa5d1cc48e98e172be0")),Z:pe.create(BigInt(11))}),b0=Da(de,{A:de.create({c0:pe.create(rt),c1:pe.create(BigInt(240))}),B:de.create({c0:pe.create(BigInt(1012)),c1:pe.create(BigInt(1012))}),Z:de.create({c0:pe.create(BigInt(-2)),c1:pe.create(BigInt(-1))})});function _0(t){const{x:e,y:r}=m0(pe.create(t[0]));return g0(e,r)}function x0(t){const{x:e,y:r}=b0(de.fromBigTuple(t));return w0(e,r)}function E0(t,e,r){const n=typeof t=="string"?t:Ke(t),i=typeof e=="string"?e:Ke(e),u=typeof r=="string"?r:Ke(r);return mi.verifyShortSignature(i,u,n)}const ec=t=>Ye(new Hr(t)),As=t=>{const e=ec(t);return new Date(Number(e)/1e6)};var B0=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},A0=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Mn;class Nt extends Pe{constructor(e){super(`Invalid certificate: ${e}`)}}var ft;(function(t){t[t.Empty=0]="Empty",t[t.Fork=1]="Fork",t[t.Labeled=2]="Labeled",t[t.Leaf=3]="Leaf",t[t.Pruned=4]="Pruned"})(ft||(ft={}));function T0(t,e){const r=new Uint8Array(t),n=new Uint8Array(e);for(let i=0;i<r.length;i++)if(r[i]>n[i])return!0;return!1}class lr{constructor(e,r,n,i,u=5,f=!1){this._rootKey=r,this._canisterId=n,this._blsVerify=i,this._maxAgeInMinutes=u,Mn.set(this,!1),B0(this,Mn,f,"f"),this.cert=Gt(new Uint8Array(e))}static async create(e){const r=lr.createUnverified(e);return await r.verify(),r}static createUnverified(e){let r=e.blsVerify;return r||(r=E0),new lr(e.certificate,e.rootKey,e.canisterId,r,e.maxAgeInMinutes,e.disableTimeVerification)}lookup(e){return Vr(e,this.cert.tree)}lookup_label(e){return this.lookup([e])}async verify(){const e=await Pn(this.cert.tree),r=await this._checkDelegationAndGetKey(this.cert.delegation),n=this.cert.signature,i=S0(r),u=Rt(Lr("ic-state-root"),e);let f=!1;const a=dt(this.lookup(["time"]));if(!a)throw new Nt("Certificate does not contain a time");if(!A0(this,Mn,"f")){const _=this._maxAgeInMinutes*60*1e3,x=Date.now(),N=x-_,M=x+3e5,T=As(a);if(T.getTime()<N)throw new Nt(`Certificate is signed more than ${this._maxAgeInMinutes} minutes in the past. Certificate time: `+T.toISOString()+" Current time: "+new Date(x).toISOString());if(T.getTime()>M)throw new Nt("Certificate is signed more than 5 minutes in the future. Certificate time: "+T.toISOString()+" Current time: "+new Date(x).toISOString())}try{f=await this._blsVerify(new Uint8Array(i),new Uint8Array(n),new Uint8Array(u))}catch{f=!1}if(!f)throw new Nt("Signature verification failed")}async _checkDelegationAndGetKey(e){if(!e)return this._rootKey;const r=await lr.createUnverified({certificate:e.certificate,rootKey:this._rootKey,canisterId:this._canisterId,blsVerify:this._blsVerify,maxAgeInMinutes:1/0});if(r.cert.delegation)throw new Nt("Delegation certificates cannot be nested");if(await r.verify(),this._canisterId.toString()!==rl&&!tc({canisterId:this._canisterId,subnetId:xe.fromUint8Array(new Uint8Array(e.subnet_id)),tree:r.cert.tree}))throw new Nt(`Canister ${this._canisterId} not in range of delegations for subnet 0x${Ke(e.subnet_id)}`);const n=dt(r.lookup(["subnet",e.subnet_id,"public_key"]));if(!n)throw new Error(`Could not find subnet key for subnet 0x${Ke(e.subnet_id)}`);return n}}Mn=new WeakMap;const Yr=Ln("308182301d060d2b0601040182dc7c0503010201060c2b0601040182dc7c05030201036100"),v0=96;function S0(t){const e=Yr.byteLength+v0;if(t.byteLength!==e)throw new TypeError(`BLS DER-encoded public key must be ${e} bytes long`);const r=t.slice(0,Yr.byteLength);if(!si(r,Yr))throw new TypeError(`BLS DER-encoded public key is invalid. Expect the following prefix: ${Yr}, but get ${r}`);return t.slice(Yr.byteLength)}function dt(t){if(t.status===Ve.Found){if(t.value instanceof ArrayBuffer)return t.value;if(t.value instanceof Uint8Array)return t.value.buffer}}async function Pn(t){switch(t[0]){case ft.Empty:return bt(Lr("ic-hashtree-empty"));case ft.Pruned:return t[1];case ft.Leaf:return bt(Rt(Lr("ic-hashtree-leaf"),t[1]));case ft.Labeled:return bt(Rt(Lr("ic-hashtree-labeled"),t[1],await Pn(t[2])));case ft.Fork:return bt(Rt(Lr("ic-hashtree-fork"),await Pn(t[1]),await Pn(t[2])));default:throw new Error("unreachable")}}function Lr(t){const e=new Uint8Array([t.length]),r=new TextEncoder().encode(t);return Rt(e,r)}var Ve;(function(t){t.Unknown="unknown",t.Absent="absent",t.Found="found"})(Ve||(Ve={}));var Ct;(function(t){t.Less="less",t.Greater="greater"})(Ct||(Ct={}));function Vr(t,e){if(t.length===0)switch(e[0]){case ft.Leaf:{if(!e[1])throw new Error("Invalid tree structure for leaf");return e[1]instanceof ArrayBuffer?{status:Ve.Found,value:e[1]}:e[1]instanceof Uint8Array?{status:Ve.Found,value:e[1].buffer}:{status:Ve.Found,value:e[1]}}default:return{status:Ve.Found,value:e}}const r=typeof t[0]=="string"?new TextEncoder().encode(t[0]):t[0],n=kn(r,e);switch(n.status){case Ve.Found:return Vr(t.slice(1),n.value);case Ct.Greater:case Ct.Less:return{status:Ve.Absent};default:return n}}function as(t){switch(t[0]){case ft.Empty:return[];case ft.Fork:return as(t[1]).concat(as(t[2]));default:return[t]}}function kn(t,e){switch(e[0]){case ft.Labeled:return T0(t,e[1])?{status:Ct.Greater}:si(t,e[1])?{status:Ve.Found,value:e[2]}:{status:Ct.Less};case ft.Fork:const r=kn(t,e[1]);switch(r.status){case Ct.Greater:{const n=kn(t,e[2]);return n.status===Ct.Less?{status:Ve.Absent}:n}case Ve.Unknown:{let n=kn(t,e[2]);return n.status===Ct.Less?{status:Ve.Unknown}:n}default:return r}case ft.Pruned:return{status:Ve.Unknown};default:return{status:Ve.Absent}}}function tc(t){const{canisterId:e,subnetId:r,tree:n}=t,i=Vr(["subnet",r.toUint8Array(),"canister_ranges"],n);if(i.status!==Ve.Found||!(i.value instanceof ArrayBuffer))throw new Error(`Could not find canister ranges for subnet ${r}`);return Gt(i.value).map(w=>[xe.fromUint8Array(w[0]),xe.fromUint8Array(w[1])]).some(w=>w[0].ltEq(e)&&w[1].gtEq(e))}class N0{constructor(e,r,n){this.key=e,this.path=r,this.decodeStrategy=n}}const rc=async t=>{const{agent:e,paths:r}=t,n=xe.from(t.canisterId),i=[...new Set(r)],u=i.map(w=>cs(w,n)),f=new Map,a=i.map((w,_)=>(async()=>{var x;try{const N=await e.readState(n,{paths:[u[_]]});if(e.rootKey==null)throw new Error("Agent is missing root key");const M=await lr.create({certificate:N.certificate,rootKey:e.rootKey,canisterId:n,disableTimeVerification:!0}),T=(V,W)=>{if(W==="subnet"){if(e.rootKey==null)throw new Error("Agent is missing root key");const K=nc(N.certificate,n,e.rootKey);return{path:W,data:K}}else return{path:W,data:dt(V.lookup(cs(W,n)))}},{path:y,data:G}=T(M,i[_]);if(!G)console.warn(`Expected to find result for path ${y}, but instead found nothing.`),typeof y=="string"?f.set(y,null):f.set(y.key,null);else switch(y){case"time":{f.set(y,As(G));break}case"controllers":{f.set(y,U0(G));break}case"module_hash":{f.set(y,io(G));break}case"subnet":{f.set(y,G);break}case"candid":{f.set(y,new TextDecoder().decode(G));break}default:if(typeof y!="string"&&"key"in y&&"path"in y)switch(y.decodeStrategy){case"raw":f.set(y.key,G);break;case"leb128":{f.set(y.key,ec(G));break}case"cbor":{f.set(y.key,ic(G));break}case"hex":{f.set(y.key,io(G));break}case"utf-8":f.set(y.key,I0(G))}}}catch(N){if(!((x=N==null?void 0:N.message)===null||x===void 0)&&x.includes("Invalid certificate"))throw new Pe(N.message);typeof w!="string"&&"key"in w&&"path"in w?f.set(w.key,null):f.set(w,null),console.group(),console.warn(`Expected to find result for path ${w}, but instead found nothing.`),console.warn(N),console.groupEnd()}})());return await Promise.all(a),f},nc=(t,e,r)=>{if(!e._isPrincipal)throw new Error("Invalid canisterId");const n=Gt(new Uint8Array(t)),i=n.tree;let u=n.delegation,f;if(u&&u.subnet_id?f=xe.fromUint8Array(new Uint8Array(u.subnet_id)):!u&&typeof r<"u"?(f=xe.selfAuthenticating(new Uint8Array(r)),u={subnet_id:f.toUint8Array(),certificate:new ArrayBuffer(0)}):(f=xe.selfAuthenticating(xe.fromText("tdb26-jop6k-aogll-7ltgs-eruif-6kk7m-qpktf-gdiqx-mxtrf-vb5e6-eqe").toUint8Array()),u={subnet_id:f.toUint8Array(),certificate:new ArrayBuffer(0)}),!tc({canisterId:e,subnetId:f,tree:i}))throw new Error("Canister not in range");const w=Vr(["subnet",u.subnet_id,"node"],i);if(w.status!==Ve.Found)throw new Error("Node not found");if(w.value instanceof ArrayBuffer)throw new Error("Invalid node tree");const _=as(w.value),x=new Map;return _.forEach(N=>{const M=xe.from(new Uint8Array(N[1])).toText(),T=Vr(["public_key"],N[2]);if(T.status!==Ve.Found)throw new Error("Public key not found");const y=T.value;if(y.byteLength!==44)throw new Error("Invalid public key length");x.set(M,y)}),{subnetId:xe.fromUint8Array(new Uint8Array(u.subnet_id)).toText(),nodeKeys:x}},cs=(t,e)=>{const r=new TextEncoder,n=u=>new DataView(r.encode(u).buffer).buffer,i=new DataView(e.toUint8Array().buffer).buffer;switch(t){case"time":return[n("time")];case"controllers":return[n("canister"),i,n("controllers")];case"module_hash":return[n("canister"),i,n("module_hash")];case"subnet":return[n("subnet")];case"candid":return[n("canister"),i,n("metadata"),n("candid:service")];default:if("key"in t&&"path"in t)if(typeof t.path=="string"||t.path instanceof ArrayBuffer){const u=t.path,f=typeof u=="string"?n(u):u;return[n("canister"),i,n("metadata"),f]}else return t.path}throw new Error(`An unexpeected error was encountered while encoding your path for canister status. Please ensure that your path, ${t} was formatted correctly.`)},io=t=>Ke(t),ic=t=>Gt(t),I0=t=>new TextDecoder().decode(t),U0=t=>ic(t).map(r=>xe.fromUint8Array(new Uint8Array(r))),R0=Object.freeze(Object.defineProperty({__proto__:null,CustomPath:N0,encodePath:cs,fetchNodeKeys:nc,request:rc},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const At=BigInt(0),st=BigInt(1),zi=BigInt(2),F0=BigInt(8),O0={zip215:!0};function M0(t,e,r,n){const i=t.sqr(r),u=t.sqr(n),f=t.add(t.mul(e.a,i),u),a=t.add(t.ONE,t.mul(e.d,t.mul(i,u)));return t.eql(f,a)}function P0(t,e={}){const{Fp:r,Fn:n}=La("edwards",t,e),{h:i,n:u}=t;yn(e,{},{uvRatio:"function"});const f=zi<<BigInt(n.BYTES*8)-st,a=G=>r.create(G),w=e.uvRatio||((G,V)=>{try{return{isValid:!0,value:r.sqrt(r.div(G,V))}}catch{return{isValid:!1,value:At}}});if(!M0(r,t,t.Gx,t.Gy))throw new Error("bad curve params: generator point");function _(G,V,W=!1){const K=W?st:At;return Zr("coordinate "+G,V,K,f),V}function x(G){if(!(G instanceof T))throw new Error("ExtendedPoint expected")}const N=an((G,V)=>{const{ex:W,ey:K,ez:Z}=G,se=G.is0();V==null&&(V=se?F0:r.inv(Z));const S=a(W*V),L=a(K*V),X=a(Z*V);if(se)return{x:At,y:st};if(X!==st)throw new Error("invZ was invalid");return{x:S,y:L}}),M=an(G=>{const{a:V,d:W}=t;if(G.is0())throw new Error("bad point: ZERO");const{ex:K,ey:Z,ez:se,et:S}=G,L=a(K*K),X=a(Z*Z),Q=a(se*se),q=a(Q*Q),C=a(L*V),ee=a(Q*a(C+X)),te=a(q+a(W*a(L*X)));if(ee!==te)throw new Error("bad point: equation left != right (1)");const B=a(K*Z),U=a(se*S);if(B!==U)throw new Error("bad point: equation left != right (2)");return!0});class T{constructor(V,W,K,Z){this.ex=_("x",V),this.ey=_("y",W),this.ez=_("z",K,!0),this.et=_("t",Z),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(V){if(V instanceof T)throw new Error("extended point not allowed");const{x:W,y:K}=V||{};return _("x",W),_("y",K),new T(W,K,st,a(W*K))}static normalizeZ(V){return ri(T,"ez",V)}static msm(V,W){return Za(T,n,V,W)}_setWindowSize(V){this.precompute(V)}precompute(V=8,W=!0){return y.setWindowSize(this,V),W||this.multiply(zi),this}assertValidity(){M(this)}equals(V){x(V);const{ex:W,ey:K,ez:Z}=this,{ex:se,ey:S,ez:L}=V,X=a(W*L),Q=a(se*Z),q=a(K*L),C=a(S*Z);return X===Q&&q===C}is0(){return this.equals(T.ZERO)}negate(){return new T(a(-this.ex),this.ey,this.ez,a(-this.et))}double(){const{a:V}=t,{ex:W,ey:K,ez:Z}=this,se=a(W*W),S=a(K*K),L=a(zi*a(Z*Z)),X=a(V*se),Q=W+K,q=a(a(Q*Q)-se-S),C=X+S,ee=C-L,te=X-S,B=a(q*ee),U=a(C*te),$=a(q*te),Y=a(ee*C);return new T(B,U,Y,$)}add(V){x(V);const{a:W,d:K}=t,{ex:Z,ey:se,ez:S,et:L}=this,{ex:X,ey:Q,ez:q,et:C}=V,ee=a(Z*X),te=a(se*Q),B=a(L*K*C),U=a(S*q),$=a((Z+se)*(X+Q)-ee-te),Y=U-B,D=U+B,re=a(te-W*ee),le=a($*Y),ye=a(D*re),oe=a($*re),fe=a(Y*D);return new T(le,ye,fe,oe)}subtract(V){return this.add(V.negate())}multiply(V){const W=V;Zr("scalar",W,st,u);const{p:K,f:Z}=y.wNAFCached(this,W,T.normalizeZ);return T.normalizeZ([K,Z])[0]}multiplyUnsafe(V,W=T.ZERO){const K=V;return Zr("scalar",K,At,u),K===At?T.ZERO:this.is0()||K===st?this:y.wNAFCachedUnsafe(this,K,T.normalizeZ,W)}isSmallOrder(){return this.multiplyUnsafe(i).is0()}isTorsionFree(){return y.wNAFCachedUnsafe(this,u).is0()}toAffine(V){return N(this,V)}clearCofactor(){return i===st?this:this.multiplyUnsafe(i)}static fromBytes(V,W=!1){return Je(V),this.fromHex(V,W)}static fromHex(V,W=!1){const{d:K,a:Z}=t,se=r.BYTES;V=at("pointHex",V,se),sn("zip215",W);const S=V.slice(),L=V[se-1];S[se-1]=L&-129;const X=on(S),Q=W?f:r.ORDER;Zr("pointHex.y",X,At,Q);const q=a(X*X),C=a(q-st),ee=a(K*q-Z);let{isValid:te,value:B}=w(C,ee);if(!te)throw new Error("Point.fromHex: invalid y coordinate");const U=(B&st)===st,$=(L&128)!==0;if(!W&&B===At&&$)throw new Error("Point.fromHex: x=0 and x_0=1");return $!==U&&(B=a(-B)),T.fromAffine({x:B,y:X})}static fromPrivateScalar(V){return T.BASE.multiply(V)}toBytes(){const{x:V,y:W}=this.toAffine(),K=pi(W,r.BYTES);return K[K.length-1]|=V&st?128:0,K}toRawBytes(){return this.toBytes()}toHex(){return Cr(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}T.BASE=new T(t.Gx,t.Gy,st,a(t.Gx*t.Gy)),T.ZERO=new T(At,st,st,At),T.Fp=r,T.Fn=n;const y=Wa(T,n.BYTES*8);return T}function k0(t,e){yn(e,{hash:"function"},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:r,hash:n}=e,{BASE:i,Fp:u,Fn:f}=t,a=f.ORDER,w=e.randomBytes||Bo,_=e.adjustScalarBytes||(S=>S),x=e.domain||((S,L,X)=>{if(sn("phflag",X),L.length||X)throw new Error("Contexts/pre-hash are not supported");return S});function N(S){return f.create(S)}function M(S){return N(on(S))}function T(S){const L=u.BYTES;S=at("private key",S,L);const X=at("hashed private key",n(S),2*L),Q=_(X.slice(0,L)),q=X.slice(L,2*L),C=M(Q);return{head:Q,prefix:q,scalar:C}}function y(S){const{head:L,prefix:X,scalar:Q}=T(S),q=i.multiply(Q),C=q.toBytes();return{head:L,prefix:X,scalar:Q,point:q,pointBytes:C}}function G(S){return y(S).pointBytes}function V(S=Uint8Array.of(),...L){const X=$e(...L);return M(n(x(X,at("context",S),!!r)))}function W(S,L,X={}){S=at("message",S),r&&(S=r(S));const{prefix:Q,scalar:q,pointBytes:C}=y(L),ee=V(X.context,Q,S),te=i.multiply(ee).toBytes(),B=V(X.context,te,C,S),U=N(ee+B*q);Zr("signature.s",U,At,a);const $=u.BYTES,Y=$e(te,pi(U,$));return at("result",Y,$*2)}const K=O0;function Z(S,L,X,Q=K){const{context:q,zip215:C}=Q,ee=u.BYTES;S=at("signature",S,2*ee),L=at("message",L),X=at("publicKey",X,ee),C!==void 0&&sn("zip215",C),r&&(L=r(L));const te=on(S.slice(ee,2*ee));let B,U,$;try{B=t.fromHex(X,C),U=t.fromHex(S.slice(0,ee),C),$=i.multiplyUnsafe(te)}catch{return!1}if(!C&&B.isSmallOrder())return!1;const Y=V(q,U.toBytes(),B.toBytes(),L);return U.add(B.multiplyUnsafe(Y)).subtract($).clearCofactor().is0()}return i.precompute(8),{getPublicKey:G,sign:W,verify:Z,utils:{getExtendedPublicKey:y,randomPrivateKey:()=>w(u.BYTES),precompute(S=8,L=t.BASE){return L.precompute(S,!1)}},Point:t}}function $0(t){const e={a:t.a,d:t.d,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp,n=gr(e.n,t.nBitLength,!0),i={Fp:r,Fn:n,uvRatio:t.uvRatio},u={hash:t.hash,randomBytes:t.randomBytes,adjustScalarBytes:t.adjustScalarBytes,domain:t.domain,prehash:t.prehash,mapToCurve:t.mapToCurve};return{CURVE:e,curveOpts:i,eddsaOpts:u}}function C0(t,e){return Object.assign({},e,{ExtendedPoint:e.Point,CURVE:t})}function q0(t){const{CURVE:e,curveOpts:r,eddsaOpts:n}=$0(t),i=P0(e,r),u=k0(i,n);return C0(t,u)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BigInt(0);const G0=BigInt(1),so=BigInt(2);BigInt(3);const V0=BigInt(5),H0=BigInt(8),bi={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:H0,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function j0(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),u=bi.p,a=t*t%u*t%u,w=Et(a,so,u)*a%u,_=Et(w,G0,u)*t%u,x=Et(_,V0,u)*_%u,N=Et(x,e,u)*x%u,M=Et(N,r,u)*N%u,T=Et(M,n,u)*M%u,y=Et(T,i,u)*T%u,G=Et(y,i,u)*T%u,V=Et(G,e,u)*x%u;return{pow_p_5_8:Et(V,so,u)*t%u,b2:a}}function z0(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const oo=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function Y0(t,e){const r=bi.p,n=Ge(e*e*e,r),i=Ge(n*n*e,r),u=j0(t*i).pow_p_5_8;let f=Ge(t*n*u,r);const a=Ge(e*f*f,r),w=f,_=Ge(f*oo,r),x=a===t,N=a===Ge(-t,r),M=a===Ge(-t*oo,r);return x&&(f=w),(N||M)&&(f=_),Hf(f,r)&&(f=Ge(-f,r)),{isValid:x||N,value:f}}const K0=(()=>gr(bi.p,void 0,!0))(),W0=(()=>({...bi,Fp:K0,hash:wu,adjustScalarBytes:z0,uvRatio:Y0}))(),Z0=(()=>q0(W0))();var ao=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},ot=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},et,Xr,sc,oc;class L0{constructor(e={}){et.set(this,void 0),Xr.set(this,void 0),this[sc]=this.entries.bind(this),this[oc]="ExpirableMap";const{source:r=[],expirationTime:n=10*60*1e3}=e,i=Date.now();ao(this,et,new Map([...r].map(([u,f])=>[u,{value:f,timestamp:i}])),"f"),ao(this,Xr,n,"f")}prune(){const e=Date.now();for(const[r,n]of ot(this,et,"f").entries())e-n.timestamp>ot(this,Xr,"f")&&ot(this,et,"f").delete(r);return this}set(e,r){this.prune();const n={value:r,timestamp:Date.now()};return ot(this,et,"f").set(e,n),this}get(e){const r=ot(this,et,"f").get(e);if(r!==void 0){if(Date.now()-r.timestamp>ot(this,Xr,"f")){ot(this,et,"f").delete(e);return}return r.value}}clear(){ot(this,et,"f").clear()}entries(){const e=ot(this,et,"f").entries();return function*(){for(const[n,i]of e)yield[n,i.value]}()}values(){const e=ot(this,et,"f").values();return function*(){for(const n of e)yield n.value}()}keys(){return ot(this,et,"f").keys()}forEach(e,r){for(const[n,i]of ot(this,et,"f").entries())e.call(r,i.value,n,this)}has(e){return ot(this,et,"f").has(e)}delete(e){return ot(this,et,"f").delete(e)}get size(){return ot(this,et,"f").size}}et=new WeakMap,Xr=new WeakMap,sc=Symbol.iterator,oc=Symbol.toStringTag;const co=t=>{if(t<=127)return 1;if(t<=255)return 2;if(t<=65535)return 3;if(t<=16777215)return 4;throw new Error("Length too long (> 4 bytes)")},uo=(t,e,r)=>{if(r<=127)return t[e]=r,1;if(r<=255)return t[e]=129,t[e+1]=r,2;if(r<=65535)return t[e]=130,t[e+1]=r>>8,t[e+2]=r,3;if(r<=16777215)return t[e]=131,t[e+1]=r>>16,t[e+2]=r>>8,t[e+3]=r,4;throw new Error("Length too long (> 4 bytes)")},us=(t,e)=>{if(t[e]<128)return 1;if(t[e]===128)throw new Error("Invalid length 0");if(t[e]===129)return 2;if(t[e]===130)return 3;if(t[e]===131)return 4;throw new Error("Length too long (> 4 bytes)")},X0=(t,e)=>{const r=us(t,e);if(r===1)return t[e];if(r===2)return t[e+1];if(r===3)return(t[e+1]<<8)+t[e+2];if(r===4)return(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];throw new Error("Length too long (> 4 bytes)")};Uint8Array.from([48,12,6,10,43,6,1,4,1,131,184,67,1,1]);const fo=Uint8Array.from([48,5,6,3,43,101,112]);Uint8Array.from([48,16,6,7,42,134,72,206,61,2,1,6,5,43,129,4,0,10]);function J0(t,e){const r=2+co(t.byteLength+1),n=e.byteLength+r+t.byteLength;let i=0;const u=new Uint8Array(1+co(n)+n);return u[i++]=48,i+=uo(u,i,n),u.set(e,i),i+=e.byteLength,u[i++]=3,i+=uo(u,i,t.byteLength+1),u[i++]=0,u.set(new Uint8Array(t),i),u}const Q0=(t,e)=>{let r=0;const n=(a,w)=>{if(i[r++]!==a)throw new Error("Expected: "+w)},i=new Uint8Array(t);if(n(48,"sequence"),r+=us(i,r),!si(i.slice(r,r+e.byteLength),e))throw new Error("Not the expected OID.");r+=e.byteLength,n(3,"bit string");const u=X0(i,r)-1;r+=us(i,r),n(0,"0 padding");const f=i.slice(r);if(u!==f.length)throw new Error(`DER payload mismatch: Expected length ${u} actual length ${f.length}`);return f};var lo=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},ho=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},$n,Cn;class ur{constructor(e){if($n.set(this,void 0),Cn.set(this,void 0),e.byteLength!==ur.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");lo(this,$n,e,"f"),lo(this,Cn,ur.derEncode(e),"f")}static from(e){return this.fromDer(e.toDer())}static fromRaw(e){return new ur(e)}static fromDer(e){return new ur(this.derDecode(e))}static derEncode(e){return J0(e,fo).buffer}static derDecode(e){const r=Q0(e,fo);if(r.length!==this.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");return r}get rawKey(){return ho(this,$n,"f")}get derKey(){return ho(this,Cn,"f")}toDer(){return this.derKey}toRaw(){return this.rawKey}}$n=new WeakMap,Cn=new WeakMap;ur.RAW_KEY_LENGTH=32;class D0{constructor(){this.observers=[]}subscribe(e){this.observers.push(e)}unsubscribe(e){this.observers=this.observers.filter(r=>r!==e)}notify(e,...r){this.observers.forEach(n=>n(e,...r))}}class el extends D0{constructor(){super()}print(e,...r){this.notify({message:e,level:"info"},...r)}warn(e,...r){this.notify({message:e,level:"warn"},...r)}error(e,r,...n){this.notify({message:e,level:"error",error:r},...n)}}var Bt=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},De=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Tt,qn,Gn,Vn,Hn,jn,zn,Yn,Tr;const ac=.5,cc=1.5,uc=500,fc=6e4,lc=9e5,hc=10;class _i{constructor(e=_i.default){Tt.set(this,void 0),qn.set(this,void 0),Gn.set(this,void 0),Vn.set(this,void 0),Hn.set(this,void 0),jn.set(this,void 0),zn.set(this,void 0),Yn.set(this,void 0),Tr.set(this,0);const{initialInterval:r=uc,randomizationFactor:n=ac,multiplier:i=cc,maxInterval:u=fc,maxElapsedTime:f=lc,maxIterations:a=hc,date:w=Date}=e;Bt(this,Tt,r,"f"),Bt(this,qn,n,"f"),Bt(this,Gn,i,"f"),Bt(this,Vn,u,"f"),Bt(this,Yn,w,"f"),Bt(this,Hn,w.now(),"f"),Bt(this,jn,f,"f"),Bt(this,zn,a,"f")}get ellapsedTimeInMsec(){return De(this,Yn,"f").now()-De(this,Hn,"f")}get currentInterval(){return De(this,Tt,"f")}get count(){return De(this,Tr,"f")}get randomValueFromInterval(){const e=De(this,qn,"f")*De(this,Tt,"f"),r=De(this,Tt,"f")-e,n=De(this,Tt,"f")+e;return Math.random()*(n-r)+r}incrementCurrentInterval(){var e;return Bt(this,Tt,Math.min(De(this,Tt,"f")*De(this,Gn,"f"),De(this,Vn,"f")),"f"),Bt(this,Tr,(e=De(this,Tr,"f"),e++,e),"f"),De(this,Tt,"f")}next(){return this.ellapsedTimeInMsec>=De(this,jn,"f")||De(this,Tr,"f")>=De(this,zn,"f")?null:(this.incrementCurrentInterval(),this.randomValueFromInterval)}}Tt=new WeakMap,qn=new WeakMap,Gn=new WeakMap,Vn=new WeakMap,Hn=new WeakMap,jn=new WeakMap,zn=new WeakMap,Yn=new WeakMap,Tr=new WeakMap;_i.default={initialInterval:uc,randomizationFactor:ac,multiplier:cc,maxInterval:fc,maxElapsedTime:lc,maxIterations:hc,date:Date};var Ze=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},ce=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},tt,tr,Pr,vt,Pt,Fr,Jr,vr,gt,mt,rr,nr,Qr,Sr,Nr,ir,or,dc,Kn,Wn,sr,kt;(function(t){t.Received="received",t.Processing="processing",t.Replied="replied",t.Rejected="rejected",t.Unknown="unknown",t.Done="done"})(kt||(kt={}));const Sn=60*1e3,tl="308182301d060d2b0601040182dc7c0503010201060c2b0601040182dc7c05030201036100814c0e6ec71fab583b08bd81373c255c3c371b2e84863c98a4f1e08b74235d14fb5d9c0cd546d9685f913a0c0b2cc5341583bf4b4392e467db96d65b9bb4cb717112f8472e0d5a4d14505ffd7484b01291091c5f87b98883463f98091a0baaae",rl="aaaaa-aa",nl="ic0.app",il=".ic0.app",sl="icp0.io",ol=".icp0.io",al="icp-api.io",cl=".icp-api.io";class Yi extends Pe{constructor(e){super(e),this.message=e}}class Nn extends Pe{constructor(e){super(e),this.message=e}}function ul(){let t;if(typeof window<"u")if(window.fetch)t=window.fetch.bind(window);else throw new Yi("Fetch implementation was not available. You appear to be in a browser context, but window.fetch was not present.");else if(typeof global<"u")if(global.fetch)t=global.fetch.bind(global);else throw new Yi("Fetch implementation was not available. You appear to be in a Node.js context, but global.fetch was not available.");else typeof self<"u"&&self.fetch&&(t=self.fetch.bind(self));if(t)return t;throw new Yi("Fetch implementation was not available. Please provide fetch to the HttpAgent constructor, or ensure it is available in the window or global context.")}function fl(t){let e;if(t!==void 0)!t.match(/^[a-z]+:/)&&typeof window<"u"?e=new URL(window.location.protocol+"//"+t):e=new URL(t);else{const r=["ic0.app","icp0.io","127.0.0.1","localhost"],n=[".github.dev",".gitpod.io"],i=typeof window<"u"?window.location:void 0,u=i==null?void 0:i.hostname;let f;u&&typeof u=="string"&&(n.some(a=>u.endsWith(a))?f=u:f=r.find(a=>u.endsWith(a))),i&&f?e=new URL(`${i.protocol}//${f}${i.port?":"+i.port:""}`):e=new URL("https://icp-api.io")}return e.toString()}class Or{constructor(e={}){var r,n;tt.add(this),tr.set(this,null),Pr.set(this,!1),vt.set(this,void 0),Pt.set(this,void 0),Fr.set(this,void 0),Jr.set(this,void 0),vr.set(this,0),gt.set(this,void 0),mt.set(this,void 0),rr.set(this,void 0),nr.set(this,void 0),this._isAgent=!0,this.config={},Qr.set(this,0),this.log=new el,Sr.set(this,[]),Nr.set(this,[]),ir.set(this,new L0({expirationTime:5*60*1e3})),or.set(this,!0),Wn.set(this,(f,a)=>{if(ce(this,or,"f")===!1)return f;if(!a)throw new Nt("Invalid signature from replica signed query: no matching node key found.");const{status:w,signatures:_=[],requestId:x}=f,N=Kr(new TextEncoder().encode("\vic-response"));for(const M of _){const{timestamp:T,identity:y}=M,G=xe.fromUint8Array(y).toText();let V;if(w==="replied"){const{reply:S}=f;V=Dn({status:w,reply:S,timestamp:BigInt(T),request_id:x})}else if(w==="rejected"){const{reject_code:S,reject_message:L,error_code:X}=f;V=Dn({status:w,reject_code:S,reject_message:L,error_code:X,timestamp:BigInt(T),request_id:x})}else throw new Error(`Unknown status: ${w}`);const W=Rt(N,Kr(new Uint8Array(V))),K=a==null?void 0:a.nodeKeys.get(G);if(!K)throw new Nt("Invalid signature from replica signed query: no matching node key found.");const Z=ur.fromDer(K).rawKey;if(Z0.verify(M.signature,new Uint8Array(W),new Uint8Array(Z)))return f;throw new Nt(`Invalid signature from replica ${G} signed query.`)}return f}),this.config=e,Ze(this,Pt,e.fetch||ul()||fetch.bind(global),"f"),Ze(this,Fr,e.fetchOptions,"f"),Ze(this,Jr,e.callOptions,"f"),Ze(this,Pr,(r=e.shouldFetchRootKey)!==null&&r!==void 0?r:!1,"f"),e.rootKey?this.rootKey=e.rootKey:ce(this,Pr,"f")?this.rootKey=null:this.rootKey=Ln(tl);const i=fl(e.host);this.host=new URL(i),e.verifyQuerySignatures!==void 0&&Ze(this,or,e.verifyQuerySignatures,"f"),Ze(this,mt,(n=e.retryTimes)!==null&&n!==void 0?n:3,"f");const u=()=>new _i({maxIterations:ce(this,mt,"f")});if(Ze(this,rr,e.backoffStrategy||u,"f"),this.host.hostname.endsWith(il)?this.host.hostname=nl:this.host.hostname.endsWith(ol)?this.host.hostname=sl:this.host.hostname.endsWith(cl)&&(this.host.hostname=al),e.credentials){const{name:f,password:a}=e.credentials;Ze(this,gt,`${f}${a?":"+a:""}`,"f")}if(Ze(this,vt,Promise.resolve(e.identity||new Gs),"f"),e.ingressExpiryInMinutes&&e.ingressExpiryInMinutes>5)throw new Pe(`The maximum ingress expiry time is 5 minutes. Provided ingress expiry time is ${e.ingressExpiryInMinutes} minutes.`);if(e.ingressExpiryInMinutes&&e.ingressExpiryInMinutes<=0)throw new Pe(`Ingress expiry time must be greater than 0. Provided ingress expiry time is ${e.ingressExpiryInMinutes} minutes.`);Ze(this,nr,e.ingressExpiryInMinutes||5,"f"),this.addTransform("update",js(ns)),e.useQueryNonces&&this.addTransform("query",js(ns)),e.logToConsole&&this.log.subscribe(f=>{f.level==="error"?console.error(f.message):f.level==="warn"?console.warn(f.message):console.log(f.message)})}get waterMark(){return ce(this,Qr,"f")}static createSync(e={}){return new this(Object.assign({},e))}static async create(e={shouldFetchRootKey:!1}){const r=Or.createSync(e),n=[r.syncTime()];return r.host.toString()!=="https://icp-api.io"&&e.shouldFetchRootKey&&n.push(r.fetchRootKey()),await Promise.all(n),r}static async from(e){var r;try{return"config"in e?await Or.create(e.config):await Or.create({fetch:e._fetch,fetchOptions:e._fetchOptions,callOptions:e._callOptions,host:e._host.toString(),identity:(r=e._identity)!==null&&r!==void 0?r:void 0})}catch{throw new Pe("Failed to create agent from provided agent")}}isLocal(){const e=this.host.hostname;return e==="127.0.0.1"||e.endsWith("127.0.0.1")}addTransform(e,r,n=r.priority||0){if(e==="update"){const i=ce(this,Nr,"f").findIndex(u=>(u.priority||0)<n);ce(this,Nr,"f").splice(i>=0?i:ce(this,Nr,"f").length,0,Object.assign(r,{priority:n}))}else if(e==="query"){const i=ce(this,Sr,"f").findIndex(u=>(u.priority||0)<n);ce(this,Sr,"f").splice(i>=0?i:ce(this,Sr,"f").length,0,Object.assign(r,{priority:n}))}}async getPrincipal(){if(!ce(this,vt,"f"))throw new Nn("This identity has expired due this application's security policy. Please refresh your authentication.");return(await ce(this,vt,"f")).getPrincipal()}async call(e,r,n){var i,u;await ce(this,tt,"m",sr).call(this);const f=(i=r.callSync)!==null&&i!==void 0?i:!0,a=await(n!==void 0?await n:await ce(this,vt,"f"));if(!a)throw new Nn("This identity has expired due this application's security policy. Please refresh your authentication.");const w=xe.from(e),_=r.effectiveCanisterId?xe.from(r.effectiveCanisterId):w,x=a.getPrincipal()||xe.anonymous();let N=new Tn(ce(this,nr,"f")*Sn);Math.abs(ce(this,vr,"f"))>1e3*30&&(N=new Tn(ce(this,nr,"f")*Sn+ce(this,vr,"f")));const M={request_type:rs.Call,canister_id:w,method_name:r.methodName,arg:r.arg,sender:x,ingress_expiry:N};let T=await this._transform({request:{body:null,method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},ce(this,gt,"f")?{Authorization:"Basic "+btoa(ce(this,gt,"f"))}:{})},endpoint:"call",body:M}),y;r!=null&&r.nonce?y=G(r.nonce):T.body.nonce?y=G(T.body.nonce):y=void 0,M.nonce=y;function G(Z){return new Uint8Array(Z)}T=await a.transformRequest(T);const V=Oi(T.body),W=ce(this,rr,"f").call(this),K=qs(M);try{const Z=()=>(this.log.print(`fetching "/api/v3/canister/${_.toText()}/call" with request:`,T),ce(this,Pt,"f").call(this,""+new URL(`/api/v3/canister/${_.toText()}/call`,this.host),Object.assign(Object.assign(Object.assign({},ce(this,Jr,"f")),T.request),{body:V}))),se=()=>(this.log.print(`fetching "/api/v2/canister/${_.toText()}/call" with request:`,T),ce(this,Pt,"f").call(this,""+new URL(`/api/v2/canister/${_.toText()}/call`,this.host),Object.assign(Object.assign(Object.assign({},ce(this,Jr,"f")),T.request),{body:V}))),L=await ce(this,tt,"m",Kn).call(this,{request:f?Z:se,backoff:W,tries:0}),X=await L.arrayBuffer(),Q=L.status===200&&X.byteLength>0?Gt(X):null;if(Q&&"certificate"in Q){const q=await this.parseTimeFromResponse({certificate:Q.certificate});Ze(this,Qr,q,"f")}return{requestId:K,response:{ok:L.ok,status:L.status,statusText:L.statusText,body:Q,headers:Wr(L.headers)},requestDetails:M}}catch(Z){if(Z.message.includes("v3 api not supported."))return this.log.warn("v3 api not supported. Fall back to v2"),this.call(e,Object.assign(Object.assign({},r),{callSync:!1}),n);const se=`Error while making call: ${(u=Z.message)!==null&&u!==void 0?u:String(Z)}`,S=new Of(se,Z,Ke(K),Ke(T.body.sender_pubkey),Ke(T.body.sender_sig),String(T.body.content.ingress_expiry._value));throw this.log.error(se,S),S}}async query(e,r,n){var i,u,f,a;await ce(this,tt,"m",sr).call(this);const w=ce(this,rr,"f").call(this),_=r.effectiveCanisterId?xe.from(r.effectiveCanisterId):xe.from(e);this.log.print(`ecid ${_.toString()}`),this.log.print(`canisterId ${e.toString()}`);let x,N;const M=await(n!==void 0?n:ce(this,vt,"f"));if(!M)throw new Nn("This identity has expired due this application's security policy. Please refresh your authentication.");const T=xe.from(e),y=(M==null?void 0:M.getPrincipal())||xe.anonymous(),G={request_type:"query",canister_id:T,method_name:r.methodName,arg:r.arg,sender:y,ingress_expiry:new Tn(ce(this,nr,"f")*Sn)},V=qs(G);x=await this._transform({request:{method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},ce(this,gt,"f")?{Authorization:"Basic "+btoa(ce(this,gt,"f"))}:{})},endpoint:"read",body:G}),x=await(M==null?void 0:M.transformRequest(x));const W=Oi(x.body),K={canister:T.toText(),ecid:_,transformedRequest:x,body:W,requestId:V,backoff:w,tries:0},Z=async()=>({requestDetails:G,query:await ce(this,tt,"m",dc).call(this,K)}),se=async()=>{if(!ce(this,or,"f"))return;const S=ce(this,ir,"f").get(_.toString());return S||(await this.fetchSubnetKeys(_.toString()),ce(this,ir,"f").get(_.toString()))};try{const[S,L]=await Promise.all([Z(),se()]);N=S;const{requestDetails:X,query:Q}=N,q=Object.assign(Object.assign({},Q),{requestDetails:X});if(this.log.print("Query response:",q),!ce(this,or,"f"))return q;try{return ce(this,Wn,"f").call(this,q,L)}catch{this.log.warn("Query response verification failed. Retrying with fresh subnet keys."),ce(this,ir,"f").delete(e.toString()),await this.fetchSubnetKeys(_.toString());const ee=ce(this,ir,"f").get(e.toString());if(!ee)throw new Nt("Invalid signature from replica signed query: no matching node key found.");return ce(this,Wn,"f").call(this,q,ee)}}catch(S){const L=`Error while making call: ${(i=S.message)!==null&&i!==void 0?i:String(S)}`,X=new Mf(L,S,String(V),Ke((u=x==null?void 0:x.body)===null||u===void 0?void 0:u.sender_pubkey),Ke((f=x==null?void 0:x.body)===null||f===void 0?void 0:f.sender_sig),String((a=x==null?void 0:x.body)===null||a===void 0?void 0:a.content.ingress_expiry._value));throw this.log.error(L,X),X}}async createReadStateRequest(e,r){await ce(this,tt,"m",sr).call(this);const n=await(r!==void 0?await r:await ce(this,vt,"f"));if(!n)throw new Nn("This identity has expired due this application's security policy. Please refresh your authentication.");const i=(n==null?void 0:n.getPrincipal())||xe.anonymous(),u=await this._transform({request:{method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},ce(this,gt,"f")?{Authorization:"Basic "+btoa(ce(this,gt,"f"))}:{})},endpoint:"read_state",body:{request_type:"read_state",paths:e.paths,sender:i,ingress_expiry:new Tn(ce(this,nr,"f")*Sn)}});return n==null?void 0:n.transformRequest(u)}async readState(e,r,n,i){var u,f,a,w;function _(G){for(const V of G.paths){const[W,K]=V,Z=Kr(new TextEncoder().encode("request_status"));if(si(W,Z))return K}}const x=_(r);await ce(this,tt,"m",sr).call(this);const N=typeof e=="string"?xe.fromText(e):e,M=i??await this.createReadStateRequest(r,n),T=Oi(M.body);this.log.print(`fetching "/api/v2/canister/${N}/read_state" with request:`,M);const y=ce(this,rr,"f").call(this);try{const G=await ce(this,tt,"m",Kn).call(this,{request:()=>ce(this,Pt,"f").call(this,""+new URL(`/api/v2/canister/${N.toString()}/read_state`,this.host),Object.assign(Object.assign(Object.assign({},ce(this,Fr,"f")),M.request),{body:T})),backoff:y,tries:0});if(!G.ok)throw new Error(`Server returned an error:
  Code: ${G.status} (${G.statusText})
  Body: ${await G.text()}
`);const V=Gt(await G.arrayBuffer());this.log.print("Read state response:",V);const W=await this.parseTimeFromResponse(V);return W>0&&(this.log.print("Read state response time:",W),Ze(this,Qr,W,"f")),V}catch(G){const V=`Caught exception while attempting to read state: ${(u=G.message)!==null&&u!==void 0?u:String(G)}`,W=new Pf(V,G,String(x),Ke((f=M==null?void 0:M.body)===null||f===void 0?void 0:f.sender_pubkey),Ke((a=M==null?void 0:M.body)===null||a===void 0?void 0:a.sender_sig),String((w=M==null?void 0:M.body)===null||w===void 0?void 0:w.content.ingress_expiry._value));throw this.log.error(V,W),W}}async parseTimeFromResponse(e){let r;if(e.certificate){const n=Gt(e.certificate);if(n&&"tree"in n)r=n.tree;else throw new Error("Could not decode time from response");const i=Vr(["time"],r);if(i.status!==Ve.Found)throw new Error("Time was not found in the response or was not in its expected format.");if(!(i.value instanceof ArrayBuffer)&&!ArrayBuffer.isView(i))throw new Error("Time was not found in the response or was not in its expected format.");const u=As(Kr(i.value));return this.log.print("Time from response:",u),this.log.print("Time from response in milliseconds:",Number(u)),Number(u)}else this.log.warn("No certificate found in response");return 0}async syncTime(e){await ce(this,tt,"m",sr).call(this);const r=await zc(()=>Promise.resolve().then(()=>R0),void 0),n=Date.now();try{e||this.log.print("Syncing time with the IC. No canisterId provided, so falling back to ryjl3-tyaaa-aaaaa-aaaba-cai");const i=Or.createSync({identity:new Gs,host:this.host.toString(),fetch:ce(this,Pt,"f"),retryTimes:0}),f=(await r.request({canisterId:e??xe.from("ryjl3-tyaaa-aaaaa-aaaba-cai"),agent:i,paths:["time"]})).get("time");f&&(Ze(this,vr,Number(f)-Number(n),"f"),this.log.notify({message:`Syncing time: offset of ${ce(this,vr,"f")}`,level:"info"}))}catch(i){this.log.error("Caught exception while attempting to sync time",i)}}async status(){const e=ce(this,gt,"f")?{Authorization:"Basic "+btoa(ce(this,gt,"f"))}:{};this.log.print('fetching "/api/v2/status"');const r=ce(this,rr,"f").call(this),n=await ce(this,tt,"m",Kn).call(this,{backoff:r,request:()=>ce(this,Pt,"f").call(this,""+new URL("/api/v2/status",this.host),Object.assign({headers:e},ce(this,Fr,"f"))),tries:0});return Gt(await n.arrayBuffer())}async fetchRootKey(){let e;return ce(this,tr,"f")?e=await ce(this,tr,"f"):(Ze(this,tr,new Promise((r,n)=>{this.status().then(i=>{const u=i.root_key;this.rootKey=u,r(u)}).catch(n)}),"f"),e=await ce(this,tr,"f")),Ze(this,tr,null,"f"),e}invalidateIdentity(){Ze(this,vt,null,"f")}replaceIdentity(e){Ze(this,vt,Promise.resolve(e),"f")}async fetchSubnetKeys(e){await ce(this,tt,"m",sr).call(this);const r=xe.from(e),i=(await rc({canisterId:r,paths:["subnet"],agent:this})).get("subnet");if(i&&typeof i=="object"&&"nodeKeys"in i)return ce(this,ir,"f").set(r.toText(),i),i}_transform(e){let r=Promise.resolve(e);if(e.endpoint==="call")for(const n of ce(this,Nr,"f"))r=r.then(i=>n(i).then(u=>u||i));else for(const n of ce(this,Sr,"f"))r=r.then(i=>n(i).then(u=>u||i));return r}}tr=new WeakMap,Pr=new WeakMap,vt=new WeakMap,Pt=new WeakMap,Fr=new WeakMap,Jr=new WeakMap,vr=new WeakMap,gt=new WeakMap,mt=new WeakMap,rr=new WeakMap,nr=new WeakMap,Qr=new WeakMap,Sr=new WeakMap,Nr=new WeakMap,ir=new WeakMap,or=new WeakMap,Wn=new WeakMap,tt=new WeakSet,dc=async function t(e){var r,n;const{ecid:i,transformedRequest:u,body:f,requestId:a,backoff:w,tries:_}=e,x=_===0?0:w.next();if(this.log.print(`fetching "/api/v2/canister/${i.toString()}/query" with tries:`,{tries:_,backoff:w,delay:x}),x===null)throw new Pe(`Timestamp failed to pass the watermark after retrying the configured ${ce(this,mt,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`);x>0&&await new Promise(y=>setTimeout(y,x));let N;try{this.log.print(`fetching "/api/v2/canister/${i.toString()}/query" with request:`,u);const y=await ce(this,Pt,"f").call(this,""+new URL(`/api/v2/canister/${i.toString()}/query`,this.host),Object.assign(Object.assign(Object.assign({},ce(this,Fr,"f")),u.request),{body:f}));if(y.status===200){const G=Gt(await y.arrayBuffer());N=Object.assign(Object.assign({},G),{httpDetails:{ok:y.ok,status:y.status,statusText:y.statusText,headers:Wr(y.headers)},requestId:a})}else throw new Mi(`Gateway returned an error:
  Code: ${y.status} (${y.statusText})
  Body: ${await y.text()}
`,{ok:y.ok,status:y.status,statusText:y.statusText,headers:Wr(y.headers)})}catch(y){if(_<ce(this,mt,"f"))return this.log.warn(`Caught exception while attempting to make query:
  ${y}
  Retrying query.`),await ce(this,tt,"m",t).call(this,Object.assign(Object.assign({},e),{tries:_+1}));throw y}const M=(n=(r=N.signatures)===null||r===void 0?void 0:r[0])===null||n===void 0?void 0:n.timestamp;if(!ce(this,or,"f"))return N;if(!M)throw new Error("Timestamp not found in query response. This suggests a malformed or malicious response.");const T=Number(BigInt(M)/BigInt(1e6));if(this.log.print("watermark and timestamp",{waterMark:this.waterMark,timestamp:T}),Number(this.waterMark)>T){const y=new Pe("Timestamp is below the watermark. Retrying query.");if(this.log.error("Timestamp is below",y,{timestamp:M,waterMark:this.waterMark}),_<ce(this,mt,"f"))return await ce(this,tt,"m",t).call(this,Object.assign(Object.assign({},e),{tries:_+1}));throw new Pe(`Timestamp failed to pass the watermark after retrying the configured ${ce(this,mt,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`)}return N},Kn=async function t(e){const{request:r,backoff:n,tries:i}=e,u=i===0?0:n.next();if(u===null)throw new Pe(`Timestamp failed to pass the watermark after retrying the configured ${ce(this,mt,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`);u>0&&await new Promise(_=>setTimeout(_,u));let f;try{f=await r()}catch(_){if(ce(this,mt,"f")>i)return this.log.warn(`Caught exception while attempting to make request:
  ${_}
  Retrying request.`),await ce(this,tt,"m",t).call(this,{request:r,backoff:n,tries:i+1});throw _}if(f.ok)return f;const a=await f.clone().text(),w=`Server returned an error:
  Code: ${f.status} (${f.statusText})
  Body: ${a}
`;if(f.status===404&&f.url.includes("api/v3"))throw new Mi("v3 api not supported. Fall back to v2",{ok:f.ok,status:f.status,statusText:f.statusText,headers:Wr(f.headers)});if(i<ce(this,mt,"f"))return await ce(this,tt,"m",t).call(this,{request:r,backoff:n,tries:i+1});throw new Mi(w,{ok:f.ok,status:f.status,statusText:f.statusText,headers:Wr(f.headers)})},sr=async function(){if(!this.rootKey)if(this.rootKey===null&&ce(this,Pr,"f"))await this.fetchRootKey();else throw new Pe(`Invalid root key detected. The root key for this agent is ${this.rootKey} and the shouldFetchRootKey value is set to ${ce(this,Pr,"f")}. The root key should only be unknown if you are in local development. Otherwise you should avoid fetching and use the default IC Root Key or the known root key of your environment.`)};var po;(function(t){t.Error="err",t.GetPrincipal="gp",t.GetPrincipalResponse="gpr",t.Query="q",t.QueryResponse="qr",t.Call="c",t.CallResponse="cr",t.ReadState="rs",t.ReadStateResponse="rsr",t.Status="s",t.StatusResponse="sr"})(po||(po={}));function yo(){const t=typeof window>"u"?typeof global>"u"?typeof self>"u"?void 0:self.ic.agent:global.ic.agent:window.ic.agent;if(!t)throw new Error("No Agent could be found.");return t}const ll=5*60*1e3;function pc(){return wl(dl(hl(),1e3),yl(1e3,1.2),pl(ll))}function hl(){let t=!0;return async()=>t?(t=!1,!0):!1}function dl(t,e){return async(r,n,i)=>{if(await t(r,n,i))return new Promise(u=>setTimeout(u,e))}}function pl(t){const e=Date.now()+t;return async(r,n,i)=>{if(Date.now()>e)throw new Error(`Request timed out after ${t} msec:
  Request ID: ${Ke(n)}
  Request status: ${i}
`)}}function yl(t,e){let r=t;return()=>new Promise(n=>setTimeout(()=>{r*=e,n()},r))}function wl(...t){return async(e,r,n)=>{for(const i of t)await i(e,r,n)}}async function yc(t,e,r,n=pc(),i,u){var f;const a=[new TextEncoder().encode("request_status"),r],w=i??await((f=t.createReadStateRequest)===null||f===void 0?void 0:f.call(t,{paths:[a]})),_=await t.readState(e,{paths:[a]},void 0,w);if(t.rootKey==null)throw new Error("Agent root key not initialized before polling");const x=await lr.create({certificate:_.certificate,rootKey:t.rootKey,canisterId:e,blsVerify:u}),N=dt(x.lookup([...a,new TextEncoder().encode("status")]));let M;switch(typeof N>"u"?M=kt.Unknown:M=new TextDecoder().decode(N),M){case kt.Replied:return{reply:dt(x.lookup([...a,"reply"])),certificate:x};case kt.Received:case kt.Unknown:case kt.Processing:return await n(e,r,M),yc(t,e,r,n,w,u);case kt.Rejected:{const T=new Uint8Array(dt(x.lookup([...a,"reject_code"])))[0],y=new TextDecoder().decode(dt(x.lookup([...a,"reject_message"])));throw new Error(`Call was rejected:
  Request ID: ${Ke(r)}
  Reject code: ${T}
  Reject text: ${y}
`)}case kt.Done:throw new Error(`Call was marked as done but we never saw the reply:
  Request ID: ${Ke(r)}
`)}throw new Error("unreachable")}const gl=({IDL:t})=>{const e=t.Variant({mainnet:t.Null,testnet:t.Null}),r=t.Text,n=t.Record({network:e,address:r,min_confirmations:t.Opt(t.Nat32)}),i=t.Nat64,u=i,f=t.Nat32,a=t.Record({start_height:f,end_height:t.Opt(f),network:e}),w=t.Vec(t.Nat8),_=t.Record({tip_height:f,block_headers:t.Vec(w)}),x=t.Record({network:e}),N=t.Nat64,M=t.Vec(N),T=t.Record({network:e,filter:t.Opt(t.Variant({page:t.Vec(t.Nat8),min_confirmations:t.Nat32})),address:r}),y=t.Vec(t.Nat8),G=t.Record({txid:t.Vec(t.Nat8),vout:t.Nat32}),V=t.Record({height:t.Nat32,value:i,outpoint:G}),W=t.Record({next_page:t.Opt(t.Vec(t.Nat8)),tip_height:f,tip_block_hash:y,utxos:t.Vec(V)}),K=t.Record({transaction:t.Vec(t.Nat8),network:e}),Z=t.Principal,se=t.Record({canister_id:Z,num_requested_changes:t.Opt(t.Nat64)}),S=t.Variant({from_user:t.Record({user_id:t.Principal}),from_canister:t.Record({canister_version:t.Opt(t.Nat64),canister_id:t.Principal})}),L=t.Vec(t.Nat8),X=t.Variant({creation:t.Record({controllers:t.Vec(t.Principal)}),code_deployment:t.Record({mode:t.Variant({reinstall:t.Null,upgrade:t.Null,install:t.Null}),module_hash:t.Vec(t.Nat8)}),load_snapshot:t.Record({canister_version:t.Nat64,taken_at_timestamp:t.Nat64,snapshot_id:L}),controllers_change:t.Record({controllers:t.Vec(t.Principal)}),code_uninstall:t.Null}),Q=t.Record({timestamp_nanos:t.Nat64,canister_version:t.Nat64,origin:S,details:X}),q=t.Record({controllers:t.Vec(t.Principal),module_hash:t.Opt(t.Vec(t.Nat8)),recent_changes:t.Vec(Q),total_num_changes:t.Nat64}),C=t.Record({canister_id:Z}),ee=t.Variant({controllers:t.Null,public:t.Null,allowed_viewers:t.Vec(t.Principal)}),te=t.Record({freezing_threshold:t.Nat,controllers:t.Vec(t.Principal),reserved_cycles_limit:t.Nat,log_visibility:ee,wasm_memory_limit:t.Nat,memory_allocation:t.Nat,compute_allocation:t.Nat}),B=t.Record({status:t.Variant({stopped:t.Null,stopping:t.Null,running:t.Null}),memory_size:t.Nat,cycles:t.Nat,settings:te,query_stats:t.Record({response_payload_bytes_total:t.Nat,num_instructions_total:t.Nat,num_calls_total:t.Nat,request_payload_bytes_total:t.Nat}),idle_cycles_burned_per_day:t.Nat,module_hash:t.Opt(t.Vec(t.Nat8)),reserved_cycles:t.Nat}),U=t.Record({canister_id:Z}),$=t.Record({freezing_threshold:t.Opt(t.Nat),controllers:t.Opt(t.Vec(t.Principal)),reserved_cycles_limit:t.Opt(t.Nat),log_visibility:t.Opt(ee),wasm_memory_limit:t.Opt(t.Nat),memory_allocation:t.Opt(t.Nat),compute_allocation:t.Opt(t.Nat)}),Y=t.Record({settings:t.Opt($),sender_canister_version:t.Opt(t.Nat64)}),D=t.Record({canister_id:Z}),re=t.Record({canister_id:Z}),le=t.Record({canister_id:Z,snapshot_id:L}),ye=t.Record({canister_id:Z}),oe=t.Variant({secp256k1:t.Null}),fe=t.Record({key_id:t.Record({name:t.Text,curve:oe}),canister_id:t.Opt(Z),derivation_path:t.Vec(t.Vec(t.Nat8))}),Ne=t.Record({public_key:t.Vec(t.Nat8),chain_code:t.Vec(t.Nat8)}),E=t.Record({canister_id:Z}),Ae=t.Record({idx:t.Nat64,timestamp_nanos:t.Nat64,content:t.Vec(t.Nat8)}),Ie=t.Record({canister_log_records:t.Vec(Ae)}),ae=t.Record({value:t.Text,name:t.Text}),J=t.Record({status:t.Nat,body:t.Vec(t.Nat8),headers:t.Vec(ae)}),ne=t.Record({url:t.Text,method:t.Variant({get:t.Null,head:t.Null,post:t.Null}),max_response_bytes:t.Opt(t.Nat64),body:t.Opt(t.Vec(t.Nat8)),transform:t.Opt(t.Record({function:t.Func([t.Record({context:t.Vec(t.Nat8),response:J})],[J],["query"]),context:t.Vec(t.Nat8)})),headers:t.Vec(ae)}),g=t.Variant({reinstall:t.Null,upgrade:t.Opt(t.Record({wasm_memory_persistence:t.Opt(t.Variant({keep:t.Null,replace:t.Null})),skip_pre_upgrade:t.Opt(t.Bool)})),install:t.Null}),b=t.Record({hash:t.Vec(t.Nat8)}),v=t.Record({arg:t.Vec(t.Nat8),wasm_module_hash:t.Vec(t.Nat8),mode:g,chunk_hashes_list:t.Vec(b),target_canister:Z,store_canister:t.Opt(Z),sender_canister_version:t.Opt(t.Nat64)}),F=t.Vec(t.Nat8),R=t.Record({arg:t.Vec(t.Nat8),wasm_module:F,mode:g,canister_id:Z,sender_canister_version:t.Opt(t.Nat64)}),P=t.Record({canister_id:Z}),h=t.Record({id:L,total_size:t.Nat64,taken_at_timestamp:t.Nat64}),s=t.Vec(h),o=t.Record({canister_id:Z,sender_canister_version:t.Opt(t.Nat64),snapshot_id:L}),p=t.Record({start_at_timestamp_nanos:t.Nat64,subnet_id:t.Principal}),m=t.Record({num_block_failures_total:t.Nat64,node_id:t.Principal,num_blocks_proposed_total:t.Nat64}),I=t.Vec(t.Record({timestamp_nanos:t.Nat64,node_metrics:t.Vec(m)})),H=t.Record({settings:t.Opt($),specified_id:t.Opt(Z),amount:t.Opt(t.Nat),sender_canister_version:t.Opt(t.Nat64)}),ie=t.Record({canister_id:Z}),ue=t.Record({canister_id:Z,amount:t.Nat}),he=t.Vec(t.Nat8),be=t.Variant({ed25519:t.Null,bip340secp256k1:t.Null}),d=t.Record({key_id:t.Record({algorithm:be,name:t.Text}),canister_id:t.Opt(Z),derivation_path:t.Vec(t.Vec(t.Nat8))}),c=t.Record({public_key:t.Vec(t.Nat8),chain_code:t.Vec(t.Nat8)}),l=t.Record({key_id:t.Record({name:t.Text,curve:oe}),derivation_path:t.Vec(t.Vec(t.Nat8)),message_hash:t.Vec(t.Nat8)}),A=t.Record({signature:t.Vec(t.Nat8)}),k=t.Variant({bip341:t.Record({merkle_root_hash:t.Vec(t.Nat8)})}),z=t.Record({aux:t.Opt(k),key_id:t.Record({algorithm:be,name:t.Text}),derivation_path:t.Vec(t.Vec(t.Nat8)),message:t.Vec(t.Nat8)}),j=t.Record({signature:t.Vec(t.Nat8)}),ge=t.Record({canister_id:Z}),_e=t.Record({canister_id:Z}),me=t.Record({canister_id:Z}),we=t.Vec(b),Se=t.Record({subnet_id:t.Principal}),Me=t.Record({replica_version:t.Text}),Ei=t.Record({replace_snapshot:t.Opt(L),canister_id:Z}),Bi=h,Ai=t.Record({canister_id:Z,sender_canister_version:t.Opt(t.Nat64)}),Ti=t.Record({canister_id:t.Principal,settings:$,sender_canister_version:t.Opt(t.Nat64)}),vi=t.Record({chunk:t.Vec(t.Nat8),canister_id:t.Principal}),jt=b;return t.Service({bitcoin_get_balance:t.Func([n],[u],[]),bitcoin_get_block_headers:t.Func([a],[_],[]),bitcoin_get_current_fee_percentiles:t.Func([x],[M],[]),bitcoin_get_utxos:t.Func([T],[W],[]),bitcoin_send_transaction:t.Func([K],[],[]),canister_info:t.Func([se],[q],[]),canister_status:t.Func([C],[B],[]),clear_chunk_store:t.Func([U],[],[]),create_canister:t.Func([Y],[D],[]),delete_canister:t.Func([re],[],[]),delete_canister_snapshot:t.Func([le],[],[]),deposit_cycles:t.Func([ye],[],[]),ecdsa_public_key:t.Func([fe],[Ne],[]),fetch_canister_logs:t.Func([E],[Ie],["query"]),http_request:t.Func([ne],[J],[]),install_chunked_code:t.Func([v],[],[]),install_code:t.Func([R],[],[]),list_canister_snapshots:t.Func([P],[s],[]),load_canister_snapshot:t.Func([o],[],[]),node_metrics_history:t.Func([p],[I],[]),provisional_create_canister_with_cycles:t.Func([H],[ie],[]),provisional_top_up_canister:t.Func([ue],[],[]),raw_rand:t.Func([],[he],[]),schnorr_public_key:t.Func([d],[c],[]),sign_with_ecdsa:t.Func([l],[A],[]),sign_with_schnorr:t.Func([z],[j],[]),start_canister:t.Func([ge],[],[]),stop_canister:t.Func([_e],[],[]),stored_chunks:t.Func([me],[we],[]),subnet_info:t.Func([Se],[Me],[]),take_canister_snapshot:t.Func([Ei],[Bi],[]),uninstall_code:t.Func([Ai],[],[]),update_settings:t.Func([Ti],[],[]),upload_chunk:t.Func([vi],[jt],[])})};class wc extends Pe{constructor(e,r,n,i){super(["Call failed:",`  Canister: ${e.toText()}`,`  Method: ${r} (${n})`,...Object.getOwnPropertyNames(i).map(u=>`  "${u}": ${JSON.stringify(i[u])}`)].join(`
`)),this.canisterId=e,this.methodName=r,this.type=n,this.props=i}}class ml extends wc{constructor(e,r,n){var i;super(e,r,"query",{Status:n.status,Code:(i=Ki[n.reject_code])!==null&&i!==void 0?i:`Unknown Code "${n.reject_code}"`,Message:n.reject_message}),this.result=n}}class wo extends wc{constructor(e,r,n,i,u,f,a){super(e,r,"update",Object.assign({"Request ID":Ke(n)},i.body?Object.assign(Object.assign({},a?{"Error code":a}:{}),{"Reject code":String(u),"Reject message":f}):{"HTTP status code":i.status.toString(),"HTTP status text":i.statusText})),this.requestId=n,this.response=i,this.reject_code=u,this.reject_message=f,this.error_code=a}}const ht=Symbol.for("ic-agent-metadata");class xi{constructor(e){this[ht]=Object.freeze(e)}static agentOf(e){return e[ht].config.agent}static interfaceOf(e){return e[ht].service}static canisterIdOf(e){return xe.from(e[ht].config.canisterId)}static async install(e,r){const n=e.mode===void 0?{install:null}:e.mode,i=e.arg?[...new Uint8Array(e.arg)]:[],u=[...new Uint8Array(e.module)],f=typeof r.canisterId=="string"?xe.fromText(r.canisterId):r.canisterId;await go(r).install_code({mode:n,arg:i,wasm_module:u,canister_id:f,sender_canister_version:[]})}static async createCanister(e,r){function n(u){return[{controllers:u.controllers?[u.controllers]:[],compute_allocation:u.compute_allocation?[u.compute_allocation]:[],freezing_threshold:u.freezing_threshold?[u.freezing_threshold]:[],memory_allocation:u.memory_allocation?[u.memory_allocation]:[],reserved_cycles_limit:[],log_visibility:[],wasm_memory_limit:[]}]}const{canister_id:i}=await go(e||{}).provisional_create_canister_with_cycles({amount:[],settings:n(r||{}),specified_id:[],sender_canister_version:[]});return i}static async createAndInstallCanister(e,r,n){const i=await this.createCanister(n);return await this.install(Object.assign({},r),Object.assign(Object.assign({},n),{canisterId:i})),this.createActor(e,Object.assign(Object.assign({},n),{canisterId:i}))}static createActorClass(e,r){const n=e({IDL:Ru});class i extends xi{constructor(f){if(!f.canisterId)throw new Pe(`Canister ID is required, but received ${typeof f.canisterId} instead. If you are using automatically generated declarations, this may be because your application is not setting the canister ID in process.env correctly.`);const a=typeof f.canisterId=="string"?xe.fromText(f.canisterId):f.canisterId;super({config:Object.assign(Object.assign(Object.assign({},gc),f),{canisterId:a}),service:n});for(const[w,_]of n._fields)r!=null&&r.httpDetails&&_.annotations.push(fs),r!=null&&r.certificate&&_.annotations.push(mc),this[w]=bl(this,w,_,f.blsVerify)}}return i}static createActor(e,r){if(!r.canisterId)throw new Pe(`Canister ID is required, but received ${typeof r.canisterId} instead. If you are using automatically generated declarations, this may be because your application is not setting the canister ID in process.env correctly.`);return new(this.createActorClass(e))(r)}static createActorWithHttpDetails(e,r){return new(this.createActorClass(e,{httpDetails:!0}))(r)}static createActorWithExtendedDetails(e,r,n={httpDetails:!0,certificate:!0}){return new(this.createActorClass(e,n))(r)}}function Ar(t,e){const r=qo(t,mo.Buffer.from(e));switch(r.length){case 0:return;case 1:return r[0];default:return r}}const gc={pollingStrategyFactory:pc},fs="http-details",mc="certificate";function bl(t,e,r,n){let i;r.annotations.includes("query")||r.annotations.includes("composite_query")?i=async(f,...a)=>{var w,_;f=Object.assign(Object.assign({},f),(_=(w=t[ht].config).queryTransform)===null||_===void 0?void 0:_.call(w,e,a,Object.assign(Object.assign({},t[ht].config),f)));const x=f.agent||t[ht].config.agent||yo(),N=xe.from(f.canisterId||t[ht].config.canisterId),M=Zi(r.argTypes,a),T=await x.query(N,{methodName:e,arg:M,effectiveCanisterId:f.effectiveCanisterId}),y=Object.assign(Object.assign({},T.httpDetails),{requestDetails:T.requestDetails});switch(T.status){case"rejected":throw new ml(N,e,T);case"replied":return r.annotations.includes(fs)?{httpDetails:y,result:Ar(r.retTypes,T.reply.arg)}:Ar(r.retTypes,T.reply.arg)}}:i=async(f,...a)=>{var w,_;f=Object.assign(Object.assign({},f),(_=(w=t[ht].config).callTransform)===null||_===void 0?void 0:_.call(w,e,a,Object.assign(Object.assign({},t[ht].config),f)));const x=f.agent||t[ht].config.agent||yo(),{canisterId:N,effectiveCanisterId:M,pollingStrategyFactory:T}=Object.assign(Object.assign(Object.assign({},gc),t[ht].config),f),y=xe.from(N),G=M!==void 0?xe.from(M):y,V=Zi(r.argTypes,a),{requestId:W,response:K,requestDetails:Z}=await x.call(y,{methodName:e,arg:V,effectiveCanisterId:G});let se,S;if(K.body&&K.body.certificate){if(x.rootKey==null)throw new Error("Agent is missing root key");const q=K.body.certificate;S=await lr.create({certificate:Xn(q),rootKey:x.rootKey,canisterId:xe.from(N),blsVerify:n});const C=[new TextEncoder().encode("request_status"),W];switch(new TextDecoder().decode(dt(S.lookup([...C,"status"])))){case"replied":se=dt(S.lookup([...C,"reply"]));break;case"rejected":{const te=new Uint8Array(dt(S.lookup([...C,"reject_code"])))[0],B=new TextDecoder().decode(dt(S.lookup([...C,"reject_message"]))),U=dt(S.lookup([...C,"error_code"])),$=U?new TextDecoder().decode(U):void 0;throw new wo(y,e,W,K,te,B,$)}}}else if(K.body&&"reject_message"in K.body){const{reject_code:q,reject_message:C,error_code:ee}=K.body;throw new wo(y,e,W,K,q,C,ee)}if(K.status===202){const q=T(),C=await yc(x,G,W,q,n);S=C.certificate,se=C.reply}const L=r.annotations.includes(fs),X=r.annotations.includes(mc),Q=Object.assign(Object.assign({},K),{requestDetails:Z});if(se!==void 0)return L&&X?{httpDetails:Q,certificate:S,result:Ar(r.retTypes,se)}:X?{certificate:S,result:Ar(r.retTypes,se)}:L?{httpDetails:Q,result:Ar(r.retTypes,se)}:Ar(r.retTypes,se);if(r.retTypes.length===0)return L?{httpDetails:K,result:void 0}:void 0;throw new Error(`Call was returned undefined, but type [${r.retTypes.join(",")}].`)};const u=(...f)=>i({},...f);return u.withOptions=f=>(...a)=>i(f,...a),u}function go(t){function e(r,n){if(t.effectiveCanisterId)return{effectiveCanisterId:xe.from(t.effectiveCanisterId)};const i=n[0];let u=xe.fromHex("");return i&&typeof i=="object"&&i.target_canister&&r==="install_chunked_code"&&(u=xe.from(i.target_canister)),i&&typeof i=="object"&&i.canister_id&&(u=xe.from(i.canister_id)),{effectiveCanisterId:u}}return xi.createActor(gl,Object.assign(Object.assign(Object.assign({},t),{canisterId:xe.fromHex("")}),{callTransform:e,queryTransform:e}))}const _l=({IDL:t})=>t.Service({checkBalance:t.Func([],[t.Float64],["query"]),compound:t.Func([],[],[]),topUp:t.Func([t.Float64],[],[]),withDraw:t.Func([t.Float64],[],[])}),xl="uxrrr-q7777-77774-qaaaq-cai",El=(t,e={})=>{const r=e.agent||new Or({...e.agentOptions});return e.agent&&e.agentOptions&&console.warn("Detected both agent and agentOptions passed to createActor. Ignoring agentOptions and proceeding with the provided agent."),r.fetchRootKey().catch(n=>{console.warn("Unable to fetch root key. Check to ensure that your local replica is running"),console.error(n)}),xi.createActor(_l,{agent:r,canisterId:t,...e.actorOptions})},Dr=El(xl);window.addEventListener("load",async function(){console.log("finished loading");const t=await Dr.checkBalance();document.getElementById("value").innerText=Math.round(t*100)/100});document.querySelector("form").addEventListener("submit",async function(t){t.preventDefault();const e=t.target.querySelector("submit-btn"),r=parseFloat(document.getElementById("input-amount").value),n=parseFloat(document.getElementById("withdrawal-amount").value);e.setAttribute("disabled",!0),document.getElementById("input-amount").value.length!=0&&await Dr.topUp(r),document.getElementById("withdrawal-amount").value.length!=0&&await Dr.topUp(n),await Dr.compound();const i=await Dr.checkBalance();document.getElementById("value").innerText=Math.round(i*100)/100,document.getElementById("input-amount").value="",document.getElementById("withdrawal-amount").value="",e.removeAtrribute("disabled")});
